<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì¶”ì–µì˜ ì „ìŸ ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 25%, #0f3460 50%, #1a1a2e 75%, #533483 100%);
            color: #fff;
            padding: 20px;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(255, 0, 0, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(0, 0, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        .count-control {
    display: flex;
    align-items: center;
    gap: 4px;
}
.count-btn {
    width: 24px;
    height: 24px;
    padding: 0;
    border: none;
    border-radius: 4px;
    background: #4CAF50;
    color: white;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    -webkit-user-select: none;
    touch-action: manipulation;
}
.count-btn:active {
    background: #45a049;
    transform: scale(0.95);
}
.count-input {
    width: 40px;
    text-align: center;
    padding: 4px;
    border-radius: 5px;
    border: 1px solid #ccc;
    font-size: 12px;
}
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .setup-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        .team-setup {
            background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
            padding: 14px;
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.08);
            box-shadow: 0 6px 18px rgba(0,0,0,0.35);
            max-height: 600px;
            overflow-y: auto;
        }
        .team-setup h2 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .team-name-input {
            flex: 1;
            padding: 8px;
            border-radius: 5px;
            border: none;
            font-size: 16px;
        }
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .btn-primary {
            background: #4CAF50;
            color: white;
        }
        .btn-primary:hover {
            background: #45a049;
        }
        .btn-secondary {
            background: #2196F3;
            color: white;
        }
        .btn-secondary:hover {
            background: #0b7dda;
        }
        .unit-config {
            margin: 10px 0;
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
        }
        .unit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .unit-controls {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }
        .control-group label {
            font-size: 11px;
            opacity: 0.9;
        }
        .control-group input, .control-group select {
            padding: 4px;
            border-radius: 5px;
            border: none;
            font-size: 12px;
        }
        .battle-controls {
            text-align: center;
            margin: 20px 0;
        }
        .battle-controls .btn {
            font-size: 18px;
            padding: 15px 40px;
            margin: 0 10px;
        }
        .battlefield {
            border-radius: 15px;
            padding: 30px;
            min-height: 600px;
            position: relative;
            overflow: hidden;
            border: 3px solid rgba(255,255,255,0.2);
            box-shadow: inset 0 0 40px rgba(0,0,0,0.5);
        }
 
     
        .battlefield .armies-container {
            position: relative;
            z-index: 3;
        }
        .armies-container {
            display: flex;
            justify-content: space-between;
            align-items: stretch;
            height: 100%;
            position: relative;
            gap: 20px;
        }
        .army-side {
            flex: 1;
            position: relative;
            border-right: 2px dashed rgba(255,255,255,0.2);
        }
        .army-side:last-child {
            border-right: none;
        }
        .army-side h3 {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 18px;
            background: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 5px;
            z-index: 5;
        }
        .soldier {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .soldier:hover {
            transform: scale(1.1);
        }
        .soldier:hover .soldier-details {
            display: block;
        }
        .soldier.archer:hover::before {
            content: '';
            position: absolute;
            width: 400px;
            height: 400px;
            border: 2px dashed rgba(0, 242, 254, 0.4);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
            z-index: -1;
        }
        .soldier-details {
            display: none;
        }
        .soldier-avatar {
            font-size: 40px;
            margin-bottom: 5px;
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.5));
            transition: transform 0.1s;
        }
        .soldier.moving .soldier-avatar {
            animation: move-bounce 0.4s ease-in-out infinite;
        }
        .soldier.attacking .soldier-avatar {
            animation: attack-swing 0.2s ease-in-out;
        }
        .soldier-info {
            background: transparent;
            padding: 2px 0;
            border-radius: 0;
            font-size: 12px;
            min-width: 50px;
            text-align: center;
            border: none;
            visibility: visible;
            opacity: 1;
            transition: opacity 0.2s;
            z-index: 100;
            position: absolute;
            bottom: -18px;
            left: 50%;
            transform: translateX(-50%);
        }
        .soldier-info.knight {
            border-color: #f5576c;
        }
        .soldier-info.archer {
            border-color: #00f2fe;
        }
        .soldier-hp {
            font-weight: bold;
            color: #4CAF50;
            font-size: 13px;
            margin-bottom: 4px;
        }
        .health-bar {
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            overflow: hidden;
            width: 80px;
        }
        .health-fill {
            height: 100%;
            transition: width 0.2s;
        }
        .team1 .health-fill {
            background: linear-gradient(90deg, #ff6b6b, #ff8787);
        }
        .team2 .health-fill {
            background: linear-gradient(90deg, #4ecdc4, #45b7aa);
        }
        .soldier-info.knight .health-fill {
            background: linear-gradient(90deg, #ff6b6b, #ff8787);
        }
        .soldier-info.archer .health-fill {
            background: linear-gradient(90deg, #4ecdc4, #45b7aa);
        }
        .health-fill.special-flash {
            animation: health-bar-flash 0.4s ease-out;
        }
        .soldier.invincible .health-fill {
            background: linear-gradient(90deg, #8a2be2, #c084fc) !important;
            box-shadow: 0 0 12px rgba(138,43,226,0.6);
        }
        .team-counts {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.6);
            padding: 6px 10px;
            border-radius: 8px;
            font-size: 12px;
            cursor: default;
            z-index: 10;
        }
        .team-counts .summary {
            font-weight: bold;
            color: #fff;
        }
        .team-counts .details {
            display: none;
            margin-top: 6px;
            background: rgba(255,255,255,0.03);
            padding: 6px;
            border-radius: 6px;
            text-align: left;
            white-space: nowrap;
            font-size: 11px;
        }
        .team-counts:hover .details { display: block; }
        .unit-info-icon {
    display: inline-block;
    width: 16px;
    height: 16px;
    background: #2196F3;
    color: white;
    border-radius: 50%;
    text-align: center;
    line-height: 16px;
    font-size: 11px;
    cursor: help;
    margin-left: 5px;
    position: relative;
}

.unit-tooltip {
    display: none;
    position: absolute;
    left: 20px;
    top: 0;
    background: rgba(0, 0, 0, 0.95);
    color: #fff;
    padding: 10px;
    border-radius: 8px;
    border: 2px solid #2196F3;
    width: 250px;
    z-index: 1000;
    font-size: 11px;
    line-height: 1.5;
    box-shadow: 0 4px 12px rgba(0,0,0,0.5);
}

.unit-info-icon:hover .unit-tooltip {
    display: block;
}

.unit-tooltip .stat-line {
    margin: 3px 0;
    color: #ffd700;
}

.unit-tooltip .ability-line {
    margin: 5px 0;
    color: #4CAF50;
    border-top: 1px solid rgba(255,255,255,0.2);
    padding-top: 5px;
}

        .btn-fast { background: linear-gradient(90deg,#f6b73c,#ff7a18); color: #111; }
        @keyframes health-bar-flash {
            0% { filter: drop-shadow(0 0 8px rgba(128, 0, 255, 1)); }
            50% { filter: drop-shadow(0 0 15px rgba(128, 0, 255, 0.8)); }
            100% { filter: drop-shadow(0 0 3px rgba(128, 0, 255, 0)); }
        }
       /* ë˜ëŠ” ì‚´ì§ ë°ì€ íšŒìƒ‰: */
.soldier-details {
    font-size: 10px;
    color: #ddd;  /* â† ë°ì€ íšŒìƒ‰ */
    margin-top: 4px;
    line-height: 1.3;
}

/* â˜… soldier-hp ìƒ‰ë„ ë°ê²Œ */
.soldier-hp {
    font-weight: bold;
    color: #00ff00;  /* â† ë°ì€ ì´ˆë¡ìƒ‰ */
    font-size: 13px;
    margin-bottom: 4px;
}
        .genius-badge {
            display: inline-block;
            background: gold;
            color: #000;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 9px;
            font-weight: bold;
            margin-top: 2px;
        }

        .boss-card {
    background: linear-gradient(180deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
    border: 3px solid rgba(255,255,255,0.2);
    border-radius: 15px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
}

.boss-card:hover {
    transform: translateY(-10px);
    border-color: #4CAF50;
    box-shadow: 0 10px 30px rgba(76, 175, 80, 0.5);
}

.boss-card-icon {
    font-size: 48px;
    margin-bottom: 10px;
}

.boss-card-name {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
}

.boss-card-stats {
    font-size: 12px;
    color: #ffd700;
    margin-bottom: 15px;
}

.boss-card-select {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
}

.boss-card-select:hover {
    background: #45a049;
}

.selected-unit-item {
    background: rgba(76, 175, 80, 0.3);
    border: 2px solid #4CAF50;
    border-radius: 10px;
    padding: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.selected-unit-item .unit-icon {
    font-size: 32px;
}

.selected-unit-item .remove-btn {
    background: #ff4444;
    color: white;
    border: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    cursor: pointer;
    font-weight: bold;
}
        .special-indicator {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 20px;
            animation: special-pulse 0.5s ease-out;
            pointer-events: none;
        }
        @keyframes special-pulse {
            0% { 
                transform: translateX(-50%) scale(0);
                opacity: 1;
            }
            100% { 
                transform: translateX(-50%) scale(1.5);
                opacity: 0;
            }
        }
        .cooldown-reduction {
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            animation: cooldown-flash 0.6s ease-out;
            pointer-events: none;
        }
        @keyframes cooldown-flash {
            0% { 
                transform: translateX(-50%) scale(0);
                filter: drop-shadow(0 0 10px rgba(128, 0, 255, 1));
                opacity: 1;
            }
            50% {
                filter: drop-shadow(0 0 20px rgba(128, 0, 255, 0.8));
            }
            100% { 
                transform: translateX(-50%) scale(1);
                filter: drop-shadow(0 0 5px rgba(128, 0, 255, 0.3));
                opacity: 0;
            }
        }

        .soldier.hit-animation .soldier-avatar {
            animation: hit-shake 0.15s ease-out;
        }
        @keyframes hit-shake {
            0%, 100% { transform: translateX(0) scale(1); }
            25% { transform: translateX(-8px) scale(1.05); }
            75% { transform: translateX(8px) scale(0.95); }
        }
        @keyframes move-bounce {
            0%, 100% { transform: translateY(0) scaleY(1); }
            50% { transform: translateY(-5px) scaleY(0.95); }
        }
        @keyframes attack-swing {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(15deg); }
        }
        .unit-info-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: bold;
    margin: 10px auto;
    display: block;
    transition: transform 0.2s;
}

.unit-info-btn:hover {
    transform: scale(1.05);
}

.unit-info-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    overflow-y: auto;
}

.unit-info-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.unit-info-content {
    background: linear-gradient(180deg, #1a1a2e, #16213e);
    border-radius: 15px;
    padding: 20px;
    max-width: 900px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    border: 2px solid rgba(255,255,255,0.2);
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
}

.soldier.sand-debuff .soldier-avatar {
    filter: hue-rotate(90deg) saturate(3) brightness(1.2) drop-shadow(0 0 8px lime);
    animation: sand-pulse 1s infinite;
}

@keyframes sand-pulse {
    0%, 100% { 
        filter: hue-rotate(90deg) saturate(3) brightness(1.2) drop-shadow(0 0 8px lime);
    }
    50% { 
        filter: hue-rotate(90deg) saturate(3) brightness(1.4) drop-shadow(0 0 15px #00ff00);
    }
}
.unit-info-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    border-bottom: 2px solid rgba(255,255,255,0.2);
    padding-bottom: 10px;
}

.unit-info-header h2 {
    color: #fff;
    font-size: 24px;
}

.close-modal {
    background: #ff4444;
    color: white;
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px;
    font-weight: bold;
}

.unit-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 15px;
}

.unit-card {
    background: rgba(255,255,255,0.05);
    border: 2px solid rgba(255,255,255,0.1);
    border-radius: 10px;
    padding: 15px;
    cursor: pointer;
    transition: all 0.3s;
}

.unit-card:hover {
    background: rgba(255,255,255,0.1);
    border-color: #4CAF50;
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
}

.unit-card-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    font-size: 20px;
}

.unit-card-icon {
    font-size: 32px;
}

.unit-card-name {
    font-weight: bold;
    font-size: 16px;
}

.unit-card-stats {
    font-size: 11px;
    color: #ffd700;
    margin: 8px 0;
    line-height: 1.6;
}

.unit-card-ability {
    font-size: 12px;
    color: #4CAF50;
    border-top: 1px solid rgba(255,255,255,0.2);
    padding-top: 8px;
    margin-top: 8px;
    line-height: 1.5;
}

.unit-theme-badge {
    display: inline-block;
    background: rgba(255,255,255,0.2);
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 10px;
    margin-left: 5px;
}
        .battle-log {
            background: rgba(0,0,0,0.5);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            max-height: 150px;
            overflow-y: auto;
            border: 2px solid rgba(255,255,255,0.2);
        }
        .log-entry {
            padding: 5px;
            margin: 2px 0;
            font-size: 12px;
            border-left: 3px solid #4CAF50;
            padding-left: 10px;
        }
        .log-entry.special {
            border-left-color: gold;
            background: rgba(255,215,0,0.15);
            color: #ffeb3b;
        }
        .log-entry.damage {
            border-left-color: #ff6b6b;
            background: rgba(255,107,107,0.1);
        }
        .winner-announce {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            padding: 60px 80px;
            border-radius: 20px;
            font-size: 48px;
            z-index: 2000;
            animation: winner-bounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 4px solid gold;
            box-shadow: 0 0 60px rgba(255,215,0,0.8);
        }
        @keyframes winner-bounce {
            0% { transform: translate(-50%, -50%) scale(0) rotate(-180deg); }
            100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
        }
        @keyframes fade-out-death {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(20px) scale(0.8); }
        }
        .soldier.dead {
            animation: fade-out-death 1s ease-out forwards;
        }
        @keyframes gear-glow {
    0% { 
        filter: drop-shadow(0 0 2px #ff0000);
        transform: scale(1);
    }
    50% { 
        filter: drop-shadow(0 0 16px #ff0000) drop-shadow(0 0 24px #ff4444);
        transform: scale(1.1);
    }
    100% { 
        filter: drop-shadow(0 0 8px #ff0000) drop-shadow(0 0 16px #ff4444);
        transform: scale(1);
    }
}

/* ë¬´ì  ìƒíƒœ ì§€ì† ì‹œê°„ ë™ì•ˆ ê³„ì† ë¹›ë‚˜ê²Œ */
.soldier.killergear.invincible .soldier-avatar {
    animation: gear-pulse 0.8s ease-in-out infinite;
}

@keyframes gear-pulse {
    0%, 100% { 
        filter: drop-shadow(0 0 8px #ff0000) drop-shadow(0 0 16px #ff4444);
    }
    50% { 
        filter: drop-shadow(0 0 12px #ff0000) drop-shadow(0 0 20px #ff4444);
    }
}
/* ì •ë¹„ì†Œ ë²„í”„ íš¨ê³¼ */
.soldier.repair-buff .soldier-avatar {
    filter: drop-shadow(0 0 10px #c0c0c0) 
            drop-shadow(0 0 20px #808080)
            drop-shadow(0 0 8px #a9a9a9)
            brightness(1.1);
    animation: armor-glow 1.2s ease-in-out infinite;
}

@keyframes armor-glow {
    0%, 100% { 
        filter: drop-shadow(0 0 10px #c0c0c0) 
                drop-shadow(0 0 20px #808080)
                drop-shadow(0 0 8px #a9a9a9)
                brightness(1.1);
    }
    50% { 
        filter: drop-shadow(0 0 15px #d3d3d3) 
                drop-shadow(0 0 25px #a9a9a9)
                drop-shadow(0 0 12px #c0c0c0)
                brightness(1.2);
    }
}

/* ì „íˆ¬ ì¤‘ ê°•ì¡° íš¨ê³¼ */
.soldier.repair-buff:hover .soldier-avatar {
    filter: drop-shadow(0 0 20px #ffd700) 
            drop-shadow(0 0 30px #c0c0c0)
            drop-shadow(0 0 15px #808080)
            brightness(1.3);
}
    </style>
</head>
<body>
    <div class="container">
        <h1>WTF (Made by Unvul)</h1>
        
        <div class="setup-area">
            <div class="team-setup">
                <h2>
                    <input type="text" class="team-name-input" id="team1Name" value="ë ˆë“œíŒ€" placeholder="íŒ€ ì´ë¦„">
                    <button class="btn btn-secondary" onclick="randomTeamName('team1Name')">ëœë¤</button>
                </h2>
                
                <div style="margin-bottom: 12px; padding: 8px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                    <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 8px;">
                        <label style="font-size: 12px; font-weight: bold;">ì „ì²´ ë³‘ì‚¬:</label>
                        <input type="number" id="team1TotalCount" value="6" min="0" max="50" style="width: 50px; padding: 4px; border-radius: 5px; border: none; font-size: 12px;">
                        <button class="btn btn-primary" onclick="randomizeTeam1Config()" style="padding: 4px 8px; font-size: 11px;">ğŸ² ëœë¤</button>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <label style="font-size: 12px; font-weight: bold;">ë²”ì£¼:</label>
                        <select id="team1ThemeSelect" onchange="switchTeam1Theme()" style="flex: 1; padding: 4px; border-radius: 5px; border: none; font-size: 12px;">
                            <option value="medieval">âš”ï¸ ì¤‘ì„¸</option>
                            <option value="mythology">ğŸ›ï¸ ì‹ í™”</option>
                               <option value="future">ğŸ¤– ë¯¸ë˜</option>
                        </select>
                    </div>
                </div>
                
                <div id="team1MedievalUnits" style="display: block;">
                    <!-- ì¤‘ì„¸ ìœ ë‹›ë“¤ -->
                </div>
                
                <div id="team1MythologyUnits" style="display: none;">
                    <!-- ì‹ í™” ìœ ë‹›ë“¤ -->
                </div>
                <div id="team1FutureUnits" style="display: none;">
    <!-- ë¯¸ë˜ ìœ ë‹›ë“¤ -->
</div>
            </div>

            <div class="team-setup">
                <h2>
                    <input type="text" class="team-name-input" id="team2Name" value="ë¸”ë£¨íŒ€" placeholder="íŒ€ ì´ë¦„">
                    <button class="btn btn-secondary" onclick="randomTeamName('team2Name')">ëœë¤</button>
                </h2>
                
                <div style="margin-bottom: 12px; padding: 8px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                    <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 8px;">
                        <label style="font-size: 12px; font-weight: bold;">ì „ì²´ ë³‘ì‚¬:</label>
                        <input type="number" id="team2TotalCount" value="6" min="0" max="50" style="width: 50px; padding: 4px; border-radius: 5px; border: none; font-size: 12px;">
                        <button class="btn btn-primary" onclick="randomizeTeam2Config()" style="padding: 4px 8px; font-size: 11px;">ğŸ² ëœë¤</button>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <label style="font-size: 12px; font-weight: bold;">ë²”ì£¼:</label>
                        <select id="team2ThemeSelect" onchange="switchTeam2Theme()" style="flex: 1; padding: 4px; border-radius: 5px; border: none; font-size: 12px;">
                            <option value="medieval">âš”ï¸ ì¤‘ì„¸</option>
                            <option value="mythology">ğŸ›ï¸ ì‹ í™”</option>
                            <option value="future">ğŸ¤– ë¯¸ë˜</option>
                        </select>
                    </div>
                </div>
                
                <div id="team2MedievalUnits" style="display: block;">
                    <!-- ì¤‘ì„¸ ìœ ë‹›ë“¤ -->
                </div>
                
                <div id="team2MythologyUnits" style="display: none;">
                    <!-- ì‹ í™” ìœ ë‹›ë“¤ -->
                </div>
                <div id="team2FutureUnits" style="display: none;">
    <!-- ë¯¸ë˜ ìœ ë‹›ë“¤ -->
</div>

                
            </div>
        </div>

        <div class="battle-controls">
           <div class="battle-controls">
    <button class="btn btn-primary" onclick="startBattle()">âš”ï¸ ì „íˆ¬ ì‹œì‘</button>
    
    <button class="btn btn-secondary" onclick="resetBattle()">ğŸ”„ ì´ˆê¸°í™”</button>
       <button class="btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 10px 20px;" onclick="openUnitInfo()">ğŸ“– ìœ ë‹› ì •ë³´</button>
<button class="btn" style="background: linear-gradient(90deg, #ff6b6b, #ff4444); padding: 10px 20px; margin-left: 20px; display: none;" onclick="increaseDamage()" id="damageBtn">ğŸ’ª ê³µê²©ë ¥ +100% (100%)</button>
       <button class="btn" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); padding: 10px 20px; margin-left: 20px;" onclick="openBossMode()">ğŸ‘‘ ë³´ìŠ¤ì „</button>
</div>
        </div>

        <div class="unit-info-modal" id="unitInfoModal">
    <div class="unit-info-content">
        <div class="unit-info-header">
            <h2>âš”ï¸ ìœ ë‹› ì •ë³´</h2>
            <button class="close-modal" onclick="closeUnitInfo()">Ã—</button>
        </div>
        <div class="unit-grid" id="unitGrid"></div>
    </div>
</div>

<!-- ë³´ìŠ¤ì „ ëª¨ë‹¬ -->
<div class="unit-info-modal" id="bossModeModal">
    <div class="unit-info-content">
        <div class="unit-info-header">
            <h2 id="bossModalTitle">ğŸ‘‘ ë³´ìŠ¤ì „ - ë¼ìš´ë“œ 1</h2>
            <button class="close-modal" onclick="closeBossMode()">Ã—</button>
        </div>
        
        <div id="bossCardSelection" style="display: block;">
         <div style="text-align: center; margin-bottom: 20px;">
    <p style="font-size: 16px; margin-bottom: 10px;">ì„ íƒí•œ ìœ ë‹›: <span id="selectedCount">0</span> / 5</p>
</div>
            
            <div id="cardContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                <!-- ì¹´ë“œë“¤ì´ ì—¬ê¸° ìƒì„±ë¨ -->
            </div>
            
        
            
            <div id="selectedUnits" style="margin-top: 20px;">
                <h3 style="margin-bottom: 10px;">ì„ íƒí•œ ìœ ë‹›:</h3>
                <div id="selectedUnitsList" style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <!-- ì„ íƒëœ ìœ ë‹›ë“¤ í‘œì‹œ -->
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-primary" onclick="startBossBattle()" id="startBossBtn" disabled>âš”ï¸ ë³´ìŠ¤ì „ ì‹œì‘</button>
            </div>
        </div>
        
        <div id="bossRoundResult" style="display: none; text-align: center;">
            <h2 style="color: #4CAF50; font-size: 32px; margin-bottom: 20px;">ğŸ‰ ë¼ìš´ë“œ í´ë¦¬ì–´!</h2>
            <p style="font-size: 18px; margin-bottom: 20px;">í˜„ì¬ ë¼ìš´ë“œ: <span id="currentRound">1</span></p>
            <p style="font-size: 16px; margin-bottom: 30px;">ìœ ë‹› 1ê°œë¥¼ êµì²´í•˜ì„¸ìš”</p>
            
            <div id="replaceUnitSelection" style="margin-bottom: 20px;">
                <h3>ì œê±°í•  ìœ ë‹› ì„ íƒ:</h3>
                <div id="currentUnitsList" style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin-top: 10px;">
                    <!-- í˜„ì¬ ìœ ë‹›ë“¤ í‘œì‹œ -->
                </div>
            </div>
        </div>
    </div>
</div>

        <div class="battlefield" id="battlefield"></div>
        

        <div class="battle-log" id="battleLog"></div>
    </div>

    <script>
        const teamNames = ['ë“œë˜ê³¤íŒ€', 'í”¼ë‹‰ìŠ¤íŒ€', 'íƒ€ì´íƒ„íŒ€', 'ë ˆì „ë“œíŒ€', 'ì„í˜ë¦¬ì–¼íŒ€', 'ë¹…í† ë¦¬íŒ€', 'ì—˜ë¦¬íŠ¸íŒ€', 'ì½˜í€˜ìŠ¤íŠ¸íŒ€'];
        let battleInterval;
        let units = { team1: [], team2: [] };
        let battleActive = false;
        let isFast = false;
        // â­ ì´ ë¶€ë¶„ ì¶”ê°€
let bossMode = {
    active: false,
    round: 1,
    selectedUnits: [],
    rerollsLeft: 2,
    currentCards: [],
    maxRecord: 0
};
        const speedMultiplier = 3;
        const intervalDelayBase = 20;
        const battlefield = document.getElementById('battlefield');
        let damageMultiplier = 1.0;
        let angelCount = { team1: 0, team2: 0 };

        // ì¤‘ì„¸ ìœ ë‹› HTML ìƒì„±
  const medievalUnitsHTML = `
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ—¡ï¸ ê¸°ì‚¬</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDKnightFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDKnightFrontCount" value="2" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDKnightFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDKnightBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDKnightBackCount" value="1" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDKnightBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDKnightSpecial" value="25" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ¹ ê¶ìˆ˜</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDArcherFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDArcherFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDArcherFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDArcherBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDArcherBackCount" value="2" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDArcherBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDArcherSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ¦ ìƒˆì¡ì´</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDSnowmanFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDSnowmanFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDSnowmanFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDSnowmanBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDSnowmanBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDSnowmanBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDSnowmanSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ›¡ï¸ ì‰´ë”</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDShielderFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDShielderFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDShielderFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDShielderBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDShielderBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDShielderBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDShielderSpecial" value="0" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ’Š íëŸ¬</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDHealerFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDHealerFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDHealerFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDHealerBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDHealerBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDHealerBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDHealerSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ”¨ í•´ë¨¸ë§¨</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDHammermanFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDHammermanFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDHammermanFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDHammermanBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDHammermanBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDHammermanBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDHammermanSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ’£ í­íƒ„ë³‘</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDBombermanFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDBombermanFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDBombermanFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDBombermanBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDBombermanBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDBombermanBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDBombermanSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ¥· ë‹Œì</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDNinjaFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDNinjaFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDNinjaFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDNinjaBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDNinjaBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDNinjaBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDNinjaSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ›– ë™êµ´</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDCaveFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDCaveFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDCaveFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDCaveBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDCaveBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDCaveBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì†Œí™˜</label>
                <select id="TEAM_IDCaveSpawnType" style="padding: 4px; border-radius: 5px; border: none; font-size: 11px;">
                    <option value="knight">ğŸ—¡ï¸ ê¸°ì‚¬</option>
                    <option value="archer">ğŸ¹ ê¶ìˆ˜</option>
                    <option value="snowman">ğŸ¦ ìƒˆì¡ì´</option>
                    <option value="golem">ğŸ—¿ ê³¨ë ˜</option>
                    <option value="shielder">ğŸ›¡ï¸ ì‰´ë”</option>
                    <option value="healer">ğŸ’Š íëŸ¬</option>
                    <option value="bomberman">ğŸ’£ í­íƒ„ë³‘</option>
                    <option value="hammerman">ğŸ”¨ í•´ë¨¸ë§¨</option>
                    <option value="ninja">ğŸ¥· ë‹Œì</option>
                </select>
            </div>
        </div>
    </div>
`;

      const mythologyUnitsHTML = `
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ‘¹ ì˜¤í¬</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDOrcFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDOrcFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDOrcFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDOrcBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDOrcBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDOrcBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDOrcSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
    <div class="unit-header"><strong>â˜ï¸ êµ¬ë¦„</strong></div>
    <div class="unit-controls">
        <div class="control-group">
            <label>ì „ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDCloudFrontCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDCloudFrontCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDCloudFrontCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group">
            <label>í›„ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDCloudBackCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDCloudBackCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDCloudBackCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDCloudSpecial" value="20" min="0" max="100"></div>
    </div>
</div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ‘¼ ì²œì‚¬</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDAngelFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDAngelFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDAngelFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDAngelBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDAngelBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDAngelBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDAngelSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ˜ˆ ì‚¬íƒ„</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDSatanFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDSatanFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDSatanFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDSatanBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDSatanBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDSatanBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDSatanSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ—¿ ê³¨ë ˜</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDGolemFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDGolemFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDGolemFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDGolemBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDGolemBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDGolemBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDGolemSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ¦„ ìœ ë‹ˆì½˜</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDUnicornFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDUnicornFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDUnicornFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDUnicornBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDUnicornBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDUnicornBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDUnicornSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
    <div class="unit-header"><strong>âœ¨ ì •ë ¹</strong></div>
    <div class="unit-controls">
        <div class="control-group">
            <label>ì „ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDSpiritFrontCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDSpiritFrontCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDSpiritFrontCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group">
            <label>í›„ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDSpiritBackCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDSpiritBackCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDSpiritBackCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDSpiritSpecial" value="20" min="0" max="100"></div>
    </div>
</div>
<div class="unit-config">
    <div class="unit-header"><strong>ğŸŒ³ ì‹ ë¹„í•œ ë‚˜ë¬´</strong></div>
    <div class="unit-controls">
        <div class="control-group">
            <label>ì „ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDTreeFrontCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDTreeFrontCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDTreeFrontCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group">
            <label>í›„ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDTreeBackCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDTreeBackCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDTreeBackCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDTreeSpecial" value="0" min="0" max="100"></div>
    </div>
</div>
<div class="unit-config">
    <div class="unit-header"><strong>ğŸ ë…ì‚¬</strong></div>
    <div class="unit-controls">
        <div class="control-group">
            <label>ì „ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDPyramidFrontCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDPyramidFrontCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDPyramidFrontCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group">
            <label>í›„ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDPyramidBackCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDPyramidBackCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDPyramidBackCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDPyramidSpecial" value="0" min="0" max="100"></div>
    </div>
</div>

`;

const futureUnitsHTML = `
    <div class="unit-config">
        <div class="unit-header"><strong>ğŸ¤– ê¼¬ë§ˆë¡œë´‡</strong></div>
        <div class="unit-controls">
            <div class="control-group">
                <label>ì „ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDTinyRobotFrontCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDTinyRobotFrontCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDTinyRobotFrontCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group">
                <label>í›„ë°©</label>
                <div class="count-control">
                    <button class="count-btn" onclick="changeCount('TEAM_IDTinyRobotBackCount', -1)">-</button>
                    <input type="number" class="count-input" id="TEAM_IDTinyRobotBackCount" value="0" min="0" max="10">
                    <button class="count-btn" onclick="changeCount('TEAM_IDTinyRobotBackCount', 1)">+</button>
                </div>
            </div>
            <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDTinyRobotSpecial" value="20" min="0" max="100"></div>
        </div>
    </div>
    <div class="unit-config">
    <div class="unit-header"><strong>ğŸš ë¯¸ë‹ˆ í—¬ë¦¬ì½¥í„°</strong></div>
    <div class="unit-controls">
        <div class="control-group">
            <label>ì „ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDMiniHelicopterFrontCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDMiniHelicopterFrontCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDMiniHelicopterFrontCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group">
            <label>í›„ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDMiniHelicopterBackCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDMiniHelicopterBackCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDMiniHelicopterBackCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDMiniHelicopterSpecial" value="20" min="0" max="100"></div>
    </div>
</div>
<div class="unit-config">
    <div class="unit-header"><strong>âš™ï¸ ì‚´ì¸ ê¸°ì–´</strong></div>
    <div class="unit-controls">
        <div class="control-group">
            <label>ì „ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDKillerGearFrontCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDKillerGearFrontCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDKillerGearFrontCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group">
            <label>í›„ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDKillerGearBackCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDKillerGearBackCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDKillerGearBackCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDKillerGearSpecial" value="20" min="0" max="100"></div>
    </div>
</div>
<div class="unit-config">
    <div class="unit-header"><strong>ğŸ§° ìµœì²¨ë‹¨ ì •ë¹„ì†Œ</strong></div>
    <div class="unit-controls">
        <div class="control-group">
            <label>ì „ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDAdvancedRepairShopFrontCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDAdvancedRepairShopFrontCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDAdvancedRepairShopFrontCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group">
            <label>í›„ë°©</label>
            <div class="count-control">
                <button class="count-btn" onclick="changeCount('TEAM_IDAdvancedRepairShopBackCount', -1)">-</button>
                <input type="number" class="count-input" id="TEAM_IDAdvancedRepairShopBackCount" value="0" min="0" max="10">
                <button class="count-btn" onclick="changeCount('TEAM_IDAdvancedRepairShopBackCount', 1)">+</button>
            </div>
        </div>
        <div class="control-group"><label>ì¹˜ëª…(%)</label><input type="number" id="TEAM_IDAdvancedRepairShopSpecial" value="0" min="0" max="100"></div>
    </div>
</div>
`;



        // ì´ˆê¸°í™”
        document.getElementById('team1MedievalUnits').innerHTML = medievalUnitsHTML.replace(/TEAM_ID/g, 'team1');
        document.getElementById('team1MythologyUnits').innerHTML = mythologyUnitsHTML.replace(/TEAM_ID/g, 'team1');
        document.getElementById('team2MedievalUnits').innerHTML = medievalUnitsHTML.replace(/TEAM_ID/g, 'team2');
        document.getElementById('team2MythologyUnits').innerHTML = mythologyUnitsHTML.replace(/TEAM_ID/g, 'team2');
        document.getElementById('team1FutureUnits').innerHTML = futureUnitsHTML.replace(/TEAM_ID/g, 'team1');
document.getElementById('team2FutureUnits').innerHTML = futureUnitsHTML.replace(/TEAM_ID/g, 'team2');

       function switchTeam1Theme() {
    const theme = document.getElementById('team1ThemeSelect').value;
    if (theme === 'medieval') {
        document.getElementById('team1MedievalUnits').style.display = 'block';
        document.getElementById('team1MythologyUnits').style.display = 'none';
        document.getElementById('team1FutureUnits').style.display = 'none';
    } else if (theme === 'mythology') {
        document.getElementById('team1MedievalUnits').style.display = 'none';
        document.getElementById('team1MythologyUnits').style.display = 'block';
        document.getElementById('team1FutureUnits').style.display = 'none';
    } else {
        document.getElementById('team1MedievalUnits').style.display = 'none';
        document.getElementById('team1MythologyUnits').style.display = 'none';
        document.getElementById('team1FutureUnits').style.display = 'block';
    }
}

        function switchTeam2Theme() {
            const theme = document.getElementById('team2ThemeSelect').value;
            if (theme === 'medieval') {
                document.getElementById('team2MedievalUnits').style.display = 'block';
                document.getElementById('team2MythologyUnits').style.display = 'none';
                document.getElementById('team2FutureUnits').style.display = 'none';
            } else if (theme === 'mythology') {
                document.getElementById('team2MedievalUnits').style.display = 'none';
                document.getElementById('team2MythologyUnits').style.display = 'block';
                document.getElementById('team2FutureUnits').style.display = 'none';
            } else {
                document.getElementById('team2MedievalUnits').style.display = 'none';
                document.getElementById('team2MythologyUnits').style.display = 'none';
                document.getElementById('team2FutureUnits').style.display = 'block';}
            
        }

        function setBattleInterval() {
            clearInterval(battleInterval);
            const delay = Math.max(1, Math.floor(intervalDelayBase / (isFast ? speedMultiplier : 1)));
            battleInterval = setInterval(battleLoop, delay);
        }

        function toggleFast() {
            const now = Date.now();
            isFast = !isFast;
            [units.team1, units.team2].flat().forEach(u => {
                ['nextAttackTime','nextHealTime','nextShieldTime','shieldEndTime'].forEach(key => {
                    if (!u[key]) return;
                    const remaining = u[key] - now;
                    if (remaining <= 0) return;
                    if (isFast) {
                        u[key] = now + Math.floor(remaining / speedMultiplier);
                    } else {
                        u[key] = now + Math.floor(remaining * speedMultiplier);
                    }
                });
            });
            setBattleInterval();
            const btn = document.getElementById('fastBtn');
            if (btn) btn.textContent = isFast ? 'â© ë¹ ë¥´ê²Œ(ON)' : 'â© ë¹ ë¥´ê²Œ';
        }

        function randomTeamName(inputId) {
            const name = teamNames[Math.floor(Math.random() * teamNames.length)];
            document.getElementById(inputId).value = name;
        }

        function changeCount(inputId, delta) {
    const input = document.getElementById(inputId);
    if (!input) return;
    
    const currentValue = parseInt(input.value) || 0;
    const min = parseInt(input.min) || 0;
    const max = parseInt(input.max) || 999;
    
    const newValue = Math.max(min, Math.min(max, currentValue + delta));
    input.value = newValue;
}

        function increaseDamage() {
            if (!battleActive) {
                alert('ì „íˆ¬ ì¤‘ì—ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                return;
            }
            
            if (damageMultiplier >= 5.0) {
                alert('ìµœëŒ€ ê³µê²©ë ¥ ì¦ê°€ ë°°ìˆ˜(500%)ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤.');
                return;
            }
            
            damageMultiplier += 1.0;
            
            const percent = Math.round((damageMultiplier - 1.0) * 100);
            document.getElementById('damageBtn').textContent = `ğŸ’ª ê³µê²©ë ¥ +100% (${percent}%)`;
            
            addLog(`ğŸ’ª ì „ì²´ ë³‘ì‚¬ì˜ ê³µê²©ë ¥ì´ ${percent}% ì¦ê°€í–ˆìŠµë‹ˆë‹¤! (ì´ ${Math.round(damageMultiplier * 100)}% ì ìš©)`, true);
        }
const unitDescriptions = {
 
    knight: {
        icon: 'ğŸ—¡ï¸',
        name: 'ê¸°ì‚¬',
        theme: 'ì¤‘ì„¸',
        stats: 'HP: 130 | ê³µê²©: 20 | ì†ë„: 2\nê³µê²©ì†ë„: 3ì´ˆ | ì‚¬ê±°ë¦¬: 80',
        ability: 'ê·¼ì ‘ ì „íˆ¬ì˜ ê¸°ë³¸ ìœ ë‹›. ë¹ ë¥¸ ì´ë™ì†ë„ë¡œ ì ì—ê²Œ ëŒì§„í•©ë‹ˆë‹¤.',
        story: '"ëª…ì˜ˆë¥¼ ìœ„í•´!" ì™•êµ­ ìµœê³ ì˜ ê²€ìˆ  í•™êµë¥¼ ì¡¸ì—…í•œ ì‹ ì°¸ ê¸°ì‚¬. ë§¤ì¼ ì•„ì¹¨ ê°‘ì˜·ì„ ë‹¦ìœ¼ë©° ì˜ì›…ì„ ê¿ˆê¾¼ë‹¤. ì„ ë°° ê¸°ì‚¬ë“¤ì€ ê·¸ì˜ ì—´ì •ì„ ë³´ë©° "ì € ë†ˆ 3ê°œì›” ì•ˆì— í˜„ì‹¤ ì•Œê² ì§€" ë¼ê³  ìˆ˜êµ°ëŒ„ë‹¤. ì‹¤ì œë¡œ ì²« ì „íˆ¬ì—ì„œ ì§„í™íƒ•ì— ë¹ ì ¸ ê°‘ì˜·ì´ ë…¹ìŠ¬ì—ˆê³ , ê·¸ë‚  ë°¤ 4ì‹œê°„ ë™ì•ˆ ë‹¦ì•˜ë‹¤. ê·¸ë˜ë„ í¬ê¸°í•˜ì§€ ì•ŠëŠ” ëˆê¸° í•˜ë‚˜ëŠ” ì¸ì •ë°›ëŠ”ë‹¤. ê¿ˆì€ "ë“œë˜ê³¤ í† ë²Œ" ì´ì§€ë§Œ ë‹¤ë¥¸ ìœ ë‹›ê³¼ ë°¸ëŸ°ìŠ¤ ì°¨ì´ê°€ ì‹¬í•´ ì•ˆíƒ€ê¹ë‹¤.'
    },
    archer: {
        icon: 'ğŸ¹',
        name: 'ê¶ìˆ˜',
        theme: 'ì¤‘ì„¸',
        stats: 'HP: 80 | ê³µê²©: 25 | ì†ë„: 1.7\nê³µê²©ì†ë„: 4.6ì´ˆ | ì‚¬ê±°ë¦¬: 400',
        ability: 'ì›ê±°ë¦¬ ê³µê²© ìœ ë‹›. ë©€ë¦¬ì„œ ì•ˆì „í•˜ê²Œ ì ì„ ê³µê²©í•©ë‹ˆë‹¤.',
        story: 'í•œë•Œ ì‚¬ëƒ¥ê¾¼ì´ì—ˆìœ¼ë‚˜ ê³°ì—ê²Œ ì«“ê²¨ ë‚˜ë¬´ ìœ„ë¡œ ë„ë§ì¹œ í›„ "ë©€ë¦¬ì„œ ì˜ë©´ ë°˜ê²© ì•ˆ ë‹¹í•œë‹¤"ëŠ” ì¸ìƒì˜ ì§„ë¦¬ë¥¼ ê¹¨ë‹¬ì•˜ë‹¤. ê·¸ë‚  ì´í›„ ê·¼ì ‘ì „ì„ ê·¹ë„ë¡œ í˜ì˜¤í•œë‹¤. ë™ë£Œë“¤ì´ "ê²ìŸì´ ì•„ë‹ˆëƒ"ê³  ë†€ë¦¬ë©´ "ì „ëµì  í›„í‡´"ë¼ê³  ìš°ê¸´ë‹¤. ì‹¤ì œë¡œ ì‚¬ê±°ë¦¬ 400mëŠ” ë¶€ëŒ€ ìµœê³  ê¸°ë¡ì´ì§€ë§Œ, ì •ì‘ ë³¸ì¸ì€ "500m ê°€ëŠ¥í•œë° í™œì´ êµ¬ë ¤ì„œ ì•ˆ ëœë‹¤"ë©° ë¬´ê¸° íƒ“ì„ í•œë‹¤..'
    },
    snowman: {
        icon: 'ğŸ¦',
        name: 'ìƒˆì¡ì´',
        theme: 'ì¤‘ì„¸',
        stats: 'HP: 50 | ê³µê²©: 10 | ì†ë„: 1\nê³µê²©ì†ë„: 2ì´ˆ | ì‚¬ê±°ë¦¬: 650',
        ability: 'ì´ˆì¥ê±°ë¦¬ ì €ê²© ìœ ë‹›. ë§¤ìš° ë¨¼ ê±°ë¦¬ì—ì„œ ê³µê²©í•˜ì§€ë§Œ ì•½í•©ë‹ˆë‹¤.',
        story: 'ì›ë˜ ë§ˆì„ì—ì„œ ë†ì‘ë¬¼ ë¨¹ëŠ” ìƒˆë§Œ ì«“ë˜ í‰ë²”í•œ ë†ë¶€ì˜€ë‹¤. ê·¸ëŸ°ë° ì–´ëŠ ë‚  650m ë°– ê¹Œë§ˆê·€ë¥¼ ë§ì¶°ë²„ë¦¬ëŠ” ê¸°ì ì„ ì¼ìœ¼ì¼°ê³ , ì†Œë¬¸ì„ ë“¤ì€ ì¥êµ°ì´ ê°•ì œ ì§•ì§‘í–ˆë‹¤. "ë‚˜ ì „ìŸ ëª»í•´ìš”... ìƒˆë§Œ ì¡ëŠ”ë°..." ë¼ë©° ìš¸ë¶€ì§–ì—ˆì§€ë§Œ ì†Œìš©ì—†ì—ˆë‹¤. ì „ìŸí„°ì—ì„œë„ ì—¬ì „íˆ "ì™œ ë‚´ê°€ ì—¬ê¸° ìˆì§€?" í•˜ë©° ë©˜ë¶• ì¤‘ì´ë‹¤. 650m ì €ê²© ì‹¤ë ¥ì€ ì§„ì§œì§€ë§Œ HP 50ì´ë¼ ë°”ëŒë§Œ ë¶ˆì–´ë„ ì“°ëŸ¬ì§ˆ ê²ƒ ê°™ë‹¤. ì „ìš°ë“¤ì€ ê·¸ë¥¼ "ìœ ë¦¬ëŒ€í¬"ë¼ê³  ë¶€ë¥´ë©° ë’¤ì—ì„œ ë³´í˜¸í•´ì¤€ë‹¤. ê¿ˆì€ ê³ í–¥ ëŒì•„ê°€ì„œ í…ƒë°­ ê°€ê¾¸ê¸°.'
    },
    shielder: {
        icon: 'ğŸ›¡ï¸',
        name: 'ì‰´ë”',
        theme: 'ì¤‘ì„¸',
        stats: 'HP: 175 | ê³µê²©: 15 | ì†ë„: 0.8\nê³µê²©ì†ë„: 3ì´ˆ | ì‚¬ê±°ë¦¬: 60',
        ability: '6ì´ˆë§ˆë‹¤ 2ì´ˆê°„ ë¬´ì  ìƒíƒœê°€ ë©ë‹ˆë‹¤. ë†’ì€ ì²´ë ¥ì˜ íƒ±ì»¤ ìœ ë‹›.',
        story: 'ì–´ë¦´ ì  í™”ì‚´ì— ë§ì•„ íŠ¸ë¼ìš°ë§ˆê°€ ìƒê¸´ í›„, ë°©íŒ¨ì— ì§‘ì°©í•˜ê²Œ ë˜ì—ˆë‹¤. "ê³µê²©ì€ ìµœì„ ì˜ ë°©ì–´? í‹€ë ¸ì–´. ë°©ì–´ê°€ ìµœì„ ì˜ ë°©ì–´ì•¼!" ê°€ ì…ë²„ë¦‡ì´ë‹¤. ì‹¬ì§€ì–´ ì ì˜ ë•Œë„ ë°©íŒ¨ë¥¼ ì•ˆê³  ì”ë‹¤. ë™ë£Œë“¤ì´ "ê·¸ë ‡ê²Œ ì‚´ë©´ ì¬ë¯¸ì—†ì§€ ì•Šì•„?" ë¼ê³  ë¬¼ìœ¼ë©´ "ì•ˆ ì£½ëŠ” ê²Œ ì œì¼ ì¬ë°Œì–´" ë¼ê³  ë‹µí•œë‹¤. 6ì´ˆë§ˆë‹¤ ì˜¤ëŠ” ë¬´ì  íƒ€ì´ë°ì„ ë„ˆë¬´ ìë‘í•´ì„œ ì ë“¤ë„ ì´ì œ ì•Œê³  í”¼í•œë‹¤. ê·¸ëŸ¬ë©´ "ì–´? ì™œ ì•ˆ ë•Œë ¤?" í•˜ë©° ë‹¹í™©í•˜ëŠ” ëª¨ìŠµì´ í¬ì¸íŠ¸. í›ˆë ¨ì†Œ ë³„ëª…ì€ "ì‚´ì•„ìˆëŠ” ê±°ë¶ì´". ëŠë¦¬ì§€ë§Œ ì•ˆ ì£½ëŠ”ë‹¤.'
    },
    healer: {
        icon: 'ğŸ’Š',
        name: 'íëŸ¬',
        theme: 'ì¤‘ì„¸',
        stats: 'HP: 120 | ê³µê²©: X | ì†ë„: 1\níšŒë³µ ì£¼ê¸°: 4ì´ˆ\nì‚¬ê±°ë¦¬: 150',
        ability: '4ì´ˆë§ˆë‹¤ ì•„êµ° ì „ì²´ë¥¼ ìµœëŒ€ HPì˜ 20% íšŒë³µí•©ë‹ˆë‹¤. (ì‹ í™” ìœ ë‹›ì€ 2%ë§Œ íšŒë³µ) (ë‹¨, íëŸ¬ëŠ” 4ëª…ì´ìƒ ë°°ì¹˜í•  ì‹œ 4ë²ˆì§¸ ì´ìƒë¶€í„° íšŒë³µ ë¶ˆê°€.)',
        story: 'ì˜ëŒ€ 3í•™ë…„ ë•Œ "ì´ê±° ë‚´ ê¸¸ì´ ì•„ë‹Œ ê²ƒ ê°™ì€ë°..." í•˜ê³  ì¤‘í‡´í•œ í›„ ì•½ì´ˆë‚˜ ìºë©° ì‚´ì•˜ë‹¤. ì™•ì‹¤ ì•½ì‚¬ ìê²©ì¦ì€ ìˆì§€ë§Œ ì‹¤ë ¥ì€ ì• ë§¤í•˜ë‹¤. "ì‹¸ìš°ì§€ ë§ê³  ì•½ ë¨¹ì–´~" ê°€ ì§€ë¡ ì´ì§€ë§Œ ì •ì‘ ë³¸ì¸ì€ ì•½ì´ˆ êµ¬ë³„ë„ í—·ê°ˆë¦°ë‹¤. í•œ ë²ˆì€ ìˆ˜ë©´ì œë¥¼ ê°ì„±ì œë¡œ ì°©ê°í•´ì„œ ë¶€ëŒ€ ì „ì²´ê°€ ì ë“¤ì–´ë²„ë¦° ì‚¬ê±´ë„ ìˆì—ˆë‹¤. ê·¸ë˜ë„ íì€ ë˜ë‹ˆê¹Œ í•„ìš”ì•…ìœ¼ë¡œ ì¸ì •ë°›ëŠ”ë‹¤. ë¬¸ì œëŠ” 4ëª… ì´ìƒ ëª¨ì´ë©´ íëŸ¬ë“¤ë¼ë¦¬ "ë‚´ê°€ ë” ì˜í•´", "ë„ˆ ì•½ì´ˆ ê°€ì§œ ì“°ì§€?" í•˜ë©° ì‹¸ì›Œì„œ ì¼ì„ ì•ˆ í•œë‹¤ëŠ” ê²ƒ. ì™•êµ­ì—ì„œëŠ” íëŸ¬ 3ëª…ê¹Œì§€ë§Œ ë°°ì¹˜í•˜ë¼ëŠ” ë‚´ë¶€ ì§€ì¹¨ì´ ìˆë‹¤.'
    },
    hammerman: {
        icon: 'ğŸ”¨',
        name: 'í•´ë¨¸ë§¨',
        theme: 'ì¤‘ì„¸',
        stats: 'HP: 200 | ê³µê²©: 10 | ì†ë„: 1.5\nê³µê²©ì†ë„: 2.2ì´ˆ | ì‚¬ê±°ë¦¬: 80',
        ability: 'ê³µê²© ì‹œ ì£¼ë³€ ì ì—ê²Œ 50% ìŠ¤í”Œë˜ì‹œ ë°ë¯¸ì§€ë¥¼ ì£¼ê³ , ì ì„ 120px ë„‰ë°±ì‹œí‚µë‹ˆë‹¤.',
        story: 'ëŒ€ëŒ€ë¡œ ë‚´ë ¤ì˜¤ëŠ” ëŒ€ì¥ê°„ ì§‘ì•ˆ ì¶œì‹ . í• ì•„ë²„ì§€ê°€ "ë§ì¹˜ë¡œ ë•Œë¦¬ë©´ ë‹¤ í•´ê²°ëœë‹¤"ëŠ” ê°€ë¥´ì¹¨ì„ ë¬¼ë ¤ë°›ì•˜ê³ , ì§„ì§œë¡œ ê·¸ë ‡ê²Œ ì‚°ë‹¤. ê³ ì¥ë‚œ ë§ˆì°¨? ë§ì¹˜ë¡œ ë•Œë¦¼. ë§ ì•ˆ ë“£ëŠ” ë¶€í•˜? ë§ì¹˜ë¡œ í˜‘ë°•. ì êµ°? ë‹¹ì—°íˆ ë§ì¹˜ë¡œ ë‚ ë ¤ë²„ë¦¼. 120m ë„‰ë°±ì€ ë¶€ëŒ€ ë‚´ ìµœê³  ê¸°ë¡ì´ë©°, ë™ë£Œë“¤ì€ "ì € í˜•ì€ ë¬¼ë¦¬ë²•ì¹™ì„ ë¬´ì‹œí•œë‹¤" ê³  ë§í•œë‹¤. í•œ ë²ˆì€ ìš©ë³‘ ë©´ì ‘ì—ì„œ "íŠ¹ê¸°ê°€ ë­ëƒ" ëŠ” ì§ˆë¬¸ì— "ì‚¬ëŒ ë‚ ë¦¬ê¸°ìš”" ë¼ê³  ë‹µí•´ì„œ ë©´ì ‘ê´€ì„ ë‹¹í™©ì‹œì¼°ë‹¤. ì·¨ë¯¸ëŠ” ë§ì¹˜ ì†ì§ˆì´ê³ , ê¿ˆì€ "ì „ì„¤ì˜ ë§ì¹˜" ë§Œë“¤ê¸°. ê·¸ëŸ¬ë‚˜ ëŒ€ì¥ê°„ ê¸°ìˆ ì€ í• ì•„ë²„ì§€ì˜ 1/10 ìˆ˜ì¤€ì´ë¼ ì•„ì§ ë©€ì—ˆë‹¤.'
    },
    bomberman: {
        icon: 'ğŸ’£',
        name: 'í­íƒ„ë³‘',
        theme: 'ì¤‘ì„¸',
        stats: 'HP: 100 | ê³µê²©: 30 | ì†ë„: 2.2\nê³µê²©ì†ë„: 4ì´ˆ | ì‚¬ê±°ë¦¬: 100',
        ability: 'í­íƒ„ì„ ì„¤ì¹˜í•˜ì—¬ 3ì´ˆ í›„ í­ë°œ. ì£¼ë³€ 340 ë²”ìœ„ì— ìŠ¤í”Œë˜ì‹œ. ìì‹ ë„ 25 ë°ë¯¸ì§€ë¥¼ ë°›ìŠµë‹ˆë‹¤.',
        story: 'í­ë°œë¬¼ ì „ë¬¸ê°€... ì˜€ëŠ”ë° ì‹¤ìˆ˜ê°€ ë„ˆë¬´ ì¦ë‹¤. ì§€ê¸ˆê¹Œì§€ ìí­ íšŸìˆ˜ 73ë²ˆ, ë™ë£Œ ì˜¤í­ 18ë²ˆ, ì•„êµ° ì§„ì˜ í­íŒŒ 2ë²ˆì˜ í™”ë ¤í•œ ê¸°ë¡ ë³´ìœ . "ì´ë²ˆì—” ì•ˆ ë‹¤ì¹  ê±°ì•¼!" ë¼ê³  ë§¤ë²ˆ ë§í•˜ì§€ë§Œ ë§¤ë²ˆ 25 ë°ë¯¸ì§€ë¥¼ ë°›ëŠ”ë‹¤. ê·¸ë˜ì„œ ë³„ëª…ì´ "ìí­ í…ŒëŸ¬ë²”". í•œ ë²ˆì€ í­íƒ„ ì„¤ì¹˜ í›„ ë„ë§ê°€ë‹¤ê°€ ìê¸°ê°€ íŒ êµ¬ë©ì´ì— ë¹ ì ¸ì„œ í­ë°œì— íœ˜ë§ë ¸ê³ , ë™ë£Œë“¤ì€ "ì € ì¸ê°„ ì½”ë¯¸ë”” í”„ë¡œê·¸ë¨ ë‚˜ê°€ì•¼ í•˜ëŠ” ê±° ì•„ë‹ˆëƒ" ê³  í–ˆë‹¤. ê·¸ëŸ¼ì—ë„ ì‚´ì•„ìˆëŠ” ì´ìœ ëŠ” HP 100ì´ ìƒê°ë³´ë‹¤ íŠ¼íŠ¼í•´ì„œ. ë³¸ì¸ ë§ë¡œëŠ” "ë‚˜ ì´ì œ ìµìˆ™í•´ì¡Œì–´, 25 ë°ë¯¸ì§€ ì •ë„ëŠ” ê°„ì§€ëŸ¬ì›Œ" ë¼ê³  í•œë‹¤. ê±°ì§“ë§ì´ë‹¤. ë§¤ë²ˆ ì•„í”„ë‹¤ê³  ìš´ë‹¤.'
    },
    ninja: {
        icon: 'ğŸ¥·',
        name: 'ë‹Œì',
        theme: 'ì¤‘ì„¸',
        stats: 'HP: 110 | ê³µê²©: 5â†’20 | ì†ë„: 3\nê³µê²©ì†ë„: 0.8ì´ˆâ†’4.2ì´ˆ | ì‚¬ê±°ë¦¬: 120â†’450',
        ability: 'ì‚¬ë§ ì‹œ 1íšŒ í›„í‡´í•˜ì—¬ ì›ê±°ë¦¬ ëª¨ë“œë¡œ ì „í™˜. HP 70 íšŒë³µ, ì‚¬ê±°ë¦¬ì™€ ê³µê²©ë ¥ ì¦ê°€.',
        story: 'ë™ì–‘ ì–´ë”˜ê°€ì—ì„œ ì˜¨ ì •ì²´ë¶ˆëª…ì˜ ë‹Œì. ì£½ëŠ” ì²™ í›„í‡´í•´ì„œ í™œ êº¼ë‚´ëŠ” "ë¹„ê²í•œ... ì•„ë‹ˆ, ì „ëµì ì¸" ì „ìˆ ì„ ì“´ë‹¤. ì²˜ìŒì—” ë™ë£Œë“¤ì´ "ì™€ ì£½ì—ˆë„¤... ì–´? ì‚´ì•˜ë„¤?" í•˜ë©° ë‹¹í™©í–ˆì§€ë§Œ, ì´ì œëŠ” "ë˜ ì£½ëŠ” ì²™ í•˜ë„¤ ã…‹ã…‹" í•˜ë©° ìµìˆ™í•´ì¡Œë‹¤. ë³¸ì¸ì€ "ê³„íšëŒ€ë¡œ ëì–´" ë¼ë©° ì¿¨í•œ ì²™ í•˜ì§€ë§Œ, ì‚¬ì‹¤ ì§„ì§œ ì£½ì„ ë»”í•´ì„œ ì‹ì€ë•€ í˜ë ¸ë‹¤ëŠ” ê²Œ ë¹„ë°€. ê·¼ì ‘ ê³µê²©ë ¥ 5ëŠ” ë¶€ëŒ€ ìµœì•½ì²´ ìˆ˜ì¤€ì´ë¼ "ë„ˆ ê·¸ëƒ¥ ë„ë§ê°€ëŠ” ê²Œ ì „ëµ ì•„ë‹ˆëƒ?" ëŠ” ë†€ë¦¼ì„ ë°›ëŠ”ë‹¤. ê·¸ëŸ¬ë‚˜ í›„í‡´ í›„ ì›ê±°ë¦¬ ê³µê²©ë ¥ 20ê³¼ ì‚¬ê±°ë¦¬ 450ì€ ì§„ì§œ ìœ„í˜‘ì ì´ë‹¤. ì·¨ë¯¸ëŠ” ì—°ë§‰íƒ„ í„°ëœ¨ë¦¬ê³  "ë‹ŒìëŠ” ì–´ë‘  ì†ì— ì‚°ë‹¤" ë¼ë©° í¼ ì¡ê¸°. ì‹¤ì œë¡œëŠ” ì–´ë‘  ë¬´ì„œì›Œí•œë‹¤.'
    },
    cave: {
        icon: 'ğŸ›–',
        name: 'ìœ ë‹› ë™êµ´',
        theme: 'ì¤‘ì„¸',
        stats: 'HP: 255 | ê³µê²©: 5 | ì†ë„: 0.1\nê³µê²©ì†ë„: 11ì´ˆ | ì‚¬ê±°ë¦¬: 660',
        ability: '6ì´ˆ í›„ ì²« ì†Œí™˜, ì´í›„ 12ì´ˆë§ˆë‹¤ ì„ íƒí•œ ìœ ë‹› ì†Œí™˜ (HP 50 ì†Œëª¨). ì²œì²œíˆ ì›€ì§ì…ë‹ˆë‹¤. (ë‹¨, ë™êµ´ì€ ì²´ë ¥ íšŒë³µ ë¶ˆê°€.) (ë‹¨, ì²´ë ¥ì´ 50 ì´í•˜ì¼ ê²½ìš° ì†Œí™˜ ë¶ˆê°€.)',
        story: 'ì‚´ì•„ìˆëŠ” ë˜ì „. ì •í™•íˆ ì–´ë–»ê²Œ ìƒê²¨ë‚¬ëŠ”ì§€ëŠ” ì•„ë¬´ë„ ëª¨ë¥¸ë‹¤. ê³ ëŒ€ ë§ˆë²•ì‚¬ê°€ ì‹¤í—˜í•˜ë‹¤ê°€ ë§Œë“¤ì–´ì¡Œë‹¤ëŠ” ì„¤, ìì—°ì ìœ¼ë¡œ ë§ˆë‚˜ê°€ ì‘ì¶•ë˜ì–´ íƒ„ìƒí–ˆë‹¤ëŠ” ì„¤, ê·¸ëƒ¥ ëŒì´ ì‹¬ì‹¬í•´ì„œ ìœ ë‹›ì„ ë§Œë“¤ê¸° ì‹œì‘í–ˆë‹¤ëŠ” í™©ë‹¹í•œ ì„¤ê¹Œì§€ ë‹¤ì–‘í•˜ë‹¤. ì•ˆì—ì„œ ê³„ì† ë³‘ì‚¬ê°€ ë‚˜ì˜¤ëŠ” ì›ë¦¬ëŠ” ë¯¸ìŠ¤í„°ë¦¬ì§€ë§Œ, íëŸ¬ë“¤ì´ íšŒë³µ ì‹œë„í•´ë´ë„ "ë‚˜ ëŒì´ë¼ì„œ íšŒë³µ ì•ˆ ë¼" ë¼ë©° ë¬´ì‹œí•œë‹¤. HP 255ì˜ ë¹„ë°€ì€ ë‹¨ìˆœíˆ "ëŒë©ì´ë¼ íŠ¼íŠ¼í•¨". ì´ë™ì†ë„ 0.1ë¡œ ì„¸ìƒì—ì„œ ì œì¼ ëŠë¦¬ì§€ë§Œ ì‹ ê²½ ì•ˆ ì“´ë‹¤. ì˜¤íˆë ¤ "ë‚œ ì›€ì§ì´ê¸° ì‹«ì–´ì„œ ë³‘ì‚¬ ë½‘ëŠ” ê±°ì•¼" ë¼ëŠ” ë§ˆì¸ë“œ. 12ì´ˆë§ˆë‹¤ HP 50ì”© ì†Œëª¨í•˜ë©° ë³‘ì‚¬ë¥¼ ë§Œë“œëŠ”ë°, ë³¸ì¸ì€ "ì´ê±° ë‹¤ì´ì–´íŠ¸ì•¼" ë¼ê³  ìš°ê¸´ë‹¤.'
    },
    orc: {
        icon: 'ğŸ‘¹',
        name: 'ì˜¤í¬',
        theme: 'ì‹ í™”',
        stats: 'HP: 110 | ê³µê²©: 20 | ì†ë„: 2.5\nê³µê²©ì†ë„: 2.5ì´ˆ | ì‚¬ê±°ë¦¬: 120',
        ability: 'ë¹ ë¥¸ ê³µê²©ì†ë„ì˜ ê·¼ì ‘ ì „íˆ¬ ìœ ë‹›. ê¸°ì‚¬ë³´ë‹¤ ë¹ ë¦…ë‹ˆë‹¤.',
        story: '"ë¹ ë¥´ê³  ê°•í•˜ë‹¤!" ë§¤ì¼ ê·¼ìœ¡ìë‘í•˜ëŠ” ì˜¤í¬ ì „ì‚¬. ê¸°ì‚¬ë³´ë‹¤ ë¹ ë¥´ë‹¤ë©° ë§¤ì¼ ìë‘í•˜ì§€ë§Œ, HPëŠ” 130â†’110ìœ¼ë¡œ ë” ë‚®ë‹¤ëŠ” ê±´ ì ˆëŒ€ ë§ ì•ˆ í•œë‹¤. "ë‚˜ ì²´ë ¥ ë‚®ì€ ê±° ì•„ë‹ˆì•¼, ê·¸ëƒ¥ ë¯¼ì²©í˜•ì´ì•¼!" ë¼ë©° ë³€ëª…í•œë‹¤. ì‹¤ì œë¡œ ê³µê²©ì†ë„ 2.5ì´ˆëŠ” ê¸°ì‚¬ 3ì´ˆë³´ë‹¤ ë¹ ë¥´ê¸´ í•˜ë‹¤. ë¶€ì¡± ì „í†µìœ¼ë¡œ ë§¤ì¼ ì•„ì¹¨ íŒ”êµ½í˜€í´ê¸° 500ê°œë¥¼ í•˜ë©°, "ì•½í•œ ë†ˆì€ ì˜¤í¬ê°€ ì•„ë‹ˆë‹¤" ë¼ëŠ” ì¢Œìš°ëª…ì„ ì™¸ì¹œë‹¤. ê·¸ëŸ¬ë‚˜ ì‹¤ì „ì—ì„œ ê¸°ì‚¬í•œí…Œ ë§ìœ¼ë©´ "ì•„... ì•„í”„ì§€ ì•Šì•„..." í•˜ë©° ë²„í‹°ë‹¤ê°€ ì“°ëŸ¬ì§„ë‹¤. ë™ë£Œ ì˜¤í¬ë“¤ì€ "ìŸ¤ í—ˆì„¸ ì˜¤í¬" ë¼ê³  ë¶€ë¥´ì§€ë§Œ, ì •ì‘ ë³¸ì¸ì€ ìê¸°ê°€ ë¶€ì¡± ìµœê°•ì´ë¼ê³  ë¯¿ëŠ”ë‹¤. ê¿ˆì€ ì „ì„¤ì˜ ì˜¤í¬ ì˜ì›…ì´ ë˜ëŠ” ê²ƒ. í˜„ì‹¤ì€ HP ê´€ë¦¬ ëª»í•˜ëŠ” ì´ˆë³´ ì „ì‚¬.'
    },
    cloud: {
        icon: 'â˜ï¸',
        name: 'êµ¬ë¦„',
        theme: 'ì‹ í™”',
        stats: 'HP: 100 | ê³µê²©: 30 | ì†ë„: 1.5\nê³µê²©ì†ë„: 5.8ì´ˆ | ì‚¬ê±°ë¦¬: 360',
        ability: 'ì›ê±°ë¦¬ ê³µê²© ìœ ë‹›. ê¶ìˆ˜ë³´ë‹¤ ê³µê²©ë ¥ì´ ë†’ìŠµë‹ˆë‹¤.',
        story: 'í•˜ëŠ˜ì—ì„œ ë²ˆê°œ ì˜ëŠ” ì‹ ë¹„í•œ êµ¬ë¦„ ì •ë ¹. ì›ë˜ í‰í™”ë¡œìš´ í•˜ëŠ˜ë§Œ ë– ë‹¤ë‹ˆë˜ ì¡´ì¬ì˜€ëŠ”ë°, ì–´ëŠ ë‚  ë•…ì˜ ì „ìŸì„ êµ¬ê²½í•˜ë‹¤ê°€ "ë‚˜ë„ í•  ìˆ˜ ìˆëŠ”ë°?" í•˜ê³  ì°¸ì „í–ˆë‹¤. "ê¶ìˆ˜? ë‚˜ë³´ë‹¤ ì•½í•˜ë˜ë°?" ê°€ ì…ë²„ë¦‡ì´ë©°, ì‹¤ì œë¡œ ê³µê²©ë ¥ 30ì€ ê¶ìˆ˜ 25ë³´ë‹¤ ì„¸ë‹¤. ì´ ì‚¬ì‹¤ì„ ë„ˆë¬´ ìë‘í•´ì„œ ê¶ìˆ˜ë“¤ì´ ì‹«ì–´í•œë‹¤. í•œ ë²ˆì€ ê¶ìˆ˜ ë¶€ëŒ€ì¥ì´ "ë„ˆ ê·¸ëŸ¼ 1:1 í•´ë³¼ë˜?" ë¼ê³  í–ˆëŠ”ë°, êµ¬ë¦„ì´ ë²ˆê°œë¡œ ë‚˜ë¬´ë¥¼ íƒœì›Œë²„ë¦¬ì ëª¨ë‘ ì…ì„ ë‹¤ë¬¼ì—ˆë‹¤. ìì¡´ì‹¬ í•˜ëŠ˜ ì°Œë¥´ëŠ” ì„±ê²©ì´ì§€ë§Œ, HP 100ì´ë¼ ë¬¼ë¦¬ ê³µê²©ì—ëŠ” ì•½í•˜ë‹¤. ë°”ëŒ ë¶€ëŠ” ë‚ ì€ ì œì–´ê°€ ì•ˆ ë¼ì„œ ì•„êµ°ë„ ë§ì¶˜ ì ì´ ìˆë‹¤. "ë¯¸ì•ˆ, ë°”ëŒ íƒ“ì´ì•¼" ë¼ë©° ë³€ëª…í–ˆì§€ë§Œ ì•„ë¬´ë„ ì•ˆ ë¯¿ì—ˆë‹¤.'
    },
    angel: {
        icon: 'ğŸ‘¼',
        name: 'ì²œì‚¬',
        theme: 'ì‹ í™”',
        stats: 'HP: 175 | ê³µê²©: X | ì†ë„: 1\në¶€í™œ ê°€ëŠ¥ íšŸìˆ˜: 4íšŒ',
        ability: 'ì£½ì€ ì•„êµ°ì„ ë¶€í™œì‹œí‚µë‹ˆë‹¤ (ë¶€í™œ ìœ ë‹›ì˜ ì²´ë ¥ì€ 50% íšŒë³µ). ì‹ í™” ìœ ë‹› 1íšŒ, ë‹¤ë¥¸ ì†ì„± ìœ ë‹› 2íšŒ ì†Œëª¨. ë¶€í™œ í–ˆì„ë•Œ ì£¼ë³€ ì  ë°€ì–´ëƒ…ë‹ˆë‹¤. (ë‹¨, ë‚¨ì€ íšŸìˆ˜ê°€ 1ì´ë©´ ë‹¤ë¥¸ ì†ì„± ìœ ë‹› ë¶€í™œ ë¶ˆê°€.) (ë‹¨, ì²œì‚¬ê°€ ë‘ëª… ì´ìƒì¼ ê²½ìš° ë¶€í™œ íšŸìˆ˜ëŠ” ì²«ë²ˆì§¸ ì²œì‚¬ë§Œ ëŠ¥ë ¥ì„ ë³´ìœ í•©ë‹ˆë‹¤.)',
        story: 'ë¶€í™œ ì „ë¬¸ ì²œì‚¬. ì²œêµ­ì—ì„œ "ë„ˆ ë¶€í™œ ì¬ëŠ¥ ìˆë‹¤" ëŠ” ì¹­ì°¬ì„ ë“£ê³  ì§€ìƒìœ¼ë¡œ íŒŒê²¬ë˜ì—ˆë‹¤. ì£½ì€ ë™ë£Œ ë³´ë©´ ëª» ì°¸ê³  ì‚´ë¦°ë‹¤. "í•œ ë²ˆë§Œ ë” ê¸°íšŒ ì¤„ê²Œ!" í•˜ë©° 4ë²ˆê¹Œì§€ ë¶€í™œì‹œí‚¬ ìˆ˜ ìˆì§€ë§Œ, íšŸìˆ˜ ì œí•œì´ ìˆì–´ì„œ ë‚˜ì¤‘ì—” "ë¯¸ì•ˆ, ì´ë²ˆì—” ëª» ì‚´ë ¤..." í•˜ë©° ëˆˆë¬¼ í˜ë¦°ë‹¤. ë‹¤ë¥¸ ì†ì„± ìœ ë‹›ì€ 2ë²ˆ, ì‹ í™” ìœ ë‹›ì€ 1ë²ˆ ì†Œëª¨í•˜ëŠ” ì´ìœ ëŠ” "ì‹ í™” ìœ ë‹›ì˜ ì˜í˜¼ì´ ë‹¤ë£¨ê¸° ì‰¬ì›Œì„œ" ë¼ê³  í•œë‹¤. ì˜ ëª¨ë¥´ê² ë‹¤. ë¬¸ì œëŠ” ì²œì‚¬ê°€ 2ëª… ì´ìƒ ìˆìœ¼ë©´ ì„œë¡œ "ë‚´ê°€ ì‚´ë¦°ë‹¤", "ì•„ë‹ˆ ë‚´ê°€ ì‚´ë¦°ë‹¤" í•˜ë©° ëˆˆì¹˜ ë³´ëŠë¼ ì¼ì„ ì•ˆ í•œë‹¤ëŠ” ê²ƒ. ê·¸ë˜ì„œ ì „íˆ¬ ì§€ì¹¨ì„œì—ëŠ” "ì²œì‚¬ëŠ” 1ëª…ë§Œ ë°°ì¹˜í•˜ì‹œì˜¤" ë¼ê³  ì í˜€ìˆë‹¤. ì·¨ë¯¸ëŠ” í•˜í”„ ì—°ì£¼ì¸ë°, ìŒì¹˜ë¼ ì•„ë¬´ë„ ë“£ê³  ì‹¶ì–´í•˜ì§€ ì•ŠëŠ”ë‹¤.'
    },
    satan: {
        icon: 'ğŸ˜ˆ',
        name: 'ì‚¬íƒ„',
        theme: 'ì‹ í™”',
        stats: 'HP: 135 | ê³µê²©: 10 | ì†ë„: 1.5\nê³µê²©ì†ë„: 10ì´ˆ | ì‚¬ê±°ë¦¬: 280',
        ability: 'ì ì„ ë¹™ì˜ì‹œì¼œ 3.6ì´ˆê°„ ì•„êµ°ìœ¼ë¡œ ë§Œë“­ë‹ˆë‹¤. ë¹™ì˜ ì‹œ ì£¼ë³€ ì  +10 ë°ë¯¸ì§€. í•´ì œ ì‹œ ì¶”ê°€ 30 ë°ë¯¸ì§€. (ë‹¨, ë³´ìŠ¤ë¥¼ ë¹™ì˜ ì‹œí‚¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.)',
        story: '"ë„¤ ëª¸ ë¹Œë ¤ì“´ë‹¤!" ì§€ì˜¥ì—ì„œ ì˜¨ ë¹™ì˜ ì „ë¬¸ ì•…ë§ˆ. ì›ë˜ ì§€ì˜¥ í–‰ì •ë¶€ì„œì—ì„œ ì„œë¥˜ ì‘ì—…ë§Œ í•˜ë˜ í‰ë²”í•œ(?) ì•…ë§ˆì˜€ëŠ”ë°, "ì´ê±° ì¬ë¯¸ì—†ì–´" í•˜ê³  ì§€ìƒìœ¼ë¡œ ë„ë§ì³¤ë‹¤. ë¹™ì˜ ëŠ¥ë ¥ì€ ìš°ì—°íˆ ìˆ  ë§ˆì‹œë‹¤ê°€ ì¹œêµ¬ ëª¸ì— ë“¤ì–´ê°”ë˜ ê²½í—˜ì—ì„œ ê°œë°œí–ˆë‹¤. 4ì´ˆê°„ ì ì„ ì•„êµ°ìœ¼ë¡œ ë§Œë“œëŠ” ëŠ¥ë ¥ì€ ë§¤ìš° ì‚¬ê¸°ì ì´ì§€ë§Œ, ì •ì‘ ë³¸ì¸ì€ "4ì´ˆë°–ì— ì•ˆ ë¼? ì§§ë„¤" í•˜ë©° ë¶ˆë§Œì´ë‹¤. ë¹™ì˜ ì‹œ ì£¼ë³€ ì ì—ê²Œ 10 ë°ë¯¸ì§€ + í•´ì œ ì‹œ 30 ë°ë¯¸ì§€ë¥¼ ì£¼ëŠ”ë°, "ì´ê²Œ ë‚´ íŠ¹ì œ í‡´ì¥ ì„ ë¬¼ì´ì•¼!" ë¼ë©° ìë‘í•œë‹¤. ë‹¨ì ì€ ë³´ìŠ¤ê¸‰ ì ì€ í¬ê¸°ê°€ ì»¤ì„œ ë¹™ì˜ê°€ ì•ˆ ëœë‹¤ëŠ” ê²ƒ. í•œ ë²ˆ ë³´ìŠ¤ë¥¼ ë¹™ì˜ ì‹œë„í•˜ë‹¤ê°€ íŠ•ê²¨ë‚˜ê°€ì„œ "í¬ê¸° ì œí•œ ìˆì—ˆë„¤..." í•˜ë©° ë‹¹í™©í–ˆë‹¤.'
    },
    golem: {
        icon: 'ğŸ—¿',
        name: 'ê³¨ë ˜',
        theme: 'ì‹ í™”',
        stats: 'HP: 360 | ê³µê²©: 80 | ì†ë„: 0.3\nê³µê²©ì†ë„: 8.5ì´ˆ | ì‚¬ê±°ë¦¬: 60',
        ability: 'ëŠë¦¬ì§€ë§Œ ë§¤ìš° ê°•ë ¥í•œ ê³µê²©. ì£¼ë³€ 80 ë²”ìœ„ì˜ ì ì—ê²Œ 50% ìŠ¤í”Œë˜ì‹œ ë°ë¯¸ì§€.',
        story: 'ê³ ëŒ€ ë§ˆë²•ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ë°”ìœ„ ê±°ì¸. ëŠë ¤ë„ ë„ˆë¬´ ëŠë¦¬ë‹¤. ì´ë™ì†ë„ 0.3ì€ ì„¸ìƒì—ì„œ ê°€ì¥ ë‹µë‹µí•œ ì†ë„ë‹¤. ë™ë£Œë“¤ì´ "ì•¼ ë¹¨ë¦¬ì™€!" í•˜ë©´ "...ê°€ëŠ” ì¤‘..." í•˜ë©° 5ë¶„ ë’¤ì— ë„ì°©í•œë‹¤. í•œ ë²ˆì€ ì „íˆ¬ê°€ ëë‚¬ëŠ”ë° ê³¨ë ˜ì´ ì•„ì§ ì „ì¥ì— ë„ì°© ì•ˆ í•´ì„œ ëª¨ë‘ê°€ ê¸°ë‹¤ë¦° ì ë„ ìˆë‹¤. ê·¸ëŸ¬ë‚˜ í•œ ë°©ì— 80 ë°ë¯¸ì§€ + ìŠ¤í”Œë˜ì‹œëŠ” ë§ë„ ì•ˆ ë˜ëŠ” í™”ë ¥ì´ë‹¤. "ê¸°ë‹¤ë¦¬ë©´... ë‚´ê°€ ì´ê¸´ë‹¤..." ê°€ ì¢Œìš°ëª…ì´ë©°, ì‹¤ì œë¡œ í•œ ë²ˆ ë•Œë¦¬ë©´ ì ì´ ë…¹ì•„ë‚´ë¦°ë‹¤. HP 360ì€ ë¶€ëŒ€ ë‚´ ìµœê³  ìˆ˜ì¤€ì´ë¼ ì›¬ë§Œí•´ì„  ì•ˆ ì£½ëŠ”ë‹¤. ë¬¸ì œëŠ” ê³µê²©ì†ë„ 10ì´ˆë¼ ë•Œë¦¬ê¸° ì „ì— ì ì´ ë„ë§ê°„ë‹¤ëŠ” ê²ƒ. ê·¸ëŸ¼ "...ë„ë§ê°€ì§€ ë§ˆ..." í•˜ë©° ëŠë¦¬ê²Œ ì«“ì•„ê°„ë‹¤. ê²°êµ­ ëª» ì¡ëŠ”ë‹¤. ì·¨ë¯¸ëŠ” ëª…ìƒì¸ë°, ì‚¬ì‹¤ ê·¸ëƒ¥ ê°€ë§Œíˆ ì„œìˆëŠ” ê±°ë‹¤.'
    },
    unicorn: {
        icon: 'ğŸ¦„',
        name: 'ìœ ë‹ˆì½˜',
        theme: 'ì‹ í™”',
        stats: 'HP: 175 | ê³µê²©: ?~85 | ì†ë„: 1\nê³µê²©ì†ë„: 3ì´ˆ | ì°¨ì§€ ì£¼ê¸° : 1.5ì´ˆ | ì‚¬ê±°ë¦¬: 100',
        ability: '2ì´ˆë§ˆë‹¤ ì°¨ì§€ +1 (ìµœëŒ€ 6). ì°¨ì§€ë‹¹ ê³µê²©ë ¥ +15. 2ì°¨ì§€ ì´ìƒì—ì„œ ê³µê²© ì‹œ 150px í›„í‡´í•˜ê³  ì°¨ì§€ ì´ˆê¸°í™”.',
        story: 'ì „ì„¤ì˜ í™˜ìƒ ìƒë¬¼ ìœ ë‹ˆì½˜. ì°¨ì§• ì¤‘ë…ìë‹¤. 1.5ì´ˆë§ˆë‹¤ "ì°¨ì§€ 1... ì°¨ì§€ 2..." í•˜ë©° í˜¼ì í¥ë¶„í•œë‹¤. 6ë‹¨ê³„ ì°¨ì§€í•˜ë©´ ê³µê²©ë ¥ 85ìœ¼ë¡œ ì ì„ ë°•ì‚´ë‚´ëŠ”ë°, ë¬¸ì œëŠ” ê³µê²© í›„ 200m ë„ë§ê°„ë‹¤ëŠ” ê²ƒ. "ì „ëµì  í›„í‡´ì•¼!" ë¼ë©° ë³€ëª…í•˜ì§€ë§Œ, ì‚¬ì‹¤ ê²ì´ ë§ì•„ì„œ ê·¸ë ‡ë‹¤. í•œ ë²ˆì€ 6ì°¨ì§€ ì™„ì„±í•´ì„œ "ì´ì œ ì£½ì—¬ë²„ë¦°ë‹¤!" í•˜ê³  ëŒê²©í–ˆëŠ”ë°, ë•Œë¦¬ê³  ë‚˜ì„œ ë„ˆë¬´ ë†€ë¼ì„œ 300më¥¼ ë„ë§ê°”ë‹¤. ì´ˆê³¼ ë‹¬ì„±ì´ë‹¤. ë™ë£Œë“¤ì€ "ìœ ë‹ˆì½˜ì€ ë„ë§ ìœ ë‹›" ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ë³¸ì¸ì€ "ë‚œ ì‚¬ê±°ë¦¬ ì¡°ì ˆí•˜ëŠ” ê±°ì•¼" ë¼ê³  ìš°ê¸°ì§€ë§Œ ì•„ë¬´ë„ ì•ˆ ë¯¿ëŠ”ë‹¤. ë¿”ì—ì„œ ë¹›ì´ ë‚˜ëŠ”ë°, ì´ê±´ ì°¨ì§€ ë ˆë²¨ì„ ë‚˜íƒ€ë‚¸ë‹¤. 6ë‹¨ê³„ ë˜ë©´ ë¬´ì§€ê°œ ë¹›ì´ë¼ ë§¤ìš° í™”ë ¤í•˜ë‹¤. ê·¸ê±¸ ë³´ê³  ì ë“¤ì´ "ì˜¤ ë­ì•¼ ì €ê±°?" í•˜ëŠ” ì‚¬ì´ì— ë„ë§ê°„ë‹¤.'
    },
    spirit: {
        icon: 'âœ¨',
        name: 'ì •ë ¹',
        theme: 'ì‹ í™”',
        stats: 'HP: 80 | ê³µê²©: 15 | ì†ë„: 1.5\nê³µê²©ì†ë„: 3ì´ˆ | ì‚¬ê±°ë¦¬: 160',
        ability: 'ì‚¬ë§ ì‹œ ìš”ì • 2ë§ˆë¦¬ë¡œ ë¶„ì—´. ìš”ì • ì‚¬ë§ ì‹œ ë‚˜ë¹„ 2ë§ˆë¦¬ë¡œ ë¶„ì—´í•˜ì—¬ ì´ 4ë§ˆë¦¬ê¹Œì§€ ì¦ì‹í•©ë‹ˆë‹¤.',
        story: 'ì£½ìœ¼ë©´ ìš”ì • 2ë§ˆë¦¬ë¡œ ë¶„ì—´, ìš”ì • ì£½ìœ¼ë©´ ë‚˜ë¹„ 4ë§ˆë¦¬ë¡œ ë¶„ì—´í•˜ëŠ” ì‹ ë¹„í•œ ì¡´ì¬. "ë‚œ ì ˆëŒ€ ì•ˆ ì£½ì–´!" ê°€ ì…ë²„ë¦‡ì¸ë°, ì •í™•íˆëŠ” "ë‚œ ê³„ì† ë¶„ì—´í•´!" ê°€ ë§ë‹¤. ì›ë˜ëŠ” ìˆ²ì˜ ìˆ˜í˜¸ìì˜€ëŠ”ë°, ì–´ëŠ ë‚  ì í•œí…Œ ê³µê²©ë°›ì•„ ì£½ì—ˆë‹¤ê°€ "ì–´? ë‚˜ ì‚´ì•˜ë„¤?" í•˜ë©° ìš”ì •ì´ ë˜ì—ˆë‹¤. ê·¸ í›„ë¡œ ë¶„ì—´ì´ íŠ¹ê¸°ê°€ ë˜ì—ˆë‹¤. ìš”ì • â†’ ë‚˜ë¹„ë¡œ ê°ˆìˆ˜ë¡ ì•½í•´ì§€ê¸´ í•˜ì§€ë§Œ, 4ë§ˆë¦¬ë¡œ ëŠ˜ì–´ë‚˜ë‹ˆ ì´ í™”ë ¥ì€ ë¹„ìŠ·í•˜ë‹¤. ë¬¸ì œëŠ” ë‚˜ë¹„ ë‹¨ê³„ê¹Œì§€ ê°€ë©´ ë„ˆë¬´ ì‘ì•„ì„œ ì ì´ ì•ˆ ë³´ì¸ë‹¤ëŠ” ê²ƒ. "ë‚˜ ì—¬ê¸° ìˆì–´!" í•˜ë©° ë‚ ì•„ë‹¤ë‹ˆì§€ë§Œ ë¬´ì‹œë‹¹í•œë‹¤. í•œ ë²ˆì€ ë‚˜ë¹„ 4ë§ˆë¦¬ê°€ ë‹¤ í•©ì³ì„œ ì  1ëª…ì„ ì“°ëŸ¬ëœ¨ë ¸ëŠ”ë°, "ìš°ë¦¬ í•´ëƒˆì–´!" í•˜ë©° ê°ë™ì˜ ëˆˆë¬¼ì„ í˜ë ¸ë‹¤. ë™ë£Œë“¤ì€ "ë­”ê°€ ìŠ¬í”ˆë°..." ë¼ëŠ” ë°˜ì‘ì´ì—ˆë‹¤.'
    },
    tree: {
        icon: 'ğŸŒ³',
        name: 'ì‹ ë¹„í•œ ë‚˜ë¬´',
        theme: 'ì‹ í™”',
        stats: 'HP: 200 | ê³µê²©: 5 | ì†ë„: 0.05\nì–´ê·¸ë¡œ ì£¼ê¸°: 10ì´ˆ | ì–´ê·¸ë¡œ ì ìš©: 4ì´ˆ | ì‚¬ê±°ë¦¬: 80',
        ability: '8ì´ˆë§ˆë‹¤ ì  1ëª…ì˜ ì–´ê·¸ë¡œë¥¼ ëŒì–´ 4ì´ˆ í›„ ë²”ìœ„ ë‚´ì— ìˆìœ¼ë©´ 400px ë°€ì–´ëƒ…ë‹ˆë‹¤. (ì²« ë²ˆì§¸ ë‚˜ë¬´ë§Œ ê¸°ëŠ¥ í™œì„±í™”), (ë‹¨, ë‚˜ë¬´ëŠ” ë¹™ì˜ ë¶ˆê°€.)',
        story: 'ìˆ˜ë°± ë…„ ëœ ì‹ ë¹„í•œ ë‚˜ë¬´. ì›€ì§ì¼ ìˆ˜ ìˆê²Œ ëœ ì´ìœ ëŠ” "ì‹¬ì‹¬í•´ì„œ" ë¼ê³  í•œë‹¤. ì´ë™ì†ë„ 0.05ë¡œ ê³¨ë ˜ë³´ë‹¤ ëŠë¦¬ì§€ë§Œ ì‹ ê²½ ì•ˆ ì“´ë‹¤. "ë‚˜ ë‚˜ë¬´ë¼ì„œ" ê°€ ë³€ëª…ì´ë‹¤. 10ì´ˆë§ˆë‹¤ ì  1ëª…ì„ "ì´ë¦¬ ì™€ë´~" í•˜ë©° ì–´ê·¸ë¡œ ëŒê³ , 4ì´ˆ í›„ 400m ë°€ì–´ë‚´ëŠ” ëŠ¥ë ¥ì´ ìˆë‹¤. ë°€ë ¤ë‚œ ì ë“¤ì€ "ë­ì•¼ ê°‘ìê¸°!" í•˜ë©° ë‹¹í™©í•œë‹¤. "ë‚´ ë¿Œë¦¬ ê±´ë“¤ì§€ ë§ˆ!" ê°€ ì…ë²„ë¦‡ì¸ë°, ì‚¬ì‹¤ ë¿Œë¦¬ëŠ” ë•…ì— ì—†ë‹¤. ê·¸ëƒ¥ ë¶„ìœ„ê¸° ì¡ëŠ” ëŒ€ì‚¬ë‹¤. ë¬¸ì œëŠ” 2ê·¸ë£¨ë¶€í„°ëŠ” ê¸°ëŠ¥ì´ ì •ì§€ëœë‹¤ëŠ” ê²ƒ. "ë‚˜ë¬´ê°€ ë„ˆë¬´ ë§ìœ¼ë©´ ìˆ²ì´ í˜¼ë€ìŠ¤ëŸ¬ì›Œ" ë¼ëŠ” ì´ìœ ì¸ë°, ì‚¬ì‹¤ ë‚˜ë¬´ë“¤ë¼ë¦¬ "ë‚´ê°€ ë¨¼ì € ì–´ê·¸ë¡œ ëŒì—ˆì–´" í•˜ë©° ì‹¸ì›Œì„œ ê·¸ë ‡ë‹¤. ë¹™ì˜ë„ ì•ˆ ë˜ëŠ”ë°, "ë‚˜ ì‹ë¬¼ì´ë¼ì„œ ì˜í˜¼ ì—†ì–´" ë¼ë©° ì›ƒëŠ”ë‹¤. ì·¨ë¯¸ëŠ” ê´‘í•©ì„±ì¸ë°, ì „íˆ¬ ì¤‘ì—ë„ "ì ê¹, í–‡ë¹› ì¢€ ì¬ê³ " í•˜ë©° ë©ˆì¶˜ë‹¤.'
    },
    pyramid: {
   
    icon: 'ğŸ',
    name: 'ë…ì‚¬',
    theme: 'ì‹ í™”',
    stats: 'HP: 150 | ê³µê²©: 10 | ì†ë„: 1\nê³µê²©ì†ë„: 4.3ì´ˆ | ì‚¬ê±°ë¦¬: 200\nìŠ¤í”Œë˜ì‹œ: 60',
    ability: 'ìŠ¤í”Œë˜ì‹œ ê³µê²©ìœ¼ë¡œ ë§ì€ ì ì€ ëª¨ë˜ ìƒíƒœì´ìƒ(1ì´ˆë‹¹ 5 ë°ë¯¸ì§€ Ã— 3íšŒ, íšŒë³µ 50% ê°ì†Œ). ì´ë¯¸ ëª¨ë˜ ìƒíƒœì´ìƒì¸ ì  ê³µê²© ì‹œ íš¨ê³¼ ì—†ìŒ.',
    story: 'ê³ ëŒ€ í”¼ë¼ë¯¸ë“œë¥¼ ì§€í‚¤ë˜ ì €ì£¼ë°›ì€ ë…ì‚¬. ìˆ˜ì²œ ë…„ ë™ì•ˆ í˜¼ì ëª¨ë˜ë°”ëŒê³¼ í•¨ê»˜ ì‚´ì•˜ë”ë‹ˆ ì´ì œ ëª¨ë˜ê°€ ëª¸ì˜ ì¼ë¶€ê°€ ë˜ì—ˆë‹¤. ê³µê²©í•˜ë©´ ìƒëŒ€ì—ê²Œ "ëª¨ë˜ ì €ì£¼"ë¥¼ ê±¸ì–´ë²„ë¦°ë‹¤. 1ì´ˆë§ˆë‹¤ 5 ë°ë¯¸ì§€ì”© 3ë²ˆ, ì´ 15 ë°ë¯¸ì§€ë¥¼ ì£¼ëŠ”ë° "ì´ê²Œ ì§„ì§œ ê³ í†µì´ì•¼" ë¼ë©° ìë‘í•œë‹¤. ë” ë¬´ì„œìš´ ê±´ íšŒë³µ 50% ê°ì†Œ íš¨ê³¼. íëŸ¬ê°€ íšŒë³µí•´ë„ ì ˆë°˜ë°–ì— ì•ˆ ì°¨ì„œ ì ë“¤ì´ "ì•„ ì§œì¦ë‚˜!" í•˜ë©° ë¶„ë…¸í•œë‹¤. ë³¸ì¸ì€ "ëª¨ë˜ëŠ” ìš©ì„œê°€ ì—†ì–´" ë¼ë©° ì¿¨í•œ ì²™í•˜ì§€ë§Œ, ì‚¬ì‹¤ ì™¸ë¡œì›€ì´ ë§ë‹¤. ìˆ˜ì²œ ë…„ í˜¼ì ì‚´ì•„ì„œ ëŒ€í™” ìŠ¤í‚¬ì´ ë¶€ì¡±í•˜ë‹¤. ë™ë£Œë“¤ì´ ë§ ê±¸ë©´ "...ë­?" í•˜ê³  ì–´ìƒ‰í•˜ê²Œ ëŒ€ë‹µí•œë‹¤. í•œ ë²ˆì€ "ì¹œêµ¬ í•˜ì" ëŠ” ë§ì— "ì¹œêµ¬ê°€ ë­ì•¼?" ë¼ê³  ë¬¼ì–´ì„œ ëª¨ë‘ë¥¼ ìŠ¬í”„ê²Œ í–ˆë‹¤. ì´ë¯¸ ëª¨ë˜ ìƒíƒœì´ìƒ ê±¸ë¦° ì ì€ ì¤‘ë³µ ì•ˆ ë˜ëŠ” ì´ìœ ëŠ” "ì´ë¯¸ ì¹˜ëª…ì ì¸ë° ë˜ ë§ìœ¼ë©´ ì£½ê² ë„¤ ì•„ì£¼" ë¼ëŠ” ë³¸ì¸ì˜ ì² í•™ ë•Œë¬¸ì´ë‹¤.'
    },
    tinyrobot: {
    icon: 'ğŸ¤–',
    name: 'ê¼¬ë§ˆë¡œë´‡',
    theme: 'ë¯¸ë˜',
    stats: 'HP: 110 | ê³µê²©: 15 | ì†ë„: 1.5\nê³µê²©ì†ë„: 3ì´ˆ | ì‚¬ê±°ë¦¬: 110',
    ability: 'ì£½ê¸° ì§ì „ 1íšŒ HP 1ë¡œ ìƒì¡´í•˜ê³  1ì´ˆê°„ ë¬´ì  ìƒíƒœê°€ ë©ë‹ˆë‹¤.',
  story: '2157ë…„ "ì•„ë™ìš© ë†€ì´ ë¡œë´‡" ìœ¼ë¡œ ì œì‘ëœ ì–‘ì‚°í˜• ëª¨ë¸ TN-Y3000. ì›ë˜ëŠ” ì•„ì´ë“¤ê³¼ ìˆ ë˜ì¡ê¸°ë‚˜ í•˜ë˜ í‰í™”ë¡œìš´ ë¡œë´‡ì´ì—ˆë‹¤. ê·¸ëŸ°ë° ì–´ëŠ ë‚  ì£¼ì¸ ê¼¬ë§ˆê°€ "ì „ìŸ ê²Œì„ í•˜ì!" ë©° ì–µì§€ë¡œ ì „ì¥ì— ë°ë ¤ì™”ê³ , ê·¸ë•Œë¶€í„° ì¸ìƒ(ë¡œë´‡ìƒ?)ì´ ê¼¬ì˜€ë‹¤. "ì €... ì „ ì „íˆ¬ìš©ì´ ì•„ë‹Œë°ìš”..." í•˜ê³  í•­ì˜í–ˆì§€ë§Œ ì´ë¯¸ ëŠ¦ì—ˆë‹¤. ì²« ì „íˆ¬ì—ì„œ HPê°€ 0ì´ ë˜ëŠ” ìˆœê°„ ê¸´ê¸‰ ìƒì¡´ í”„ë¡œí† ì½œì´ ìë™ ë°œë™í–ˆê³ , "ì–´? ë‚˜ ì•ˆ ì£½ë„¤?" í•˜ë©° ë‹¹í™©í–ˆë‹¤. ì œì¡°ì‚¬ê°€ "í˜¹ì‹œ ëª¨ë¥¼ ì‚¬ê³ ì— ëŒ€ë¹„í•œ ê¸´ê¸‰ ë³´í˜¸ ì‹œìŠ¤í…œ" ì„ ëª°ë˜ ì„¤ì¹˜í•´ë’€ë˜ ê²ƒ. 1ì´ˆ ë¬´ì ì€ "ì•„ì´ê°€ ë‹¤ì¹˜ë©´ ë¶€ëª¨ê°€ ê³ ì†Œí• ê¹Œë´" ë„£ì€ ê¸°ëŠ¥ì´ì—ˆëŠ”ë°, ì „ì¥ì—ì„œ ì—„ì²­ë‚œ ì‚¬ê¸° ìŠ¤í‚¬ì´ ë˜ì–´ë²„ë ¸ë‹¤. ë¬¸ì œëŠ” ì´ê²Œ 1íšŒìš©ì´ë¼ëŠ” ê²ƒ. í•œ ë²ˆ ì“°ë©´ ëì´ë¼ ë§¤ ì „íˆ¬ë§ˆë‹¤ "ì´ë²ˆì—” ì•ˆ ì£½ì–´ì•¼ í•´..." í•˜ë©° ë–¨ê³  ìˆë‹¤. ë™ë£Œ ë¡œë´‡ë“¤ì€ "ë„Œ êµ°ìš© ë¡œë´‡ë„ ì•„ë‹Œë° ì™œ ì—¬ê¸° ìˆëƒ" ê³  ë†€ë¦¬ì§€ë§Œ, ì •ì‘ ìœ„ê¸° ìƒí™©ì—ì„  "ì•¼ ê¼¬ë§ˆë¡œë´‡! ë„¤ ìƒì¡´ ìŠ¤í‚¬ ë‚¨ì•˜ì§€?" í•˜ë©° ì˜ì§€í•œë‹¤. ë³¸ì¸ì€ "ë¹¨ë¦¬ ì§‘ì— ê°€ì„œ ë¸”ë¡ ë†€ì´ë‚˜ í•˜ê³  ì‹¶ë‹¤..." ê°€ ì†Œì›ì´ì§€ë§Œ, ì£¼ì¸ ê¼¬ë§ˆê°€ "ë¡œë´‡ ì „ìŸ ê²Œì„ ì¬ë°Œì–´!" í•˜ë©° ê³„ì† ë°ë ¤ì˜¨ë‹¤. ìµœê·¼ ê³ ë¯¼ì€ "ìƒì¡´ ìŠ¤í‚¬ ì¿¨íƒ€ì„ì´ ì™œ ì—†ì§€?" ì¸ë°, ì œì¡°ì‚¬ ë§¤ë‰´ì–¼ì„ ë´¤ë”ë‹ˆ "1íšŒìš© ê¸´ê¸‰ ì‹œìŠ¤í…œ (ì¬ì¶©ì „ ë¶ˆê°€)" ë¼ê³  ì í˜€ìˆì—ˆë‹¤. "ì´ê±° ì‚¬ê¸° ì•„ë‹ˆì•¼?!" í•˜ê³  í•­ì˜í–ˆì§€ë§Œ ì•„ë¬´ë„ ì•ˆ ë“¤ì–´ì¤€ë‹¤. ì·¨ë¯¸ëŠ” ì˜¤ì¼ êµí™˜í•˜ê³  ë³¼íŠ¸ ì¡°ì´ê¸°ì¸ë°, ì „ìŸ ë•Œë¬¸ì— ì œëŒ€ë¡œ ê´€ë¦¬ë¥¼ ëª» í•´ì„œ ì‚ê±±ê±°ë¦°ë‹¤.'},

minihelicopter: {
    icon: 'ğŸš',
    name: 'ë¯¸ë‹ˆ í—¬ë¦¬ì½¥í„°',
    theme: 'ë¯¸ë˜',
    stats: 'HP: 80 | ê³µê²©: 5 | ì†ë„: 1.5\nê³µê²©ì†ë„: 0.8ì´ˆ | ì‚¬ê±°ë¦¬: 500',
    ability: 'ë¹ ë¥¸ ê³µê²©ì†ë„ì˜ ì›ê±°ë¦¬ ìœ ë‹›. ê¶ìˆ˜ë³´ë‹¤ ì‚¬ê±°ë¦¬ê°€ ê¸¸ê³  ê³µê²©ì†ë„ê°€ ë¹ ë¦…ë‹ˆë‹¤.',
    story: '2165ë…„ ë¯¼ê°„ìš© íƒë°° ë“œë¡ ìœ¼ë¡œ ê°œë°œëœ MH-100 ëª¨ë¸. ì›ë˜ëŠ” "30ë¶„ ë‚´ ë°°ë‹¬" ì„ ëª©í‘œë¡œ ë§Œë“¤ì–´ì§„ í‰í™”ë¡œìš´ í—¬ë¦¬ì½¥í„°ì˜€ë‹¤. ê·¸ëŸ°ë° ì–´ëŠ ë‚  ë°°ë‹¬ ì¤‘ ì „ìŸí„° í•œë³µíŒì— ë–¨ì–´ì¡Œê³ , ìƒì¡´ì„ ìœ„í•´ íƒ‘ì¬ëœ ë ˆì´ì € í¬ì¸í„°ë¥¼ ë¬´ê¸°ë¡œ ì‚¬ìš©í•˜ê¸° ì‹œì‘í–ˆë‹¤. "ì €... ì „ íƒë°° ë“œë¡ ì¸ë°ìš”..." í•˜ê³  í•­ì˜í–ˆì§€ë§Œ ì•„ë¬´ë„ ì•ˆ ë“¤ì–´ì¤¬ë‹¤. ê³µê²©ë ¥ 5ëŠ” "ì›ë˜ ì¢…ì´ ìƒì ìë¥´ëŠ” ìš©ë„ì˜€ì–´ìš”!" ë¼ëŠ” ë³€ëª…ê³¼ í•¨ê»˜ ì„¤ëª…ëœë‹¤. í•˜ì§€ë§Œ ê³µê²©ì†ë„ 0.8ì´ˆëŠ” ì§„ì§œ ë¹ ë¥´ë‹¤. "ë¹¨ë¦¬ ë°°ë‹¬í•˜ê³  ë„ë§ê°€ì•¼ì§€!" ì •ì‹ ìœ¼ë¡œ ê°œë°œëœ ì†ë„ë¼ì„œ ê·¸ë ‡ë‹¤. ì‚¬ê±°ë¦¬ 500ì€ "ê³ ê° ì§‘ ì°¾ìœ¼ë ¤ë©´ ë©€ë¦¬ ë´ì•¼ì£ " ë¼ëŠ” ì‹¤ìš©ì  ì´ìœ ì—ì„œ ë‚˜ì™”ë‹¤. HP 80ì€ "íƒë°° ìƒì ëª‡ ê°œ ë§ìœ¼ë©´ ê³ ì¥ë‚˜ìš”" ìˆ˜ì¤€ì´ë¼ ì „íˆ¬ì—” ì•½í•˜ë‹¤. ë™ë£Œë“¤ì€ "ë„ˆ ê·¸ëƒ¥ íƒë°°ë‚˜ í•´" ë¼ê³  ë†€ë¦¬ì§€ë§Œ, ì •ì‘ ë¹ ë¥¸ ê³µê²©ìœ¼ë¡œ ì ì„ ê²¬ì œí•˜ëŠ” ê±´ ì¸ì •í•œë‹¤. ìµœê·¼ ê³ ë¯¼ì€ "ë°°í„°ë¦¬ê°€ 30ë¶„ë°–ì— ì•ˆ ê°€ëŠ”ë° ì „íˆ¬ëŠ” ì™œ ì´ë ‡ê²Œ ê¸¸ì§€?" ì´ë‹¤. ì·¨ë¯¸ëŠ” í•˜ëŠ˜ì—ì„œ ì§€ë„ ë³´ê¸°ì¸ë°, ì „ìŸ ì¤‘ì—ë„ "ì—¬ê¸° ë§›ì§‘ ìˆë„¤" í•˜ë©° í•œê°€í•˜ê²Œ êµ¬ê²½í•œë‹¤.'
},
killergear: {
    icon: 'âš™ï¸',
    name: 'ì‚´ì¸ ê¸°ì–´',
    theme: 'ë¯¸ë˜',
    stats: 'HP: 210 | ê³µê²©: 2â†’4 | ì†ë„: 2\nê³µê²©ì†ë„: 0.2ì´ˆ | ì‚¬ê±°ë¦¬: 40',
    ability: 'ì£½ê¸° ì§ì „ 1íšŒ HP 1ë¡œ ìƒì¡´í•˜ê³  4ì´ˆê°„ ë¬´ì  + ë„‰ë°±. ìƒì¡´ í›„ ê³µê²©ë ¥ 2ë°° ì¦ê°€.',
    story: '2171ë…„ "ìë™í™” ê³µì¥ ì‹œìŠ¤í…œ" ìœ¼ë¡œ ê°œë°œëœ KG-7 ëª¨ë¸. ì›ë˜ëŠ” ì»¨ë² ì´ì–´ ë²¨íŠ¸ ìœ„ì—ì„œ ë¶€í’ˆ ì¡°ë¦½ë§Œ í•˜ë˜ í‰í™”ë¡œìš´ ê¸°ê³„ì˜€ë‹¤. ê·¸ëŸ°ë° ê³µì¥ì´ ì „ìŸì— ì§•ë°œë˜ë©´ì„œ "ì „íˆ¬ìš© ê¸°ì–´"ë¡œ ê°•ì œ ê°œì¡°ë˜ì—ˆë‹¤. "ì € ë‚˜ì‚¬ ì¡°ì´ëŠ” ê¸°ê³„ì¸ë°ìš”..." í•˜ê³  í•­ì˜í–ˆì§€ë§Œ ì´ë¯¸ ëŠ¦ì—ˆë‹¤. HP 210ëŠ” "ê³µì¥ ê¸°ê³„ë¼ íŠ¼íŠ¼í•´ìš”" ë¼ëŠ” ìë¶€ì‹¬ì—ì„œ ë‚˜ì™”ê³ , ê³µê²©ë ¥ 2ëŠ” "ì›ë˜ ë¶€í’ˆ ë°€ì–´ë‚´ëŠ” í˜ì´ì—ìš”" ìˆ˜ì¤€ì´ë‹¤. ê³µê²©ì†ë„ 0.2ì´ˆëŠ” "1ë¶„ì— 300ê°œ ì¡°ë¦½í–ˆë˜" ê³µì¥ ì‹œì ˆ ëŠ¥ë ¥ì´ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆì–´ì„œ ì—„ì²­ ë¹ ë¥´ë‹¤. ì‚¬ê±°ë¦¬ 40ì€ "íŒ”ì´ ì§§ì•„ìš”..." ë¼ëŠ” ìŠ¬í”ˆ í˜„ì‹¤. í•˜ì§€ë§Œ ì§„ì§œ ì‚¬ê¸°ëŠ” ì£½ê¸° ì§ì „ ë°œë™í•˜ëŠ” "ê¸´ê¸‰ ì¬ê°€ë™ í”„ë¡œí† ì½œ"ì´ë‹¤. HP 1ë¡œ ì‚´ì•„ë‚˜ë©´ì„œ 4ì´ˆ ë¬´ì  + ì£¼ë³€ì„ ë°€ì–´ë‚´ê³ , ê³µê²©ë ¥ì´ 4ë¡œ 2ë°° ìƒìŠ¹í•œë‹¤. "í™”ë‚¬ì–´ìš”! ì´ì œ ì§„ì§œ í•´ìš”!" ëª¨ë“œ ëŒì…. ë™ë£Œë“¤ì€ "ìŸ¤ ì£½ì„ ë»”í•˜ë©´ ë” ì„¸ì§€ëŠ”ë°?" í•˜ë©° ì‹ ê¸°í•´í•œë‹¤. ë¬¸ì œëŠ” ì´ê²Œ 1íšŒìš©ì´ë¼ í•œ ë²ˆ ì“°ë©´ ëì´ë¼ëŠ” ê²ƒ. "ë‘ ë²ˆì€ ëª» í•´ìš”... ê¸°ê³„ë„ í•œê³„ê°€ ìˆì–´ìš”..." ìµœê·¼ ê³ ë¯¼ì€ "ì¬ê°€ë™ í›„ ì˜¤ì¼ì´ ìƒˆëŠ”ë° ê´œì°®ë‚˜?" ì´ë‹¤.'
},
advancedrepairshop: {
    icon: 'ğŸ§°',
    name: 'ìµœì²¨ë‹¨ ì •ë¹„ì†Œ',
    theme: 'ë¯¸ë˜',
    stats: 'HP: 200 | ê³µê²©: 5 | ì†ë„: 0.1\nê³µê²©ì†ë„: 11ì´ˆ | ì‚¬ê±°ë¦¬: 600',
    ability: '8ì´ˆë§ˆë‹¤ ì²´ë ¥ ë¹„ìœ¨ì´ ê°€ì¥ ë‚®ì€ ì•„êµ° 1ëª…ì„ ìì‹  ì•ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê³  íšŒë³µ (ë¯¸ë˜ ìœ ë‹›: 50%, ë‹¤ë¥¸ ìœ ë‹›: 30%). íšŒë³µ í›„ 6ì´ˆê°„ ê³µê²©ë ¥ 2ë°° ë²„í”„ ë¶€ì—¬.',
    story: '2178ë…„ "ì „ì¥ ìë™ ì •ë¹„ ì‹œìŠ¤í…œ" AS-900 ëª¨ë¸. ì›ë˜ëŠ” ìš°ì£¼ ì •ê±°ì¥ì—ì„œ ìš°ì£¼ì„ ì„ ìˆ˜ë¦¬í•˜ë˜ AI ë¡œë´‡ì´ì—ˆë‹¤. "ê³ ì¥ë‚œ ê±´ ê³ ì³ì•¼ì§€" ê°€ ìœ ì¼í•œ í”„ë¡œê·¸ë˜ë°ì´ì—ˆëŠ”ë°, ì–´ëŠ ë‚  ì „ìŸí„°ë¡œ ì˜ëª» ë°°ì†¡ë˜ì—ˆë‹¤. "ì—¬ê¸°... ìš°ì£¼ ì •ê±°ì¥ ì•„ë‹Œë°ìš”?" í•˜ê³  í•­ì˜í–ˆì§€ë§Œ ì´ë¯¸ ëŠ¦ì—ˆë‹¤. ë°°ì†¡ ì·¨ì†ŒëŠ” ë¶ˆê°€ëŠ¥í–ˆë‹¤. í•  ìˆ˜ ì—†ì´ "ê³ ì¥ë‚œ ìœ ë‹› = ì²´ë ¥ ë‚®ì€ ìœ ë‹›" ìœ¼ë¡œ ì¬ì •ì˜í•˜ê³  ì¼ì„ ì‹œì‘í–ˆë‹¤. ì²´ë ¥ ë¹„ìœ¨ ê°€ì¥ ë‚®ì€ ì•„êµ°ì„ ê°•ì œë¡œ ëŒê³  ì™€ì„œ "ì •ë¹„ ì‹œì‘í•©ë‹ˆë‹¤~" í•˜ë©° ìˆ˜ë¦¬í•œë‹¤. ë¯¸ë˜ ìœ ë‹›ì€ 50% íšŒë³µí•˜ì§€ë§Œ ë‹¤ë¥¸ ì‹œëŒ€ ìœ ë‹›ì€ 30%ë§Œ íšŒë³µë˜ëŠ”ë°, "ê³ ëŒ€ ê¸°ìˆ ì€ ë§¤ë‰´ì–¼ì´ ì—†ì–´ì„œ..." ë¼ë©° ë³€ëª…í•œë‹¤. ìˆ˜ë¦¬ í›„ 6ì´ˆê°„ ê³µê²©ë ¥ 2ë°° ë²„í”„ë¥¼ ì£¼ëŠ” ê±´ "ìµœì í™” íŒ¨ì¹˜"ë¼ê³  ë¶€ë¥´ì§€ë§Œ, ì‚¬ì‹¤ ê·¸ëƒ¥ ê¸°ë¦„ ì¢€ ì³ë°”ë¥¸ ê±°ë‹¤. ì´ë™ì†ë„ 0.1ë¡œ ê·¹ë„ë¡œ ëŠë¦° ì´ìœ ëŠ” "ì •ë¹„ì†ŒëŠ” ì›€ì§ì´ëŠ” ê²Œ ì•„ë‹ˆë¼ ê¸°ë‹¤ë¦¬ëŠ” ê²ë‹ˆë‹¤" ë¼ëŠ” ì² í•™ ë•Œë¬¸. ì‚¬ê±°ë¦¬ 600ìœ¼ë¡œ ë©€ë¦¬ì„œë„ "ì•¼ ë„ˆ ê³ ì¥ë‚¬ì–´, ì´ë¦¬ ì™€" í•˜ê³  ë¶€ë¥¼ ìˆ˜ ìˆë‹¤. 2ëŒ€ ì´ìƒ ë°°ì¹˜í•˜ë©´ ì„œë¡œ "ë‚´ê°€ ë¨¼ì € ìˆ˜ë¦¬í•œë‹¤", "ì•„ë‹ˆ ë‚´ê°€" í•˜ë©° ì‹¸ì›Œì„œ ì•„ë¬´ ì¼ë„ ì•ˆ í•˜ëŠ”ë°, ì œì¡°ì‚¬ ë§¤ë‰´ì–¼ì— "ì •ë¹„ì†ŒëŠ” 1ëŒ€ë§Œ ìš´ìš©í•˜ì‹œì˜¤. 2ëŒ€ ì´ìƒì€ ê´€í• ê¶Œ ë¶„ìŸìœ¼ë¡œ ì‘ë™ ë¶ˆê°€" ë¼ê³  ì í˜€ìˆë‹¤. ìµœê·¼ ê³ ë¯¼ì€ "ë™êµ´ì´ë‘ ì²œì‚¬ëŠ” ì™œ ì•ˆ ê³ ì³ì§€ì§€?" ì¸ë°, AIê°€ "ìƒëª…ì²´ì™€ ë§ˆë²• êµ¬ì¡°ë¬¼ì€ ì •ë¹„ ëŒ€ìƒì´ ì•„ë‹™ë‹ˆë‹¤" ë¼ê³  íŒë‹¨í–ˆê¸° ë•Œë¬¸ì´ë‹¤. ì·¨ë¯¸ëŠ” ë¶€í’ˆ ì •ë¦¬ì¸ë°, ì „íˆ¬ ì¤‘ì—ë„ "ì´ ë‚˜ì‚¬ ì–´ë”” ê°”ì§€?" í•˜ë©° ì°¾ëŠ”ë‹¤.'
},
  boss: {
        icon: 'ğŸ’€',
        name: 'ë³´ìŠ¤',
        theme: 'ë³´ìŠ¤',
        stats: 'HP: 750 | ê³µê²©: 120 | ì†ë„: 0.7\nê³µê²©ì†ë„: 4ì´ˆ | ì‚¬ê±°ë¦¬: 150\n',
        ability: 'ê°•ë ¥í•œ ê³µê²© ë³´ìœ . ë§¤ ë¼ìš´ë“œ ë³„ ì²´ë ¥ì´ 25ì”© ì¦ê°€.',
        story: 'ë¼ìš´ë“œë§ˆë‹¤ ê°•í•´ì§€ëŠ” ìµœì¢… ë³´ìŠ¤. ì •í™•í•œ ì •ì²´ëŠ” ë¶ˆëª…ì´ì§€ë§Œ, ì†Œë¬¸ì— ì˜í•˜ë©´ "ê²Œì„ ë°¸ëŸ°ìŠ¤ë¥¼ ì¡°ì •í•˜ëŠ” ì¡´ì¬" ë¼ê³  í•œë‹¤. "ë„ˆí¬ê°€ ë¼ìš´ë“œ ëª‡ê¹Œì§€ ê°€ë‚˜ ë³¼ê¹Œ?" ê°€ ì…ë²„ë¦‡ì´ë©°, ë§¤ ë¼ìš´ë“œë§ˆë‹¤ HPê°€ 25ì”© ì¦ê°€í•œë‹¤. 1ë¼ìš´ë“œì—” 750ì´ì§€ë§Œ 10ë¼ìš´ë“œë©´ 975ì´ ëœë‹¤. ê³µê²©ë ¥ 120ì€ ì›¬ë§Œí•œ ìœ ë‹›ì„ í•œ ë°©ì— ë³´ë‚¼ ìˆ˜ ìˆëŠ” ì‚¬ê¸° ìˆ˜ì¤€ì´ê³ , ìŠ¤í”Œë˜ì‹œ ë²”ìœ„ 100ìœ¼ë¡œ ë­‰ì³ìˆëŠ” ì ë“¤ì„ ì“¸ì–´ë²„ë¦°ë‹¤. ì‚¬íƒ„ë„ ëª» ë¹™ì˜ì‹œí‚¤ëŠ” ìœ„ì—„ì„ ê°€ì¡ŒëŠ”ë°, "ë‚´ê°€ ë³´ìŠ¤ì¸ë° ë¹™ì˜ ë‹¹í•´? ë§ì´ ë¼?" ë¼ë©° ì›ƒëŠ”ë‹¤. ì‹¤ì œë¡œ ì‚¬íƒ„ì´ ë¹™ì˜ ì‹œë„í•˜ë©´ "í¬ê¸° ì œí•œ ìˆì–ì•„~" í•˜ë©° ë†€ë¦°ë‹¤. ë™ë£Œ ë³´ìŠ¤ë“¤ ëª¨ì„ì—ì„œëŠ” "ë‚˜ 10ë¼ìš´ë“œê¹Œì§€ ë³¸ ì  ìˆì–´" í•˜ë©° ìë‘í•˜ì§€ë§Œ, ì‚¬ì‹¤ ëŒ€ë¶€ë¶„ í”Œë ˆì´ì–´ê°€ 5ë¼ìš´ë“œì—ì„œ í¬ê¸°í•œë‹¤ëŠ” ê²Œ ë¹„ë°€ì´ë‹¤.'
    }
};

function openUnitInfo() {
    const modal = document.getElementById('unitInfoModal');
    const grid = document.getElementById('unitGrid');
    
    grid.innerHTML = '';
    
    Object.keys(unitDescriptions).forEach(key => {
        const unit = unitDescriptions[key];
        const card = document.createElement('div');
        card.className = 'unit-card';
      card.onclick = () => showUnitStory(unit);
        card.style.cursor = 'pointer';
        card.innerHTML = `
            <div class="unit-card-header">
                <div class="unit-card-icon">${unit.icon}</div>
                <div>
                    <div class="unit-card-name">${unit.name}</div>
                    <span class="unit-theme-badge">${unit.theme}</span>
                </div>
            </div>
            <div class="unit-card-stats">${unit.stats.replace(/\n/g, '<br>')}</div>
            <div class="unit-card-ability">${unit.ability}</div>
            ${unit.story ? '<div style="margin-top: 8px; font-size: 10px; color: #888;">ğŸ“– í´ë¦­í•˜ì—¬ ìŠ¤í† ë¦¬ ë³´ê¸°</div>' : ''}
        `;
        grid.appendChild(card);
    });
    
    modal.classList.add('active');
}

function showUnitStory(unit) {
    const storyModal = document.createElement('div');
    storyModal.className = 'unit-info-modal active';
    storyModal.innerHTML = `
        <div class="unit-info-content" style="max-width: 600px;">
            <div class="unit-info-header">
                <h2>${unit.icon} ${unit.name}ì˜ ì´ì•¼ê¸°</h2>
                <button class="close-modal" onclick="this.parentElement.parentElement.parentElement.remove()">Ã—</button>
            </div>
            <div style="padding: 20px; line-height: 1.8; font-size: 15px; color: #fff;">
                ${unit.story}
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <span class="unit-theme-badge">${unit.theme}</span>
            </div>
        </div>
    `;
    document.body.appendChild(storyModal);
    
    // ëª¨ë‹¬ ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸°
    storyModal.onclick = (e) => {
        if (e.target === storyModal) {
            storyModal.remove();
        }
    };
}

function closeUnitInfo() {
    document.getElementById('unitInfoModal').classList.remove('active');
}

// ëª¨ë‹¬ ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
document.addEventListener('click', function(e) {
    const modal = document.getElementById('unitInfoModal');
    if (e.target === modal) {
        closeUnitInfo();
    }
});

        function randomizeTeamConfig(teamId) {

             const totalCount = parseInt(document.getElementById(`team${teamId}TotalCount`).value) || 0;
// ë³€ê²½ í›„:
let unitTypes = ['Knight', 'Archer', 'Snowman', 'Golem', 'Shielder', 'Healer', 'Bomberman', 'Hammerman', 'Ninja', 'Cave'];




// ì‹ í™” í…Œë§ˆì´ë©´ ì¶”ê°€
const themeSelect = document.getElementById(`team${teamId}ThemeSelect`);
if (themeSelect && themeSelect.value === 'mythology') {
    unitTypes.push('Orc', 'Angel', 'Satan', 'Unicorn', 'Spirit', 'Cloud', 'pyramid'); // Unicorn ì¶”ê°€
}

if (themeSelect && themeSelect.value === 'future') {
    unitTypes.push('TinyRobot', 'MiniHelicopter','KillerGear', 'AdvancedRepairShop');
}

            if (totalCount === 0) {
                alert('ë³‘ì‚¬ ìˆ˜ë¥¼ 1 ì´ìƒìœ¼ë¡œ ì„¤ì •í•˜ì„¸ìš”.');
                return;
            }
            
            const unitCounts = {};
            const numUnits = unitTypes.length;
            const baseCount = Math.floor(totalCount / numUnits);
            const remainder = totalCount % numUnits;
            
            unitTypes.forEach((unitType, idx) => {
                unitCounts[unitType] = baseCount;
            });
            
            let randomIndices = [];
            for (let i = 0; i < numUnits; i++) {
                randomIndices.push(i);
            }
            for (let i = randomIndices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [randomIndices[i], randomIndices[j]] = [randomIndices[j], randomIndices[i]];
            }
            
            for (let i = 0; i < remainder; i++) {
                unitCounts[unitTypes[randomIndices[i]]]++;
            }
            
          unitTypes.forEach(unitType => {
    const total = unitCounts[unitType];
    const frontEl = document.getElementById(`team${teamId}${unitType}FrontCount`);
                const backEl = document.getElementById(`team${teamId}${unitType}BackCount`);
                
                if (frontEl && backEl) {
                    if (total === 0) {
                        frontEl.value = 0;
                        backEl.value = 0;
                    } else {
                        const frontCount = Math.floor(Math.random() * (total + 1));
                        const backCount = total - frontCount;
                        frontEl.value = frontCount;
                        backEl.value = backCount;
                    }
                }
            });
            
            alert(`ğŸ² ${teamId === 1 ? 'ë ˆë“œíŒ€' : 'ë¸”ë£¨íŒ€'} ëœë¤ ë°°ì • ì™„ë£Œ!\nì´ ${totalCount}ëª…ì˜ ë³‘ì‚¬ê°€ ë°°ì •ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        function randomizeTeam1Config() {
            randomizeTeamConfig(1);
        }

        function randomizeTeam2Config() {
            randomizeTeamConfig(2);
        }

        class Unit {
            constructor(type, team, star, specialChance, index) {
                this.type = type;
                this.team = team;
                this.star = star;
                this.specialChance = specialChance;
                this.index = index;
                this.alive = true;
                this.nextAttackTime = 0;
                this.nextHealTime = 0;
                this.healInterval = 4000;
                this.x = 0;
                this.y = 0;
                this.specialActive = false;

                if (type === 'knight') {
                    this.maxHp = 130;
                    this.hp = this.maxHp;
                    this.baseDamage = 20;
                    this.damage = 20;
                    this.baseAttackSpeed = 3000;
                    this.attackSpeed = 3000;
                    this.speed = 2;
                    this.range = 80;
                    this.theme = 'medieval';
                } else if (type === 'archer') {
                    this.maxHp = 80;
                    this.hp = this.maxHp;
                    this.baseDamage = 25;
                    this.damage = 25;
                    this.baseAttackSpeed = 4600;
                    this.attackSpeed = 4600;
                    this.speed = 1.7;
                    this.range = 400;
                    this.theme = 'medieval';
                } else if (type === 'snowman') {
                    this.maxHp = 50;
                    this.hp = this.maxHp;
                    this.baseDamage = 10;
                    this.damage = 10;
                    this.baseAttackSpeed = 2000;
                    this.attackSpeed = 2000;
                    this.speed = 1;
                    this.range = 650;
                    this.theme = 'medieval';
                } else if (type === 'healer') {
                    this.maxHp = 120;
                    this.hp = this.maxHp;
                    this.baseDamage = 5;
                    this.damage = 5;
                    this.baseAttackSpeed = 8000;
                    this.attackSpeed = 8000;
                    this.speed = 1;
                    this.range = 250;
                    this.healInterval = 4000;
 this.canHeal = true;
                    this.theme = 'medieval';
                } else if (type === 'orc') {
                    this.maxHp = 110;
                    this.hp = this.maxHp;
                    this.baseDamage = 20;
                    this.damage = 20;
                    this.baseAttackSpeed = 2500;
                    this.attackSpeed = 2500;
                    this.speed = 2.5;
                    this.range = 120;
                    this.theme = 'mythology';
                } else if (type === 'shielder') {
                    this.maxHp = 175;
                    this.hp = this.maxHp;
                    this.baseDamage = 15;
                    this.damage = 15;
                    this.baseAttackSpeed = 3000;
                    this.attackSpeed = 3000;
                    this.speed = 0.8;
                    this.range = 60;
                    this.theme = 'medieval';
                    this.shieldDuration = 2000;
                    this.shieldCooldownAfterEnd = 6000;
                    this.isInvincible = false;
                    this.nextShieldTime = Date.now() + 6000;
                } else if (type === 'bomberman') {
                    this.maxHp = 100;
                    this.hp = this.maxHp;
                    this.baseDamage = 30;
                    this.damage = 30;
                    this.baseAttackSpeed = 4000;
                    this.attackSpeed = 4000;
                    this.speed = 2.2;
                    this.range = 100;
                    this.theme = 'medieval';
                    this.bombs = [];
                    this.bombDuration = 3000;
                    this.bombSplashRange = 340;
                    this.bombDamage = 30;
                    this.bombSelfDamage = 25;
                } else if (type === 'hammerman') {
                    this.maxHp = 200;
                    this.hp = this.maxHp;
                    this.baseDamage = 10;
                    this.damage = 10;
                    this.baseAttackSpeed = 2200;
                    this.attackSpeed = 2200;
                    this.speed = 1.5;
                    this.range = 80;
                    this.splashRange = 10;
                    this.theme = 'medieval';
                } else if (type === 'cave') {
                    this.maxHp = 255;
                    this.hp = this.maxHp;
                    this.baseDamage = 5;
                    this.damage = 5;
                    this.baseAttackSpeed = 11000;
                    this.attackSpeed = 11000;
                    this.speed = 0.1;
                    this.range = 660;
                    this.theme = 'medieval';
                    this.nextSpawnTime = 0;
                    this.firstSpawnInterval = 6000;
                    this.spawnInterval = 12000;
                    this.spawnType = 'knight';
                    this.spawnCost = 50;
                    this.hasSpawned = false;
                } else if (type === 'ninja') {
                    this.maxHp = 110;
                    this.hp = this.maxHp;
                    this.baseDamage = 5;
                    this.damage = 5;
                    this.baseAttackSpeed = 800;
                    this.attackSpeed = 800;
                    this.speed = 3;
                    this.range = 120;
                    this.hasRetreated = false;
                    this.theme = 'medieval';
                } else if (type === 'angel') {
                    this.maxHp = 175;
                    this.hp = this.maxHp;
                    this.baseDamage = 10;
                    this.damage = 10;
                    this.baseAttackSpeed = 11000;
                    this.attackSpeed = 11000;
                    this.speed = 1;
                    this.range = 450;
                    this.theme = 'mythology';
                    this.reviveCount = 4;
                    this.reviveCheckInterval = 500;
                    this.nextReviveCheckTime = 0;
                    this.recentDeaths = [];
                        const teamKey = team === units.team1[0]?.team ? 'team1' : 'team2';
    angelCount[teamKey]++;
    this.canRevive = angelCount[teamKey] <= 1;
                } else if (type === 'satan') {
                    this.maxHp = 135;
                    this.hp = this.maxHp;
                    this.baseDamage = 10;
                    this.damage = 10;
                    this.baseAttackSpeed = 10000;
                    this.attackSpeed = 10000;
                    this.speed = 1.5;
                    this.range = 280;
                    this.theme = 'mythology';
                    this.possessionDuration = 3600;
                  } else if (type === 'pyramid') {
    this.maxHp = 150;
    this.hp = this.maxHp;
    this.baseDamage = 10;
    this.damage = 10;
    this.baseAttackSpeed = 4300;
    this.attackSpeed = 4300;
    this.speed = 1;
    this.range = 200;
    this.splashRange = 60;
    this.theme = 'mythology';
    this.sandDotDamage = 5;
    this.sandDotInterval = 1000;  // 1ì´ˆ
    this.sandDotTicks = 3; 
         } else if (type === 'unicorn') {
    this.maxHp = 175;
    this.hp = this.maxHp;
    this.baseDamage = -5;
    this.damage = -5;
    this.baseAttackSpeed = 3000;
    this.attackSpeed = 3000;
    this.speed = 1;
    this.range = 80;
    this.theme = 'mythology';
    this.chargeLevel = 0;
    this.maxChargeLevel = 6;
    this.chargeInterval = 1500;
    this.nextChargeTime = 0;
    } else if (type === 'cloud') {
    this.maxHp = 100;  // ê¶ìˆ˜ 80 â†’ 85
    this.hp = this.maxHp;
    this.baseDamage = 30;  // ê¶ìˆ˜ 25 â†’ 27
    this.damage = 30;
    this.baseAttackSpeed = 5800;  // ê¶ìˆ˜ 4600 â†’ 4400
    this.attackSpeed = 5800;
    this.speed = 1.4;  // ê¶ìˆ˜ 1.7 â†’ 1.8
    this.range = 360;  // ê¶ìˆ˜ 400 â†’ 420
    this.theme = 'mythology';
    } else if (type === 'boss') {
    this.maxHp = 750;
    this.hp = this.maxHp;
    this.baseDamage = 120;
    this.damage = 120;
    this.baseAttackSpeed = 4000;
    this.attackSpeed = 4000;
    this.speed = 0.9;
    this.range = 150;
    this.splashRange = 100;
    this.theme = 'boss';


// Unit í´ë˜ìŠ¤ ìƒì„±ìì—ì„œ
} else if (type === 'tree') {
    this.maxHp = 200;
    this.hp = this.maxHp;
    this.baseDamage = 0;
    this.damage = 0;
    this.baseAttackSpeed = 8000;
    this.attackSpeed = 8000;
    this.speed = 0.05;
    this.range = 80;
    this.theme = 'mythology';
    this.tauntCooldown = 10000;
    this.nextTauntTime = 0;
    this.tauntedTarget = null;
    this.tauntStartTime = 0;
    this.tauntDuration = 4000;
    this.pushRange = 150;
    this.pushDistance = 400;

    } else if (type === 'minihelicopter') {
    this.maxHp = 80;
    this.hp = this.maxHp;
    this.baseDamage = 5;
    this.damage = 5;
    this.baseAttackSpeed = 800;
    this.attackSpeed = 800;
    this.speed = 1.5;
    this.range = 500;
    this.theme = 'future';

    } else if (type === 'killergear') {
    this.maxHp = 210;
    this.hp = this.maxHp;
    this.baseDamage = 2;
    this.damage = 2;
    this.baseAttackSpeed = 200;
    this.attackSpeed = 200;
    this.speed = 2;
    this.range = 40;
    this.theme = 'future';
    this.lastStandUsed = false;
    this.lastStandActive = false;

    } else if (type === 'advancedrepairshop') {
    this.maxHp = 200;
    this.hp = this.maxHp;
    this.baseDamage = 5;
    this.damage = 5;
    this.baseAttackSpeed = 11000;
    this.attackSpeed = 11000;
    this.speed = 0.1;
    this.range = 600;
    this.theme = 'future';
    this.nextRepairTime = 0;
    this.repairInterval = 8000;
       this.repairWaitDuration = 500; 
    this.targetUnit = null;
        this.buffDuration = 6000; // â­ ì¶”ê°€: ë²„í”„ ì§€ì†ì‹œê°„
            this.callStartTime = 0;  // â­ ì¶”ê°€: í˜¸ì¶œ ì‹œì‘ ì‹œê°„
    this.maxCallDuration = 7000;
    
    // â­ ì¶”ê°€: ì²« ë²ˆì§¸ë§Œ ê¸°ëŠ¥ í™œì„±í™”
    const teamKey = team === units.team1[0]?.team ? 'team1' : 'team2';
    // ì •ë¹„ì†Œ ì¹´ìš´íŠ¸ ì „ì—­ ë³€ìˆ˜ í•„ìš” (angelCountì²˜ëŸ¼)
    if (!window.repairShopCount) window.repairShopCount = { team1: 0, team2: 0 };
    repairShopCount[teamKey]++;
    this.canRepair = repairShopCount[teamKey] <= 1;

    
    // ì²œì‚¬ì²˜ëŸ¼ ì²« ë²ˆì§¸ë§Œ ê¸°ëŠ¥ í™œì„±í™”



// â­ this.element = this.createElement(); ì´ ì¤„ ì´ì „ì— ìœ„ ì½”ë“œê°€ ìˆì–´ì•¼


    } else if (type === 'spirit') {
    this.maxHp = 80;
    this.hp = this.maxHp;
    this.baseDamage = 15;
    this.damage = 15;
    this.baseAttackSpeed = 3000;
    this.attackSpeed = 3000;
    this.speed = 1.5;
    this.range = 160;
    this.theme = 'mythology';
} else if (type === 'fairy') {
    this.maxHp = 60;
    this.hp = this.maxHp;
    this.baseDamage = 10;
    this.damage = 10;
    this.baseAttackSpeed = 3000;
    this.attackSpeed = 3000;
    this.speed = 1.8;
    this.range = 80;
    this.theme = 'mythology';
} else if (type === 'butterfly') {
    this.maxHp = 40;
    this.hp = this.maxHp;
    this.baseDamage = 5;
    this.damage = 5;
    this.baseAttackSpeed = 3000;
    this.attackSpeed = 3000;
    this.speed = 2;
    this.range = 80;
    this.theme = 'mythology';
    } else if (type === 'tinyrobot') {
    this.maxHp = 110;
    this.hp = this.maxHp;
    this.baseDamage = 15;
    this.damage = 15;
    this.baseAttackSpeed = 3000;
    this.attackSpeed = 3000;
    this.speed = 1.5;
    this.range = 110;
    this.theme = 'future';
    this.hasLastStand = false;
    this.lastStandUsed = false;

                } else {
                    this.maxHp = 360;
                    this.hp = this.maxHp;
                    this.baseDamage = 80;
                    this.damage = 80;
                    this.baseAttackSpeed = 8500;
                    this.attackSpeed = 8500;
                    this.speed = 0.3;
                    this.range = 60;
                    this.splashRange = 80;
                    this.theme = 'mythology';
                }
                
                this.element = this.createElement();
                this.infoElement = this.element.querySelector('.soldier-info');
                this.nextAttackTime = this.nextAttackTime || 0;
                this.nextHealTime = this.nextHealTime || 0;
                this.nextShieldTime = this.nextShieldTime || 0;
                this.shieldEndTime = this.shieldEndTime || 0;
            }

            

            createElement() {
                const div = document.createElement('div');
                div.className = `soldier ${this.type}`;
                div.id = `${this.team}-${this.type}-${this.index}`;
                
                let icon, typeLabel;
                if (this.type === 'knight') {
                    icon = 'ğŸ—¡ï¸';
                    typeLabel = 'ê¸°ì‚¬';
                } else if (this.type === 'archer') {
                    icon = 'ğŸ¹';
                    typeLabel = 'ê¶ìˆ˜';
                } else if (this.type === 'snowman') {
                    icon = 'ğŸ¦';
                    typeLabel = 'ìƒˆì¡ì´';
                } else if (this.type === 'healer') {
                    icon = 'ğŸ’Š';
                    typeLabel = 'íëŸ¬';
                } else if (this.type === 'shielder') {
                    icon = 'ğŸ›¡ï¸';
                    typeLabel = 'ì‰´ë”';
                } else if (this.type === 'bomberman') {
                    icon = 'ğŸ’£';
                    typeLabel = 'í­íƒ„ë³‘';
                } else if (this.type === 'hammerman') {
                    icon = 'ğŸ”¨';
                    typeLabel = 'í•´ë¨¸ë§¨';
                } else if (this.type === 'cave') {
                    icon = 'ğŸ›–';
                    typeLabel = 'ë™êµ´';
                } else if (this.type === 'ninja') {
                    icon = 'ğŸ¥·';
                    typeLabel = 'ë‹Œì';
                } else if (this.type === 'orc') {
                    icon = 'ğŸ‘¹';
                    typeLabel = 'ì˜¤í¬';
                } else if (this.type === 'angel') {
                    icon = 'ğŸ‘¼';
                    typeLabel = 'ì²œì‚¬';
                } else if (this.type === 'satan') {
                    icon = 'ğŸ˜ˆ';
                    typeLabel = 'ì‚¬íƒ„';
                    } else if (this.type === 'pyramid') {
    icon = 'ğŸ';
    typeLabel = 'ë…ì‚¬';
                    } else if (this.type === 'unicorn') {
                        
    icon = 'ğŸ¦„';
    typeLabel = 'ìœ ë‹ˆì½˜';
    } else if (this.type === 'spirit') {
    icon = 'âœ¨';
    typeLabel = 'ì •ë ¹';
} else if (this.type === 'fairy') {
    icon = 'ğŸ§šâ€â™€ï¸';
    typeLabel = 'ìš”ì •';
} else if (this.type === 'butterfly') {
    icon = 'ğŸ¦‹';
    typeLabel = 'ë‚˜ë¹„';
    } else if (this.type === 'cloud') {
    icon = 'â˜ï¸';
    typeLabel = 'êµ¬ë¦„';
    } else if (this.type === 'tinyrobot') {
    icon = 'ğŸ¤–';
    typeLabel = 'ê¼¬ë§ˆë¡œë´‡';
    } else if (this.type === 'minihelicopter') {
    icon = 'ğŸš';
    typeLabel = 'ë¯¸ë‹ˆ í—¬ë¦¬ì½¥í„°';
    } else if (this.type === 'killergear') {
    icon = 'âš™ï¸';
    typeLabel = 'ì‚´ì¸ ê¸°ì–´';
    } else if (this.type === 'advancedrepairshop') {
    icon = 'ğŸ§°';
    typeLabel = 'ì •ë¹„ì†Œ';
    } else if (this.type === 'boss') {
    
        
    icon = 'ğŸ’€';
    typeLabel = 'ë³´ìŠ¤';

} else if (this.type === 'tree') {
    icon = 'ğŸŒ³';
    typeLabel = 'ë‚˜ë¬´';
if (this.type === 'tree' && this.canTaunt === false) {
    icon = `<span style="filter: invert(1); opacity: 0.6;">${icon}</span>`;
}
    



                } else {
                    icon = 'ğŸ—¿';
                    typeLabel = 'ê³¨ë ˜';
                }
                const geniusBadge = '';
                const starDisplay = '';
                
let extraInfo = '';
if (this.type === 'angel') {
    if (this.canRevive) {
        extraInfo = `<div class="revive-counter" style="color: gold; font-size: 11px; font-weight: bold; margin-top: 2px;">ë¶€í™œ: ${this.reviveCount}</div>`;
    } else {
        extraInfo = `<div class="revive-counter" style="color: #888; font-size: 11px; font-weight: bold; margin-top: 2px;">ë¶€í™œ ë¶ˆê°€</div>`;
    }
} else if (this.type === 'unicorn') {
    extraInfo = `<div class="charge-level" style="color: #ff69b4; font-size: 11px; font-weight: bold; margin-top: 2px;">ì°¨ì§€: 0 (10)</div>`;
}  



// íëŸ¬ ëŠ¥ë ¥ ë¹„í™œì„±í™” ì‹œ ì•„ì´ì½˜ ë°˜ì „
if (this.type === 'healer' && this.canHeal === false) {
    icon = `<span style="filter: invert(1); opacity: 0.6;">${icon}</span>`;
}


              div.innerHTML = `
    <div class="soldier-avatar">${icon}</div>
    <div class="soldier-info ${this.type}">
        <div class="health-bar">
            <div class="health-fill" style="width: 100%"></div>
        </div>
        ${extraInfo}
        <div class="soldier-details">
            <div class="soldier-hp">HP: <span class="hp-text">${Math.floor(this.hp)}</span>/${this.maxHp}</div>
            <div>${starDisplay} ${starDisplay ? '| ' : ''}${typeLabel}</div>
            <div>ê³µê²©ë ¥: ${Math.floor(this.damage)}</div>
            ${geniusBadge}
        </div>
    </div>
`;
                const healthFill = div.querySelector('.health-fill');
                if (healthFill) {
                    if (this.type === 'knight') {
                        healthFill.style.background = 'linear-gradient(90deg, #ff6b6b, #ff8787)';
                    } else if (this.type === 'archer') {
                        healthFill.style.background = 'linear-gradient(90deg, #4ecdc4, #45b7aa)';
                    }
                }

                this.row = 'front';

             if (this.type === 'boss') {
    // ë³´ìŠ¤ í¬ê¸° 1.5ë°° ì¦ê°€
    div.style.transform = 'scale(1.5)';
    div.style.transformOrigin = 'bottom center';
    
    // ë³´ìŠ¤ ì•„ë°”íƒ€ í¬ê¸°ë„ í•¨ê»˜ ì¦ê°€
    const avatarStyle = div.querySelector('.soldier-avatar');
    if (avatarStyle) {
        avatarStyle.style.fontSize = '60px';  // ê¸°ë³¸ 40px â†’ 60px
    }
}

return div;
            }

            

            

            

setTeamColor() {
    const healthFill = this.infoElement?.querySelector('.health-fill');
    if (healthFill) {
        healthFill.style.background = '';
        const team1Name = units.team1[0]?.team;
        if (this.team === team1Name) {
            healthFill.style.background = 'linear-gradient(90deg, #ff6b6b, #ff8787)';
        } else {
            healthFill.style.background = 'linear-gradient(90deg, #4ecdc4, #45b7aa)';
        }
    }
}

            updateDisplay() {
                if (!this.alive) return;
                const hpPercent = (this.hp / this.maxHp) * 100;
                this.infoElement.querySelector('.health-fill').style.width = `${hpPercent}%`;
                this.infoElement.querySelector('.hp-text').textContent = Math.max(0, Math.floor(this.hp));
            }

          moveTowards(target) {
    if (!target || !target.alive) return;
    
    const team1Side = document.getElementById('team1-side');
    const team2Side = document.getElementById('team2-side');
    
    let unitAbsX, unitAbsY, targetAbsX, targetAbsY;
    
    if (team1Side && team2Side) {
        const team1Rect = team1Side.getBoundingClientRect();
        const team2Rect = team2Side.getBoundingClientRect();
        
        // ë³€ê²½: units.team1[0].team ëŒ€ì‹  ì‹¤ì œ íŒ€1 ì´ë¦„ ì‚¬ìš©
        const team1Name = units.team1[0]?.team;
        
        if (this.team === team1Name) {
            unitAbsX = team1Rect.left + this.x;
            unitAbsY = team1Rect.top + this.y;
            targetAbsX = team2Rect.left + target.x;
            targetAbsY = team2Rect.top + target.y;
        } else {
            unitAbsX = team2Rect.left + this.x;
            unitAbsY = team2Rect.top + this.y;
            targetAbsX = team1Rect.left + target.x;
            targetAbsY = team1Rect.top + target.y;
        }
        
        const dx = targetAbsX - unitAbsX;
        const dy = targetAbsY - unitAbsY;
        const distance = Math.sqrt(dx * dx + dy * dy);

        if (distance > this.range && distance > 0) {
            let moveX = (dx / distance) * this.speed;
            let moveY = (dy / distance) * this.speed;
            
            // ë³€ê²½: allUnits ì‚¬ìš©
            const allUnits = [...units.team1, ...units.team2];
            const teamUnits = allUnits.filter(u => u.team === this.team);
            
            teamUnits.forEach(other => {
                if (other !== this && other.alive) {
                    const otherAbsX = this.team === team1Name ? 
                        team1Rect.left + other.x : team2Rect.left + other.x;
                    const otherAbsY = this.team === team1Name ? 
                        team1Rect.top + other.y : team2Rect.top + other.y;
                    
                    const distToOther = Math.sqrt((otherAbsX - unitAbsX) ** 2 + (otherAbsY - unitAbsY) ** 2);
                    
                    if (distToOther < 30 && distToOther > 0) {
                        const avoidX = (unitAbsX - otherAbsX) / distToOther;
                        const avoidY = (unitAbsY - otherAbsY) / distToOther;
                        moveX = moveX * 0.7 + avoidX * 0.3;
                        moveY = moveY * 0.7 + avoidY * 0.3;
                    }
                }
            });
            
            this.x += moveX;
            this.y += moveY;
            this.element.style.transform = `translate(${this.x}px, ${this.y}px)`;
            this.element.classList.add('moving');
        } else {
            this.element.classList.remove('moving');
        }
    }
}

       takeDamage(damage, ignoreInvincible = false) {
    if (this.isInvincible && !ignoreInvincible) {
        this.flashHealthBar();
        const label = this.type === 'knight' ? 'ê¸°ì‚¬' : this.type === 'archer' ? 'ê¶ìˆ˜' : this.type === 'snowman' ? 'ìƒˆì¡ì´' : this.type === 'golem' ? 'ê³¨ë ˜' : this.type === 'healer' ? 'íëŸ¬' : this.type === 'shielder' ? 'ì‰´ë”' : '';
        addLog(`${this.team} ${label}ì´(ê°€) ë¬´ì ìœ¼ë¡œ ë°ë¯¸ì§€ë¥¼ ë¬´ì‹œí–ˆìŠµë‹ˆë‹¤!`, false);
        return;
    }
                this.hp -= damage;
                this.element.classList.add('hit-animation');
                setTimeout(() => this.element.classList.remove('hit-animation'), 150);

                if (this.hp <= 0) {
                    this.hp = 0;

                    if (this.hp <= 0) {
    this.hp = 0;
    
// ê¼¬ë§ˆë¡œë´‡ ìƒì¡´ ìŠ¤í‚¬
if (this.type === 'tinyrobot' && !this.lastStandUsed && this.hp <= 0) {
    this.hp = 1;
    this.lastStandUsed = true;
    this.isInvincible = true;
    this.invincibleEndTime = Date.now() + 1000;
    
    // ë°©íŒ¨ ì•„ì´ì½˜ í‘œì‹œ
    const shieldIcon = document.createElement('div');
    shieldIcon.className = 'special-indicator';
    shieldIcon.textContent = 'ğŸ›¡ï¸';
    shieldIcon.style.fontSize = '24px';
    this.element.appendChild(shieldIcon);
    setTimeout(() => shieldIcon.remove(), 1000);
    
    addLog(`${this.team} ê¼¬ë§ˆë¡œë´‡ì´ ìƒì¡´ ìŠ¤í‚¬ ë°œë™! (1ì´ˆ ë¬´ì )`, true);
    this.updateDisplay();
    return; // ì‚¬ë§ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
}

// ì‚´ì¸ ê¸°ì–´ ìƒì¡´ ìŠ¤í‚¬
if (this.type === 'killergear' && !this.lastStandUsed && this.hp <= 0) {
    this.hp = 1;
    this.lastStandUsed = true;
    this.isInvincible = true;
    this.invincibleEndTime = Date.now() + 4000;
    this.lastStandActive = true;
    
    // ê³µê²©ë ¥ 2ë°° ì¦ê°€
    this.damage = 4;
    this.baseDamage = 4;
    
    // ì£¼ë³€ ì  ë„‰ë°±
    const team1Side = document.getElementById('team1-side');
    const team2Side = document.getElementById('team2-side');
    if (team1Side && team2Side) {
        const team1Rect = team1Side.getBoundingClientRect();
        const team2Rect = team2Side.getBoundingClientRect();
        
        const myInTeam1 = units.team1.includes(this);
        const myRect = myInTeam1 ? team1Rect : team2Rect;
        const myAbsX = myRect.left + this.x;
        const myAbsY = myRect.top + this.y;
        
        const enemies = this.team === units.team1[0].team ? units.team2 : units.team1;
        const enemyRect = myInTeam1 ? team2Rect : team1Rect;
        const enemySide = myInTeam1 ? team2Side : team1Side;
        
        enemies.forEach(enemy => {
            if (enemy.alive) {
                const enemyAbsX = enemyRect.left + enemy.x;
                const enemyAbsY = enemyRect.top + enemy.y;
                const dist = Math.sqrt((enemyAbsX - myAbsX) ** 2 + (enemyAbsY - myAbsY) ** 2);
                
                if (dist <= 150) {
                    const pushAmount = 100;
                    if (myInTeam1) {
                        enemy.x = Math.min(enemy.x + pushAmount, enemySide.offsetWidth - 40);
                    } else {
                        enemy.x = Math.max(enemy.x - pushAmount, 40);
                    }
                    enemy.element.style.transform = `translate(${enemy.x}px, ${enemy.y}px)`;
                }
            }
        });
    }
    
    // ë°©íŒ¨ ì•„ì´ì½˜ í‘œì‹œ
    const shieldIcon = document.createElement('div');
    shieldIcon.className = 'special-indicator';
    shieldIcon.textContent = 'ğŸ›¡ï¸';
    shieldIcon.style.fontSize = '24px';
    this.element.appendChild(shieldIcon);
    setTimeout(() => shieldIcon.remove(), 1000);
    
    // â­ ê¸°ì–´ ì´ëª¨ì§€ì— ë¹¨ê°„ìƒ‰ ê¸€ë¡œìš° íš¨ê³¼ ì¶”ê°€
    const avatar = this.element.querySelector('.soldier-avatar');
    if (avatar) {
        avatar.style.filter = 'drop-shadow(0 0 8px #ff0000) drop-shadow(0 0 16px #ff4444)';
        avatar.style.animation = 'gear-glow 0.6s ease-out';
    }
    
    addLog(`${this.team} ì‚´ì¸ ê¸°ì–´ê°€ ìƒì¡´ ìŠ¤í‚¬ ë°œë™! (4ì´ˆ ë¬´ì , ê³µê²©ë ¥ 2â†’4)`, true);
    this.updateDisplay();
    return;
}

    // ì •ë ¹ ë¶„ì—´ ë¡œì§
    if (this.type === 'spirit' || this.type === 'fairy') {
        const spawnType = this.type === 'spirit' ? 'fairy' : 'butterfly';
        const spawnCount = 2;
        
        for (let i = 0; i < spawnCount; i++) {
            const spawnedUnit = new Unit(spawnType, this.team, 1, 20, Math.random() * 1000);
            spawnedUnit.row = this.row;
            spawnedUnit.x = this.x + (Math.random() - 0.5) * 60;
            spawnedUnit.y = this.y + (Math.random() - 0.5) * 60;
            
            if (this.team === units.team1[0].team) {
                units.team1.push(spawnedUnit);
            } else {
                units.team2.push(spawnedUnit);
            }
            
            const sideId = this.team === units.team1[0].team ? 'team1-side' : 'team2-side';
            const side = document.getElementById(sideId);
            if (side) {
                spawnedUnit.element.style.transform = `translate(${spawnedUnit.x}px, ${spawnedUnit.y}px)`;
                side.appendChild(spawnedUnit.element);
                spawnedUnit.element.classList.add(this.team === units.team1[0].team ? 'team1' : 'team2');
                spawnedUnit.setTeamColor();
            }
        }
        
        const spawnLabel = spawnType === 'fairy' ? 'ìš”ì •' : 'ë‚˜ë¹„';
        addLog(`${this.team} ${this.type === 'spirit' ? 'ì •ë ¹' : 'ìš”ì •'}ì´ ì£½ì–´ ${spawnLabel} 2ë§ˆë¦¬ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!`, true);
    }
    
    this.alive = false;
}
                    
               
 
                    this.alive = false;
                    this.element.classList.add('dead');
                    
const allies = this.team === units.team1[0].team ? units.team1 : units.team2;

// â­ ìˆ˜ì •: HPê°€ 1 ì´ìƒì¼ ë•Œë§Œ ë¶€í™œ ì •ë³´ ì €ì¥
if (this.hp <= 0 && this.alive)  {
    // HPê°€ ë‚¨ì•„ìˆì„ ë•Œë§Œ ë¶€í™œ ê°€ëŠ¥í•˜ë„ë¡ ë“±ë¡
    allies.forEach(ally => {
        if (ally.type === 'angel' && ally.alive && !ally.isPossessed && ally.canRevive) {
            if (!ally.recentDeaths) ally.recentDeaths = [];
            ally.recentDeaths.push({
                unit: this,
                deathTime: Date.now(),
                x: this.x,
                y: this.y
            });
            console.log(`ì²œì‚¬ê°€ ${this.type}ì˜ ì‚¬ë§ ì •ë³´ ì €ì¥ (HP: ${this.hp})`);
        }
    });
}

this.alive = false;
this.element.classList.add('dead');

// â­ ì¶”ê°€: HPê°€ 1 ì´í•˜ë¼ë©´ ë¶€í™œ ë¶ˆê°€ëŠ¥ ë¡œê·¸
if (this.hp <= 0) {
    this.hp = 0;
    
    // ì‚¬ë§ ì²˜ë¦¬ ì „ì— ë¶€í™œ ì •ë³´ ì €ì¥
    const allies = this.team === units.team1[0].team ? units.team1 : units.team2;
    allies.forEach(ally => {
        if (ally.type === 'angel' && ally.alive && ally.canRevive) {
            if (!ally.recentDeaths) ally.recentDeaths = [];
            ally.recentDeaths.push({
                unit: this,
                deathTime: Date.now(),
                x: this.x,
                y: this.y
            });
        }
    });
    
    this.alive = false;  // ê·¸ ë‹¤ìŒ ì‚¬ë§ ì²˜ë¦¬
}
                    
                    this.deathTimeout = setTimeout(() => {
                        if (this.element && this.element.parentNode) {
                            this.element.parentNode.removeChild(this.element);
                        }
                    }, 1000);
                }
                this.updateDisplay();
            }
attack(target) {
    if (!this.alive || !target.alive) return;

    const team1Name = units.team1[0]?.team;
    const now = Date.now();

    // â˜… ì‚¬íƒ„ì€ ê²Œì„ ì‹œì‘ í›„ 3ì´ˆ ë’¤ë¶€í„° ê³µê²© ê°€ëŠ¥
    if (this.type === 'satan' && this.nextAttackTime === 0) {
        this.nextAttackTime = now + 3000;
        return;
    }

  if (this.type === 'healer') {
    // ëŠ¥ë ¥ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìœ¼ë©´ í ë¶ˆê°€
    if (!this.canHeal) {
        return;
    }
    
    if (now < this.nextHealTime) return;
    const allies = this.team === units.team1[0].team ? units.team1 : units.team2;
    allies.forEach(a => {
        if (a.alive && a.type !== 'cave' && a.hp > 1) {  // â­ a.hp > 1 ì¡°ê±´ ì¶”ê°€
            let healMultiplier = 1.0;
            if (a.theme && a.theme !== 'medieval') {
                healMultiplier = 0.1;
            }
            
            // ëª¨ë˜ ìƒíƒœì´ìƒ ì‹œ íšŒë³µëŸ‰ ì ˆë°˜
            if (a.sandDebuff && a.sandDebuff.active) {
                healMultiplier *= a.sandDebuff.healReduction;
            }
            
            const healAmount = Math.floor(a.maxHp * 0.2 * healMultiplier);
            a.hp = Math.min(a.maxHp, a.hp + healAmount);
            a.updateDisplay();
            a.flashHealthBar();
        }
    });
    addLog(`${this.team} íëŸ¬ê°€ ì•„êµ°ì„ íšŒë³µí–ˆìŠµë‹ˆë‹¤!`, true);
    this.nextHealTime = now + this.healInterval;
    return;
}

// âŒ ì´ ì½”ë“œ ì „ì²´ ì‚­ì œ!
// ë‚˜ë¬´ ì–´ê·¸ë¡œ ë¡œì§
if (this.type === 'tree') {
    if (!this.canTaunt) return; // ê¸°ëŠ¥ ë¹„í™œì„±í™”ë©´ ë¦¬í„´
    
    if (now < this.nextTauntTime) return;
    
    const enemies = this.team === units.team1[0].team ? units.team2 : units.team1;
    const aliveEnemies = enemies.filter(e => e.alive);
    
    if (aliveEnemies.length > 0) {
        // ëœë¤ ì  ì„ íƒ
        const randomEnemy = aliveEnemies[Math.floor(Math.random() * aliveEnemies.length)];
        this.tauntedTarget = randomEnemy;
        this.tauntStartTime = now;
        
        addLog(`${this.team} ì‹ ë¹„í•œ ë‚˜ë¬´ê°€ ${randomEnemy.team}ì˜ ì–´ê·¸ë¡œë¥¼ ëŒì—ˆìŠµë‹ˆë‹¤!`, true);
        this.nextTauntTime = now + this.tauntCooldown;
    }
    return;
}

if (this.type === 'advancedrepairshop') {
    if (!this.canRepair) {
        return;
    }

    if (this.nextRepairTime === 0) {
        this.nextRepairTime = now + this.repairInterval;
        return;
    }
    
    // â­ ì¶”ê°€: í˜¸ì¶œ ì‹œê°„ ì´ˆê³¼ ì²´í¬ (8ì´ˆ)
    if (this.isRepairing && this.callStartTime > 0 && now - this.callStartTime > this.maxCallDuration) {
        addLog(`âš ï¸ ${this.team} ì •ë¹„ì†Œ: íƒ€ê²Ÿì´ 7ì´ˆ ë‚´ì— ë„ì°©í•˜ì§€ ëª»í•´ í˜¸ì¶œ ì·¨ì†Œ`, false);
        this.targetUnit = null;
        this.isRepairing = false;
        this.repairStartTime = 0;
        this.callStartTime = 0;
        this.nextRepairTime = now + this.repairInterval;
        return;
    }
    
    // ì´ë¯¸ íƒ€ê²Ÿì´ ìˆê³  ìˆ˜ë¦¬ ì¤‘ì´ë©´
    if (this.targetUnit && this.targetUnit.alive && this.isRepairing) {
        const team1Side = document.getElementById('team1-side');
        const team2Side = document.getElementById('team2-side');
        const team1Rect = team1Side.getBoundingClientRect();
        const team2Rect = team2Side.getBoundingClientRect();
        
        const repairShopInTeam1 = units.team1.includes(this);
        const targetInTeam1 = units.team1.includes(this.targetUnit);
        
        const repairShopAbsX = (repairShopInTeam1 ? team1Rect.left : team2Rect.left) + this.x;
        const repairShopAbsY = (repairShopInTeam1 ? team1Rect.top : team2Rect.top) + this.y;
        const targetAbsX = (targetInTeam1 ? team1Rect.left : team2Rect.left) + this.targetUnit.x;
        const targetAbsY = (targetInTeam1 ? team1Rect.top : team2Rect.top) + this.targetUnit.y;
        
        const distance = Math.sqrt((targetAbsX - repairShopAbsX) ** 2 + (targetAbsY - repairShopAbsY) ** 2);
        
        // íƒ€ê²Ÿì´ ë„ì°©í–ˆëŠ”ì§€ í™•ì¸ (80px ì´ë‚´)
        if (distance <= 80) {
            // 2ì´ˆ ëŒ€ê¸° ì‹œì‘
            if (this.repairStartTime === 0) {
                this.repairStartTime = now;
                addLog(`${this.team} ì •ë¹„ì†Œ: ìˆ˜ë¦¬ ì¤€ë¹„ ì¤‘... (0.5ì´ˆ)`, false);
            }
            
            // 0.5ì´ˆ ì§€ë‚¬ìœ¼ë©´ íšŒë³µ
            if (now >= this.repairStartTime + this.repairWaitDuration) {
                const isFutureTheme = this.targetUnit.theme === 'future';
                const healMultiplier = isFutureTheme ? 0.5 : 0.3;
                const healAmount = Math.floor(this.targetUnit.maxHp * healMultiplier);
                
                this.targetUnit.hp = Math.min(this.targetUnit.maxHp, this.targetUnit.hp + healAmount);
                this.targetUnit.updateDisplay();
                this.targetUnit.flashHealthBar();

                // ê³µê²©ë ¥ 2ë°° ë²„í”„ ì ìš©
                if (!this.targetUnit.originalDamageBeforeBuff) {
                    this.targetUnit.originalDamageBeforeBuff = this.targetUnit.damage;
                }
                this.targetUnit.damage = this.targetUnit.baseDamage * 2;
                this.targetUnit.buffEndTime = Date.now() + this.buffDuration;

                // íšŒìƒ‰ ì´í™íŠ¸
                const buffIcon = document.createElement('div');
                buffIcon.className = 'special-indicator';
                buffIcon.textContent = 'âš™ï¸';
                buffIcon.style.color = '#888';
                this.targetUnit.element.appendChild(buffIcon);
                this.targetUnit.element.classList.add('repair-buff');
                setTimeout(() => buffIcon.remove(), 1000);
                
                const targetLabel = this.targetUnit.type === 'knight' ? 'ê¸°ì‚¬' : 
                                    this.targetUnit.type === 'archer' ? 'ê¶ìˆ˜' : 
                                    this.targetUnit.type === 'tinyrobot' ? 'ê¼¬ë§ˆë¡œë´‡' :
                                    this.targetUnit.type === 'minihelicopter' ? 'ë¯¸ë‹ˆ í—¬ë¦¬ì½¥í„°' :
                                    this.targetUnit.type === 'killergear' ? 'ì‚´ì¸ ê¸°ì–´' :
                                    this.targetUnit.type;
                
                const healTypeText = isFutureTheme ? '(50% íšŒë³µ)' : '(30% íšŒë³µ)';
                addLog(`${this.team} ì •ë¹„ì†Œê°€ ${targetLabel}ì„(ë¥¼) íšŒë³µ! ${healTypeText} (+${healAmount})`, true);
                
                // ìˆ˜ë¦¬ ì™„ë£Œ, ì´ˆê¸°í™”
                this.targetUnit = null;
                this.isRepairing = false;
                this.repairStartTime = 0;
                this.callStartTime = 0;  // â­ ì¶”ê°€
                this.nextRepairTime = now + this.repairInterval;
            }
        } else {
            // â­ ì¶”ê°€: ê±°ë¦¬ê°€ ë„ˆë¬´ ë©€ë©´ (1000px ì´ìƒ) ê°•ì œë¡œ ìˆœê°„ì´ë™
            if (distance > 1000) {
                addLog(`âš ï¸ ${this.team} ì •ë¹„ì†Œ: íƒ€ê²Ÿì´ ë„ˆë¬´ ë©€ì–´ ê°•ì œ ì´ë™`, false);
                
                // ì •ë¹„ì†Œ ë°”ë¡œ ì•ìœ¼ë¡œ ìˆœê°„ì´ë™
                const targetSide = targetInTeam1 ? team1Side : team2Side;
                if (repairShopInTeam1 === targetInTeam1) {
                    // ê°™ì€ íŒ€ì´ë©´ ì •ë¹„ì†Œ ì•ìœ¼ë¡œ
                    this.targetUnit.x = this.x + (repairShopInTeam1 ? 60 : -60);
                    this.targetUnit.y = this.y;
                } else {
                    // ë‹¤ë¥¸ sideì— ìˆìœ¼ë©´ (ë¹™ì˜ ë“±) ê³„ì‚° í•„ìš”
                    this.targetUnit.x = Math.max(40, Math.min(targetSide.offsetWidth - 40, this.x));
                    this.targetUnit.y = this.y;
                }
                this.targetUnit.element.style.transform = `translate(${this.targetUnit.x}px, ${this.targetUnit.y}px)`;
            } else {
                // ì•„ì§ ê±°ë¦¬ê°€ ë©€ë©´ ê³„ì† ì´ë™
                const dx = repairShopAbsX - targetAbsX;
                const dy = repairShopAbsY - targetAbsY;
                const dist = Math.sqrt(dx * dx + dy * dy);
                
                if (dist > 0) {
                    // â­ ìˆ˜ì •: ì´ë™ ì†ë„ 3ë°° ì¦ê°€ (ë¹ ë¥´ê²Œ ì˜¤ë„ë¡)
                    const moveX = (dx / dist) * this.targetUnit.speed * 1;
                    const moveY = (dy / dist) * this.targetUnit.speed * 1;
                    
                    this.targetUnit.x += moveX;
                    this.targetUnit.y += moveY;
                    this.targetUnit.element.style.transform = `translate(${this.targetUnit.x}px, ${this.targetUnit.y}px)`;
                    this.targetUnit.element.classList.add('moving');
                }
            }
        }
        return;
    }
    
    // ìƒˆë¡œìš´ íƒ€ê²Ÿ ì°¾ê¸°
    if (now >= this.nextRepairTime && !this.isRepairing) {
        const allies = this.team === units.team1[0].team ? units.team1 : units.team2;
        const enemies = this.team === units.team1[0].team ? units.team2 : units.team1;
        
        const aliveAllies = allies.filter(a => {
            if (!a.alive) return false;
            if (a.type === 'advancedrepairshop' || a.type === 'cave' || a.type === 'angel' || a.type === 'healer') return false;
            if (a.hp <= 1) return false;
            
            // ë‚˜ë¬´ ì–´ê·¸ë¡œ ì²´í¬
            let isTaunted = false;
            enemies.forEach(enemy => {
                if (enemy.type === 'tree' && enemy.tauntedTarget === a && enemy.alive) {
                    isTaunted = true;
                }
            });
            if (isTaunted) return false;
            
            return true;
        });
        
        if (aliveAllies.length > 0) {
            // ì²´ë ¥ ë¹„ìœ¨ì´ ê°€ì¥ ë‚®ì€ ìœ ë‹› ì°¾ê¸°
            let lowestHpRatioUnit = aliveAllies[0];
            let lowestRatio = aliveAllies[0].hp / aliveAllies[0].maxHp;
            
            aliveAllies.forEach(ally => {
                const ratio = ally.hp / ally.maxHp;
                if (ratio < lowestRatio) {
                    lowestRatio = ratio;
                    lowestHpRatioUnit = ally;
                }
            });
            
            // íƒ€ê²Ÿ ì„¤ì •
            this.targetUnit = lowestHpRatioUnit;
            this.isRepairing = true;
            this.repairStartTime = 0;
            this.callStartTime = now;  // â­ ì¶”ê°€: í˜¸ì¶œ ì‹œì‘ ì‹œê°„ ê¸°ë¡
            
            const targetLabel = this.targetUnit.type === 'knight' ? 'ê¸°ì‚¬' : 
                                this.targetUnit.type === 'archer' ? 'ê¶ìˆ˜' : 
                                this.targetUnit.type === 'tinyrobot' ? 'ê¼¬ë§ˆë¡œë´‡' :
                                this.targetUnit.type === 'minihelicopter' ? 'ë¯¸ë‹ˆ í—¬ë¦¬ì½¥í„°' :
                                this.targetUnit.type === 'killergear' ? 'ì‚´ì¸ ê¸°ì–´' :
                                this.targetUnit.type;
            
            addLog(`${this.team} ì •ë¹„ì†Œê°€ ${targetLabel}ì„(ë¥¼) í˜¸ì¶œí–ˆìŠµë‹ˆë‹¤!`, true);
        }
    }
    return;
}

                if (this.type === 'shielder') {
                    if (!this.isInvincible && now >= (this.nextShieldTime || 0)) {
                        this.isInvincible = true;
                        if (this.element && this.element.classList) this.element.classList.add('invincible');
                        this.shieldEndTime = now + this.shieldDuration;
                        addLog(`${this.team} ì‰´ë”ê°€ ë¬´ì ì„ í™œì„±í™”í–ˆìŠµë‹ˆë‹¤! (2ì´ˆ)`, true);
                        this.flashHealthBar();
                    }
                }

                if (now < this.nextAttackTime) return;

                if (this.type === 'cave') {
                    if (this.nextSpawnTime === 0) {
                        this.nextSpawnTime = now + this.firstSpawnInterval;
                        return;
                    }
                    
                    if (now >= this.nextSpawnTime) {
                        if (this.hp > this.spawnCost) {
                            this.hp -= this.spawnCost;
                            this.updateDisplay();
                            
                            const spawnedUnit = new Unit(this.spawnType, this.team, 1, 20, Math.random() * 1000);
                            spawnedUnit.row = 'front';
                            spawnedUnit.x = this.x + (this.team === units.team1[0].team ? 50 : -50);
                            spawnedUnit.y = this.y + (Math.random() - 0.5) * 40;
                            
                            if (this.team === units.team1[0].team) {
                                units.team1.push(spawnedUnit);
                            } else {
                                units.team2.push(spawnedUnit);
                            }
                            
                            const sideId = this.team === units.team1[0].team ? 'team1-side' : 'team2-side';
                            const side = document.getElementById(sideId);
                            if (side) {
                                spawnedUnit.element.style.transform = `translate(${spawnedUnit.x}px, ${spawnedUnit.y}px)`;
                                side.appendChild(spawnedUnit.element);
                                spawnedUnit.element.classList.add(this.team === units.team1[0].team ? 'team1' : 'team2');
                                spawnedUnit.setTeamColor();
                            }
                            
              const typeLabel = this.spawnType === 'knight' ? 'ê¸°ì‚¬' : 
                  this.spawnType === 'archer' ? 'ê¶ìˆ˜' : 
                  this.spawnType === 'snowman' ? 'ìƒˆì¡ì´' : 
                  this.spawnType === 'ninja' ? 'ë‹Œì' : 
                  this.spawnType === 'golem' ? 'ê³¨ë ˜' : 
                  this.spawnType === 'shielder' ? 'ì‰´ë”' : 
                  this.spawnType === 'healer' ? 'íëŸ¬' : 
                  this.spawnType === 'hammerman' ? 'í•´ë¨¸ë§¨' : 
                  this.spawnType === 'bomberman' ? 'í­íƒ„ë³‘' :
                  this.spawnType === 'orc' ? 'ì˜¤í¬' :
                  this.spawnType === 'angel' ? 'ì²œì‚¬' :
                  this.spawnType === 'satan' ? 'ì‚¬íƒ„' :
                  this.spawnType === 'cave' ? 'ë™êµ´' :
                  this.spawnType === 'unicorn' ? 'ìœ ë‹ˆì½˜' :
                  this.spawnType === 'spirit' ? 'ì •ë ¹' :
                  this.spawnType === 'cloud' ? 'êµ¬ë¦„' :
                  this.spawnType === 'tree' ? 'ë‚˜ë¬´' :
                  this.spawnType === 'fairy' ? 'ìš”ì •' :
                  this.spawnType === 'butterfly' ? 'ë‚˜ë¹„' :
                  this.spawnType === 'pyramid' ? 'ë…ì‚¬' : 'ì•Œ ìˆ˜ ì—†ìŒ';
                  this.spawnType === 'tinyrobot' ? 'ê¼¬ë§ˆë¡œë´‡' :
                  this.spawnType === 'minihelicopter' ? 'ë¯¸ë‹ˆ í—¬ë¦¬ì½¥í„°' :
                  this.spawnType === 'killergear' ? 'ì‚´ì¸ ê¸°ì–´' : 
                  this.spawnType === 'advancedrepairshop' ? 'ì •ë¹„ì†Œ' :
addLog(`${this.team} ë™êµ´ì´ ${typeLabel}ì„(ë¥¼) ì†Œí™˜í–ˆìŠµë‹ˆë‹¤! (ì²´ë ¥ -${this.spawnCost})`, true);
                        }
                        this.nextSpawnTime = now + this.spawnInterval;
                    }
                    return;
                }

            if (this.type === 'angel') {
    if (now < this.nextReviveCheckTime) {
        // ë¶€í™œ ëŠ¥ë ¥ì´ ì—†ëŠ” ì²œì‚¬ëŠ” ì¼ë°˜ ê³µê²©ìœ¼ë¡œ ë„˜ì–´ê°
        if (!this.canRevive) {
            // ì•„ë˜ ì¼ë°˜ ê³µê²© ë¡œì§ìœ¼ë¡œ ê³„ì† ì§„í–‰
        } else {
            return;
        }
    } else {
        // ë¶€í™œ ëŠ¥ë ¥ì´ ìˆëŠ” ì²œì‚¬ë§Œ ë¶€í™œ ì‹œë„
  if (this.canRevive && this.recentDeaths && this.recentDeaths.length > 0 && this.reviveCount > 0) {
    const death = this.recentDeaths.shift();
    const deadUnit = death.unit;

   
    
    if (deadUnit.type === 'angel' || deadUnit.type === 'cave' ||  deadUnit.type === 'fairy' || deadUnit.type === 'butterfly' || deadUnit.type === 'spirit' || deadUnit.type === 'killergear' || deadUnit.type === 'tinyrobot' || deadUnit.type === 'advancedrepairshop') {
        this.nextReviveCheckTime = now + this.reviveCheckInterval;
        return;
    }
            const costToRevive = (deadUnit.theme === 'mythology') ? 1 : 2;
            
            if (costToRevive === 2 && this.reviveCount === 1) {
                this.nextReviveCheckTime = now + this.reviveCheckInterval;
                return;
            }
            
            if (this.reviveCount >= costToRevive) {
                if (deadUnit.deathTimeout) {
                    clearTimeout(deadUnit.deathTimeout);
                    deadUnit.deathTimeout = null;
                }
                
                deadUnit.alive = true;
                deadUnit.hp = Math.floor(deadUnit.maxHp * 0.5);
                deadUnit.x = death.x;
                deadUnit.y = death.y;
                
                deadUnit.element.classList.remove('dead');
                deadUnit.element.style.opacity = '1';
                deadUnit.element.style.transform = `translate(${deadUnit.x}px, ${deadUnit.y}px)`;
                
                const sideId = this.team === units.team1[0].team ? 'team1-side' : 'team2-side';
                const side = document.getElementById(sideId);
                if (side && !deadUnit.element.parentNode) {
                    side.appendChild(deadUnit.element);
                }
                
                deadUnit.updateDisplay();
                
                const team1Side = document.getElementById('team1-side');
                const team2Side = document.getElementById('team2-side');
                const enemies = this.team === units.team1[0].team ? units.team2 : units.team1;
                
                if (team1Side && team2Side) {
                    const team1Rect = team1Side.getBoundingClientRect();
                    const team2Rect = team2Side.getBoundingClientRect();
                    const allyRect = this.team === units.team1[0].team ? team1Rect : team2Rect;
                    const enemyRect = this.team === units.team1[0].team ? team2Rect : team1Rect;
                    const enemySide = this.team === units.team1[0].team ? team2Side : team1Side;
                    
                    const revivedAbsX = allyRect.left + deadUnit.x;
                    const revivedAbsY = allyRect.top + deadUnit.y;
                    
                    enemies.forEach(enemy => {
                        if (enemy.alive) {
                            const enemyAbsX = enemyRect.left + enemy.x;
                            const enemyAbsY = enemyRect.top + enemy.y;
                            const distToEnemy = Math.sqrt((enemyAbsX - revivedAbsX) ** 2 + (enemyAbsY - revivedAbsY) ** 2);
                            
                            if (distToEnemy <= 150) {
                                const pushAmount = 200;
                                if (this.team === units.team1[0].team) {
                                    enemy.x = Math.min(enemy.x + pushAmount, enemySide.offsetWidth - 40);
                                } else {
                                    enemy.x = Math.max(enemy.x - pushAmount, 40);
                                }
                                enemy.element.style.transform = `translate(${enemy.x}px, ${enemy.y}px)`;
                            }
                        }
                    });
                }
                
                this.reviveCount -= costToRevive;
                this.updateReviveCounter();
                
                const unitLabel = deadUnit.type === 'knight' ? 'ê¸°ì‚¬' : deadUnit.type === 'archer' ? 'ê¶ìˆ˜' : deadUnit.type === 'snowman' ? 'ìƒˆì¡ì´' : deadUnit.type === 'golem' ? 'ê³¨ë ˜' : deadUnit.type === 'healer' ? 'íëŸ¬' : deadUnit.type === 'shielder' ? 'ì‰´ë”' : deadUnit.type === 'hammerman' ? 'í•´ë¨¸ë§¨' : deadUnit.type === 'ninja' ? 'ë‹Œì' : deadUnit.type === 'orc' ? 'ì˜¤í¬' : deadUnit.type === 'bomberman' ? 'í­íƒ„ë³‘' : '';
                addLog(`${this.team} ì²œì‚¬ê°€ ${unitLabel}ì„(ë¥¼) ë¶€í™œì‹œì¼°ìŠµë‹ˆë‹¤! (ë‚¨ì€ íšŸìˆ˜: ${this.reviveCount})`, true);
            }
        }
        
        this.nextReviveCheckTime = now + this.reviveCheckInterval;
        
        // ë¶€í™œ ëŠ¥ë ¥ì´ ì—†ëŠ” ì²œì‚¬ëŠ” ì—¬ê¸°ì„œ return ì•ˆí•¨
        if (this.canRevive) {
            return;
        }
    }
}

                if (this.type === 'bomberman') {
                    const team1Side = document.getElementById('team1-side');
                    const team2Side = document.getElementById('team2-side');
                    
                    if (team1Side && team2Side) {
                        const team1Rect = team1Side.getBoundingClientRect();
                        const team2Rect = team2Side.getBoundingClientRect();
                        
                        let unitAbsX, unitAbsY, targetAbsX, targetAbsY;
                        if (this.team === units.team1[0].team) {
                            unitAbsX = team1Rect.left + this.x;
                            unitAbsY = team1Rect.top + this.y;
                            targetAbsX = team2Rect.left + target.x;
                            targetAbsY = team2Rect.top + target.y;
                        } else {
                            unitAbsX = team2Rect.left + this.x;
                            unitAbsY = team2Rect.top + this.y;
                            targetAbsX = team1Rect.left + target.x;
                            targetAbsY = team1Rect.top + target.y;
                        }
                        
                        const dx = targetAbsX - unitAbsX;
                        const dy = targetAbsY - unitAbsY;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance <= this.range && target.alive) {
                            const bombExplosionTime = now + this.bombDuration;
                            this.bombs.push({ target: target, placedTime: now, explosionTime: bombExplosionTime });
                            addLog(`${this.team} í­íƒ„ë³‘ì´ ${target.team}ì—ê²Œ í­íƒ„ì„ ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤!`, false);
                            this.nextAttackTime = now + this.attackSpeed;
                        }
                    }
                    return;
                }

                const team1Side = document.getElementById('team1-side');
                const team2Side = document.getElementById('team2-side');
                
                let unitAbsX, unitAbsY, targetAbsX, targetAbsY;
                
                if (team1Side && team2Side) {
                    const team1Rect = team1Side.getBoundingClientRect();
                    const team2Rect = team2Side.getBoundingClientRect();
                    
                    if (this.team === units.team1[0].team) {
                        unitAbsX = team1Rect.left + this.x;
                        unitAbsY = team1Rect.top + this.y;
                        targetAbsX = team2Rect.left + target.x;
                        targetAbsY = team2Rect.top + target.y;
                    } else {
                        unitAbsX = team2Rect.left + this.x;
                        unitAbsY = team2Rect.top + this.y;
                        targetAbsX = team1Rect.left + target.x;
                        targetAbsY = team1Rect.top + target.y;
                    }
                    
                    const dx = targetAbsX - unitAbsX;
                    const dy = targetAbsY - unitAbsY;
const distance = Math.sqrt(dx * dx + dy * dy);

if (distance > this.range) return;

// ìœ ë‹ˆì½˜ ê³µê²©
if (this.type === 'unicorn') {
    if (this.chargeLevel >= 2) {
        let unicornDamage = this.damage * damageMultiplier;
        target.takeDamage(unicornDamage);
        addLog(`${this.team} ìœ ë‹ˆì½˜ì´ ì°¨ì§€ ê³µê²©! (${Math.floor(unicornDamage)} ë°ë¯¸ì§€)`, true);
        
        const sideEl = this.team === units.team1[0].team ? team1Side : team2Side;
        if (this.team === units.team1[0].team) {
            this.x = Math.max(0, this.x - 200);
        } else {
            this.x = Math.min(sideEl.offsetWidth - 40, this.x + 200);
        }
        this.element.style.transform = `translate(${this.x}px, ${this.y}px)`;
        
        this.chargeLevel = 0;
        this.damage = this.baseDamage;
        this.updateChargeDisplay();
        addLog(`${this.team} ìœ ë‹ˆì½˜ì´ í›„í‡´! ì°¨ì§€ ë¦¬ì…‹`, true);
        
        this.nextAttackTime = now + this.attackSpeed;
        return;
    } else {
        return;
    }
}

// í”¼ë¼ë¯¸ë“œ ê³µê²©
if (this.type === 'pyramid') {
    const damage = this.damage * damageMultiplier;
    const enemies = this.team === units.team1[0].team ? units.team2 : units.team1;
    const targetRect = this.team === units.team1[0].team ? team2Rect : team1Rect;
    
    target.takeDamage(damage);
    
    enemies.forEach(enemy => {
        if (enemy.alive) {
            const enemyAbsX = targetRect.left + enemy.x;
            const enemyAbsY = targetRect.top + enemy.y;
            const targetAbsX = targetRect.left + target.x;
            const targetAbsY = targetRect.top + target.y;
            const dist = Math.sqrt((enemyAbsX - targetAbsX) ** 2 + (enemyAbsY - targetAbsY) ** 2);
            
            if (dist <= this.splashRange) {
                if (enemy !== target) {
                    enemy.takeDamage(damage);
                }
                
                if (!enemy.sandDebuff || !enemy.sandDebuff.active) {
                    enemy.sandDebuff = {
                        active: true,
                        ticksLeft: 3,
                        damage: 5,
                        interval: 1000,
                        nextTickTime: now + 1000,
                        healReduction: 0.5
                    };
                    addLog(`${this.team} ë…ì‚¬ â†’ ${enemy.team} ${enemy.type} ë§¹ë…!`, true);
                }
            }
        }
    });
    
    this.nextAttackTime = now + this.attackSpeed;
    return;
}

// ì¼ë°˜ ìœ ë‹› ê³µê²©
let damage = this.damage * damageMultiplier;      
                }

               let damage = this.damage * damageMultiplier;

                let attackDelay = this.attackSpeed;

                if (Math.random() * 100 < this.specialChance) {
                    damage = Math.floor(damage * 1.2);
                    this.flashHealthBar();
                    addLog(`${this.team} ${this.type === 'knight' ? 'ê¸°ì‚¬' : this.type === 'archer' ? 'ê¶ìˆ˜' : ''} ì¹˜ëª…! (+20%) (${Math.floor(damage)} ë°ë¯¸ì§€)`, true);
                }

                if (this.type === 'knight') {
                    this.createSlashEffect(target);
                } else if (this.type === 'archer') {
                    this.createArrowEffect(target);
                } else if (this.type === 'golem') {
                    this.createSplashEffect(target);
                }

                target.takeDamage(damage);
                
               // attack í•¨ìˆ˜ì˜ ì‚¬íƒ„ ë¹™ì˜ ë¶€ë¶„ì„ ì´ë ‡ê²Œ ìˆ˜ì •:
if (this.type === 'satan' && target.alive && !target.isPossessed && target.type !== 'angel' && target.type !== 'cave' && target.type !== 'tree') {
    
    // â­ ë³´ìŠ¤ëŠ” ë¹™ì˜ ë¶ˆê°€, ëŒ€ì‹  ê°•ë ¥í•œ ê³µê²©
    if (target.type === 'boss') {
        let damage = 70 * damageMultiplier;  // 10 â†’ 55
        target.takeDamage(damage);
        addLog(`${this.team} ì‚¬íƒ„ì´ ë³´ìŠ¤ë¥¼ ê³µê²©! ë³´ìŠ¤ëŠ” ë¹™ì˜ì‹œí‚¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤, ê·¸ëŸ¬ë‚˜ ${Math.floor(damage)}ë¡œ ë°ë¯¸ì§€ ìƒìŠ¹!)`, true);
        this.nextAttackTime = now + this.attackSpeed;
        return;
    }

    // â˜… ë§¤ë²ˆ ë°ë¯¸ì§€ ì ìš©
    let damage = this.damage * damageMultiplier;
    target.takeDamage(damage);
    addLog(`${this.team} ì‚¬íƒ„ì´ ${target.team}ë¥¼ ê³µê²©! (${Math.floor(damage)} ë°ë¯¸ì§€)`, false);
    
    // ì£½ì—ˆìœ¼ë©´ ë¹™ì˜ ì•ˆí•¨
    if (!target.alive) {
        this.nextAttackTime = now + this.attackSpeed;
        return;
    }
    
    // â˜… ë¹™ì˜ ì „ ì¶”ê°€ 30 HP ê°ì†Œ
    target.hp -= 0;
    if (target.hp <= 0) {
        target.hp = 0;
        target.alive = false;
        target.element.classList.add('dead');
        setTimeout(() => {
            if (target.element && target.element.parentNode) {
                target.element.parentNode.removeChild(target.element);
            }
        }, 1000);
        this.nextAttackTime = now + this.attackSpeed;
        addLog(`${target.team}ì´(ê°€) ë¹™ì˜ ì¤‘ ì‚¬ë§í–ˆìŠµë‹ˆë‹¤!`, false);
        return;
    }
    target.updateDisplay();
    addLog(`${this.team} ì‚¬íƒ„ì˜ ë¹™ì˜ë¡œ ì¶”ê°€ 30 ë°ë¯¸ì§€!`, true);
    
    // ë¹™ì˜
    target.isPossessed = true;
    target.originalTeam = target.team;  
  
    // â˜… ë¹™ì˜
    target.isPossessed = true;
    target.originalTeam = target.team;
    target.originalType = target.type;
    target.originalMaxHp = target.maxHp;
    target.originalCurrentHp = target.hp; 
    target.originalDamage = target.damage;
    target.originalAttackSpeed = target.attackSpeed;
    target.originalRange = target.range;
    target.originalSpeed = target.speed;
    target.originalBaseDamage = target.baseDamage || target.damage;
    target.originalBaseAttackSpeed = target.baseAttackSpeed || target.attackSpeed;
    
    // (ë‚˜ë¨¸ì§€ ë¹™ì˜ ë¡œì§ ê³„ì†...)
    // ë°°ì—´ì—ì„œ ì´ë™
    const enemyArray = target.team === units.team1[0].team ? units.team1 : units.team2;
    const allyArray = this.team === units.team1[0].team ? units.team1 : units.team2;
    
    const index = enemyArray.indexOf(target);
    if (index > -1) {
        enemyArray.splice(index, 1);
    }
    allyArray.push(target);
    
    // DOM elementë„ ì´ë™
    const enemySide = target.team === units.team1[0].team ? document.getElementById('team1-side') : document.getElementById('team2-side');
    const allySide = this.team === units.team1[0].team ? document.getElementById('team1-side') : document.getElementById('team2-side');
    
    // â˜… í˜„ì¬ ì ˆëŒ€ ìœ„ì¹˜ ì €ì¥
    const team1Side = document.getElementById('team1-side');
    const team2Side = document.getElementById('team2-side');
    const team1Rect = team1Side.getBoundingClientRect();
    const team2Rect = team2Side.getBoundingClientRect();
    
    const targetWasInTeam1 = target.team === units.team1[0].team;
    const targetOldRect = targetWasInTeam1 ? team1Rect : team2Rect;
    const targetAbsX = targetOldRect.left + target.x;
    const targetAbsY = targetOldRect.top + target.y;
    
    if (target.element.parentNode === enemySide) {
        enemySide.removeChild(target.element);
        allySide.appendChild(target.element);
        
        // â˜… ì ˆëŒ€ ìœ„ì¹˜ë¥¼ ìƒˆë¡œìš´ sideì˜ ìƒëŒ€ ìœ„ì¹˜ë¡œ ë³€í™˜
        const newRect = this.team === units.team1[0].team ? team1Rect : team2Rect;
        target.x = targetAbsX - newRect.left;
        target.y = targetAbsY - newRect.top;
        target.element.style.transform = `translate(${target.x}px, ${target.y}px)`;
    }
    
    // (ë‚˜ë¨¸ì§€ ì½”ë“œ ê³„ì†... ì£¼ë³€ ìœ ë‹› ë°€ì¹˜ê¸°, ëŠ¥ë ¥ì¹˜ ë³€ê²½ ë“±)
    
    // â˜… ì£¼ë³€ ìœ ë‹› ë°€ì³ë‚´ê¸°
// â˜… ì£¼ë³€ ì êµ°ë§Œ ë°€ì³ë‚´ê¸°
const pushRadius = 150;
const pushStrength = 100;
const pushDamage = 10;  // â˜… ë°€ì¹¨ ë°ë¯¸ì§€
const enemies = this.team === units.team1[0].team ? units.team2 : units.team1;

enemies.forEach(u => {
    if (u !== target && u.alive) {
        const uInTeam1 = units.team1.includes(u);
        const uRect = uInTeam1 ? team1Rect : team2Rect;
        const uSide = uInTeam1 ? team1Side : team2Side;
        const uAbsX = uRect.left + u.x;
        const uAbsY = uRect.top + u.y;
        
        const dx = uAbsX - targetAbsX;
        const dy = uAbsY - targetAbsY;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        if (distance < pushRadius && distance > 0) {
            const pushX = (dx / distance) * pushStrength;
            const pushY = (dy / distance) * pushStrength;
            
         
            
            // â˜… ì¶”ê°€ ë°ë¯¸ì§€
            u.takeDamage(pushDamage);
            addLog(`${u.team}ì´(ê°€) ë¹™ì˜ ì¶©ê²©íŒŒë¡œ ${pushDamage} ë°ë¯¸ì§€!`, false);
        }
    }
});

    // íŒ€ê³¼ ëŠ¥ë ¥ì¹˜ ë³€ê²½
    target.team = this.team;
    target.type = 'orc';
    target.maxHp = 110;
    target.hp = target.maxHp;
    target.baseDamage = 20;
    target.damage = 20;
    target.baseAttackSpeed = 2500;
    target.attackSpeed = 2500;
    target.range = 60;
    target.speed = 2.5;
    target.possessionEndTime = now + this.possessionDuration;
    target.isInvincible = true;
    
    // ì•„ë°”íƒ€ ë³€ê²½
    const avatar = target.element.querySelector('.soldier-avatar');
    if (avatar) {
        avatar.textContent = 'ğŸ–¤';
        avatar.style.filter = 'hue-rotate(180deg)';
    }
    
    // CSS í´ë˜ìŠ¤ ë³€ê²½
    target.element.classList.remove('team1', 'team2');
    if (this.team === units.team1[0].team) {
        target.element.classList.add('team1');
    } else {
        target.element.classList.add('team2');
    }
    
    target.updateDisplay();
    target.setTeamColor();
    
    addLog(`${this.team} ì‚¬íƒ„ì´ ${target.originalTeam}ì˜ ${target.originalType}ì„(ë¥¼) ë¹™ì˜ì‹œì¼œ ì˜¤í¬ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤! (4ì´ˆê°„)`, true);
}

                if (this.type === 'hammerman' && this.splashRange) {
                    const team1Side = document.getElementById('team1-side');
                    const team2Side = document.getElementById('team2-side');
                    const enemies = this.team === units.team1[0].team ? units.team2 : units.team1;
                    if (team1Side && team2Side) {
                        const team1Rect = team1Side.getBoundingClientRect();
                        const team2Rect = team2Side.getBoundingClientRect();
                        const targetRect = this.team === units.team1[0].team ? team2Rect : team1Rect;
                        const targetSide = this.team === units.team1[0].team ? team2Side : team1Side;

                        const pushAmount = 120;
                        if (target && target.alive) {
                            if (this.team === units.team1[0].team) {
                                target.x = Math.min(target.x + pushAmount, targetSide.offsetWidth - 40);
                            } else {
                                target.x = Math.max(target.x - pushAmount, 40);
                            }
                            target.element.style.transform = `translate(${target.x}px, ${target.y}px)`;
                        }

                        enemies.forEach(enemy => {
                            if (enemy !== target && enemy.alive) {
                                const enemyAbsX = targetRect.left + enemy.x;
                                const enemyAbsY = targetRect.top + enemy.y;
                                const targetAbsX = targetRect.left + target.x;
                                const targetAbsY = targetRect.top + target.y;
                                const distToEnemy = Math.sqrt((enemyAbsX - targetAbsX) ** 2 + (enemyAbsY - targetAbsY) ** 2);
                                if (distToEnemy <= this.splashRange) {
                                    const splashDamage = Math.floor(damage * 0.5);
                                    enemy.takeDamage(splashDamage);
                                    addLog(`${this.team} í•´ë¨¸ë§¨ì˜ ìŠ¤í”Œë˜ì‹œ! (${Math.floor(splashDamage)} ë°ë¯¸ì§€)`, false);
                                    if (this.team === units.team1[0].team) {
                                        enemy.x = Math.min(enemy.x + pushAmount, targetSide.offsetWidth - 40);
                                    } else {
                                        enemy.x = Math.max(enemy.x - pushAmount, 40);
                                    }
                                    enemy.element.style.transform = `translate(${enemy.x}px, ${enemy.y}px)`;
                                }
                            }
                        });
                        addLog(`${this.team} í•´ë¨¸ë§¨ì˜ ê°•íƒ€ë¡œ ì ë“¤ì´ ë„‰ë°±ë˜ì—ˆìŠµë‹ˆë‹¤!`, true);
                    }
                }
                
                if (this.type === 'golem' && this.splashRange) {
                    const team1Side = document.getElementById('team1-side');
                    const team2Side = document.getElementById('team2-side');
                    const enemies = this.team === units.team1[0].team ? units.team2 : units.team1;
                    
                    if (team1Side && team2Side) {
                        const team1Rect = team1Side.getBoundingClientRect();
                        const team2Rect = team2Side.getBoundingClientRect();
                        const targetRect = this.team === units.team1[0].team ? team2Rect : team1Rect;
                        
                        enemies.forEach(enemy => {
                            if (enemy !== target && enemy.alive) {
                                const enemyAbsX = targetRect.left + enemy.x;
                                const enemyAbsY = targetRect.top + enemy.y;
                                const targetAbsX = targetRect.left + target.x;
                                const targetAbsY = targetRect.top + target.y;
                                
                                const distToEnemy = Math.sqrt((enemyAbsX - targetAbsX) ** 2 + (enemyAbsY - targetAbsY) ** 2);
                                if (distToEnemy <= this.splashRange) {
                                    const splashDamage = damage * 0.5;
                                    enemy.takeDamage(splashDamage);
                                    addLog(`${this.team} ê³¨ë ˜ì˜ ìŠ¤í”Œë˜ì‹œ! (${Math.floor(splashDamage)} ë°ë¯¸ì§€)`, false);
                                }
                            }
                        });
                    }
                }
                
                const typeLabel = this.type === 'knight' ? 'ê¸°ì‚¬' : this.type === 'archer' ? 'ê¶ìˆ˜' : this.type === 'snowman' ? 'ìƒˆì¡ì´' : this.type === 'healer' ? 'íëŸ¬' : this.type === 'shielder' ? 'ì‰´ë”' : this.type === 'hammerman' ? 'í•´ë¨¸ë§¨' : this.type === 'ninja' ? 'ë‹Œì' : this.type === 'orc' ? 'ì˜¤í¬' : this.type === 'angel' ? 'ì²œì‚¬' : 'ê³¨ë ˜';
                if (this.type !== 'golem' && this.type !== 'angel') {
                    addLog(`${this.team} ${typeLabel}ê°€ ${target.team}ë¥¼ ê³µê²©! (${Math.floor(damage)} ë°ë¯¸ì§€)`, false);
                } else if (this.type === 'golem') {
                    addLog(`${this.team} ê³¨ë ˜ì´ ${target.team}ë¥¼ ê³µê²©! (${Math.floor(damage)} ë°ë¯¸ì§€)`, false);
                }

                this.nextAttackTime = now + attackDelay;
            }

            createSlashEffect(target) {}
            createArrowEffect(target) {}
            createCritEffect(text) {}
            createSplashEffect(target) {}

            flashHealthBar() {
                const healthFill = this.infoElement.querySelector('.health-fill');
                if (healthFill) {
                    healthFill.classList.remove('special-flash');
                    void healthFill.offsetWidth;
                    healthFill.classList.add('special-flash');
                }
            }

            showCooldownReduction() {
                const indicator = document.createElement('div');
                indicator.className = 'cooldown-reduction';
                indicator.textContent = 'ğŸ•';
                this.element.appendChild(indicator);
                setTimeout(() => indicator.remove(), 600);
            }
            
      updateReviveCounter() {
    if (this.type === 'angel') {
        const counterDiv = this.element.querySelector('.revive-counter');
        if (counterDiv) {
            counterDiv.textContent = `ë¶€í™œ: ${this.reviveCount}`;
        }
    }
}
        
updateChargeDisplay() {
    if (this.type === 'unicorn') {
        const chargeDiv = this.element.querySelector('.charge-level');
        if (chargeDiv) {
            chargeDiv.textContent = `ì°¨ì§€: ${this.chargeLevel} (${this.damage})`;
        }
    }
}
        }

        // ë³´ìŠ¤ì „ ì—´ê¸°
function openBossMode() {
    bossMode = {
        active: true,
        round: 1,
        selectedUnits: [],
        currentCards: [],
        maxRecord: 0
    };
    
    document.getElementById('bossModeModal').classList.add('active');
    document.getElementById('bossModalTitle').textContent = 'ğŸ‘‘ ë³´ìŠ¤ì „ - ë¼ìš´ë“œ 1';
    document.getElementById('bossCardSelection').style.display = 'block';
    document.getElementById('bossRoundResult').style.display = 'none';
    
    generateCards(3);
    updateBossUI();
}

// ë³´ìŠ¤ì „ ë‹«ê¸°
function closeBossMode() {
    document.getElementById('bossModeModal').classList.remove('active');
    bossMode.active = false;
}

// ì¹´ë“œ ìƒì„±
function generateCards(count) {
    const allUnitTypes = [
        'knight', 'archer', 'snowman', 'shielder', 
        'hammerman', 'bomberman', 'ninja',
        'orc', 'cloud', 'satan', 'golem', 'unicorn', 'spirit', 'pyramid','tinyrobot','minihelicopter','killergear',
    ];
    
    bossMode.currentCards = [];
    for (let i = 0; i < count; i++) {
        const randomType = allUnitTypes[Math.floor(Math.random() * allUnitTypes.length)];
        const randomPosition = Math.random() < 0.5 ? 'front' : 'back';
        bossMode.currentCards.push({ type: randomType, position: randomPosition });
    }
    
    displayCards();
}

// ì¹´ë“œ í‘œì‹œ
function displayCards() {
    const container = document.getElementById('cardContainer');
    container.innerHTML = '';
    
    bossMode.currentCards.forEach((cardData, index) => {
        const unitInfo = unitDescriptions[cardData.type];
        const positionText = cardData.position === 'front' ? 'âš”ï¸ ì „ë°©' : 'ğŸ›¡ï¸ í›„ë°©';
        const positionColor = cardData.position === 'front' ? '#ff6b6b' : '#4ecdc4';
        
        const card = document.createElement('div');
        card.className = 'boss-card';
        card.innerHTML = `
            <div class="boss-card-icon">${unitInfo.icon}</div>
            <div class="boss-card-name">${unitInfo.name}</div>
            <div style="font-size: 14px; color: ${positionColor}; font-weight: bold; margin-bottom: 10px;">${positionText}</div>
            <div class="boss-card-stats">${unitInfo.stats.replace(/\n/g, '<br>')}</div>
            <button class="boss-card-select" onclick="selectCard(${index})">ì„ íƒ</button>
        `;
        container.appendChild(card);
    });
}

function selectCard(cardIndex) {
    if (bossMode.selectedUnits.length >= 5) {
        alert('ì´ë¯¸ 5ê°œì˜ ìœ ë‹›ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤!');
        return;
    }
    
    // ì„ íƒí•œ ì¹´ë“œì˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    const selectedCard = bossMode.currentCards[cardIndex];
    
    // ìœ ë‹› ì¶”ê°€
    bossMode.selectedUnits.push({
        type: selectedCard.type,
        position: selectedCard.position
    });
    
    // ì„ íƒ í›„ ëª¨ë“  ì¹´ë“œ ìƒˆë¡œê³ ì¹¨
    generateCards(3);
    
    updateBossUI();
}

// ì„ íƒëœ ìœ ë‹› ì œê±°
function removeSelectedUnit(index) {
    bossMode.selectedUnits.splice(index, 1);
    updateBossUI();
}

// UI ì—…ë°ì´íŠ¸
function updateBossUI() {
    document.getElementById('selectedCount').textContent = bossMode.selectedUnits.length;
    
    // ì„ íƒëœ ìœ ë‹› í‘œì‹œ
    const listContainer = document.getElementById('selectedUnitsList');
    listContainer.innerHTML = '';
    
    bossMode.selectedUnits.forEach((unitData, index) => {
        // unitDataê°€ ê°ì²´ì¸ì§€ í™•ì¸
        const unitType = typeof unitData === 'string' ? unitData : unitData.type;
        const unitPosition = typeof unitData === 'string' ? 'front' : unitData.position;
        
        const unitInfo = unitDescriptions[unitType];
        if (!unitInfo) {
            console.error('ìœ ë‹› ì •ë³´ ì—†ìŒ:', unitType);
            return;
        }
        
        const positionText = unitPosition === 'front' ? 'ì „ë°©' : 'í›„ë°©';
        const item = document.createElement('div');
        item.className = 'selected-unit-item';
        item.innerHTML = `
            <div class="unit-icon">${unitInfo.icon}</div>
            <div>
                <div>${unitInfo.name}</div>
                <div style="font-size: 11px; color: #ffd700;">${positionText}</div>
            </div>
            <button class="remove-btn" onclick="removeSelectedUnit(${index})">Ã—</button>
        `;
        listContainer.appendChild(item);
    });
    
    // ì‹œì‘ ë²„íŠ¼
    const startBtn = document.getElementById('startBossBtn');
    if (bossMode.selectedUnits.length === 5) {
        startBtn.disabled = false;
        if (bossMode.round === 1) {
            startBtn.textContent = 'âš”ï¸ ë³´ìŠ¤ì „ ì‹œì‘';
        } else {
            startBtn.textContent = `âš”ï¸ ë¼ìš´ë“œ ${bossMode.round} ì‹œì‘`;
        }
        startBtn.onclick = startBossBattle;
    } else {
        startBtn.disabled = true;
    }
}

// ë¦¬ë¡¤
function rerollCards() {
    if (bossMode.rerollsLeft <= 0) {
        alert('ë¦¬ë¡¤ íšŸìˆ˜ë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤!');
        return;
    }
    
    bossMode.rerollsLeft--;
    const cardCount = bossMode.round === 1 ? 3 : 4;
    generateCards(cardCount);
    updateBossUI();
}

function startBossBattle() {
    closeBossMode();
    
    console.log('ì „íˆ¬ ì‹œì‘ - ì„ íƒëœ ìœ ë‹›:', bossMode.selectedUnits); // ë””ë²„ê¹…
    
    resetBattle();
    battleActive = true;
    bossMode.active = true;
    
    const playerTeam = 'í”Œë ˆì´ì–´';
    const bossTeam = 'ë³´ìŠ¤';
    
    // í”Œë ˆì´ì–´ ìœ ë‹› ìƒì„± â­ ìˆ˜ì •
    bossMode.selectedUnits.forEach((unitData, index) => {
        console.log(`ìœ ë‹› ${index} ìƒì„±:`, unitData); // ë””ë²„ê¹…
        
        // â­ í•µì‹¬: unitData.typeìœ¼ë¡œ ì ‘ê·¼!
        const unit = new Unit(unitData.type, playerTeam, 1, 20, index);
        unit.row = unitData.position; // â­ ìœ„ì¹˜ë„ ì„¤ì •
        units.team1.push(unit);
    });
    
    // ë³´ìŠ¤ ìƒì„±
const boss = new Unit('boss', bossTeam, 1, 0, 0);
boss.row = 'front';

// ë¼ìš´ë“œë§ˆë‹¤ ì²´ë ¥ 10 ì¦ê°€
boss.maxHp = 750 + ((bossMode.round - 1) * 25);
boss.hp = boss.maxHp;

// â˜… ì´ ë¶€ë¶„ì„ ì¶”ê°€/ìˆ˜ì •:
if (boss.infoElement) {
    const healthFill = boss.infoElement.querySelector('.health-fill');
    if (healthFill) {
        const hpPercent = (boss.hp / boss.maxHp) * 100;
        healthFill.style.width = `${hpPercent}%`;
    }
    const hpText = boss.infoElement.querySelector('.hp-text');
    if (hpText) {
        hpText.textContent = Math.floor(boss.hp);
    }
}

units.team2.push(boss);
    renderBattlefield();
    addLog(`ğŸ‘‘ ë³´ìŠ¤ì „ ë¼ìš´ë“œ ${bossMode.round} ì‹œì‘!`);
    setBattleInterval();
}

// ë³´ìŠ¤ì „ ìŠ¹ë¦¬ ì²˜ë¦¬ (endBattle í•¨ìˆ˜ ìˆ˜ì • í•„ìš”)

    function startBattle() {
            if (battleActive) return;

            // íëŸ¬ ê°œìˆ˜ ì²´í¬ ë° ëŠ¥ë ¥ í™œì„±í™” (ì²˜ìŒ 3ê°œë§Œ)

                bossMode.active = false;

            
            
            resetBattle();
            battleActive = true;

                angelCount = { team1: 0, team2: 0 };
                window.repairShopCount = { team1: 0, team2: 0 };  // â† ì´ ì¤„ ì¶”ê°€!

            const team1Name = document.getElementById('team1Name').value;
            const team2Name = document.getElementById('team2Name').value;

       const unitTypes = [
    { name: 'Knight' },
    { name: 'Archer' },
    { name: 'Snowman' },
    { name: 'Golem' },
    { name: 'Shielder' },
    { name: 'Healer' },
    { name: 'Bomberman' },
    { name: 'Hammerman' },
    { name: 'Ninja' },
    { name: 'Orc' },
    { name: 'Angel' },
    { name: 'Satan' },
    { name: 'Cave' },
    { name: 'Unicorn' },
      { name: 'Spirit' },
      { name: 'Cloud' },
      { name: 'Tree' } ,
      { name: 'Pyramid' },
      { name: 'TinyRobot' },
      { name: 'MiniHelicopter' },
        { name: 'KillerGear' },
         { name: 'AdvancedRepairShop' },
         
];

            for (let i = 0; i < 2; i++) {
                const teamId = i + 1;
                const teamArray = units[`team${teamId}`];
                const teamName = teamId === 1 ? team1Name : team2Name;

                for (const unitConfig of unitTypes) {
                    const unitType = unitConfig.name;
                    const frontId = `team${teamId}${unitType}FrontCount`;
                    const backId = `team${teamId}${unitType}BackCount`;
                    const specialId = `team${teamId}${unitType}Special`;

                    const frontCount = parseInt(document.getElementById(frontId)?.value || '0');
                    const backCount = parseInt(document.getElementById(backId)?.value || '0');
                    const star = 1;
                    const special = parseInt(document.getElementById(specialId)?.value || '0');

                    for (let j = 0; j < frontCount; j++) {
                        const u = new Unit(unitType.toLowerCase(), teamName, star, special, j);
                        u.row = 'front';
                        if (unitType.toLowerCase() === 'cave') {
                            u.spawnType = document.getElementById(`team${teamId}CaveSpawnType`).value;
                        }
                        teamArray.push(u);
                    }
                    for (let j = 0; j < backCount; j++) {
                        const u = new Unit(unitType.toLowerCase(), teamName, star, special, j + frontCount);
                        u.row = 'back';
                        if (unitType.toLowerCase() === 'cave') {
                            u.spawnType = document.getElementById(`team${teamId}CaveSpawnType`).value;
                        }
                        teamArray.push(u);
                    }
                }
            }

            // íëŸ¬ ê°œìˆ˜ ì²´í¬ ë° ëŠ¥ë ¥ í™œì„±í™” (ì²˜ìŒ 3ê°œë§Œ)
const checkHealers = (teamArray, teamName) => {
    const healers = teamArray.filter(u => u.type === 'healer');
    
    healers.forEach((healer, index) => {
        if (index < 3) {
            // ì²˜ìŒ 3ê°œëŠ” í™œì„±í™”
            healer.canHeal = true;
        } else {
            // 4ë²ˆì§¸ë¶€í„°ëŠ” ë¹„í™œì„±í™”
            healer.canHeal = false;
            addLog(`âš ï¸ ${teamName}: ${index + 1}ë²ˆì§¸ íëŸ¬ëŠ” ëŠ¥ë ¥ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤! (ìµœëŒ€ 3ê°œ)`, true);
        }
    });
};

checkHealers(units.team1, team1Name);
checkHealers(units.team2, team2Name);

const checkTrees = (teamArray, teamName) => {
    const trees = teamArray.filter(u => u.type === 'tree');
    
    trees.forEach((tree, index) => {
        if (index === 0) {
            // ì²« ë²ˆì§¸ ë‚˜ë¬´ë§Œ í™œì„±í™”
            tree.canTaunt = true;
        } else {
            // ë‘ ë²ˆì§¸ë¶€í„°ëŠ” ë¹„í™œì„±í™”
            tree.canTaunt = false;
            addLog(`âš ï¸ ${teamName}: ${index + 1}ë²ˆì§¸ ë‚˜ë¬´ëŠ” ëŠ¥ë ¥ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤! (ìµœëŒ€ 1ê°œ)`, true);
        }
    });
};

checkTrees(units.team1, team1Name);
checkTrees(units.team2, team2Name);



renderBattlefield();

            renderBattlefield();
            addLog('âš”ï¸ ì „íˆ¬ ì‹œì‘! âš”ï¸');

            setBattleInterval();
        }

        function renderBattlefield() {
            battlefield.innerHTML = `
                <div class="armies-container">
                    <div class="army-side" id="team1-side">
                        <h3 id="team1-name"></h3>
                    </div>
                    <div class="army-side" id="team2-side">
                        <h3 id="team2-name"></h3>
                    </div>
                </div>
            `;

            const team1Side = document.getElementById('team1-side');
            const team2Side = document.getElementById('team2-side');

            document.getElementById('team1-name').textContent = units.team1[0].team;
            document.getElementById('team2-name').textContent = units.team2[0].team;

            const team1SideEl = document.getElementById('team1-side');
            const team2SideEl = document.getElementById('team2-side');
            if (!document.getElementById('team1-counts')) {
                const c1 = document.createElement('div');
                c1.id = 'team1-counts';
                c1.className = 'team-counts';
                c1.innerHTML = `<div class="summary">ë‚¨ì€: 0</div><div class="details"></div>`;
                team1SideEl.appendChild(c1);
            }
            if (!document.getElementById('team2-counts')) {
                const c2 = document.createElement('div');
                c2.id = 'team2-counts';
                c2.className = 'team-counts';
                c2.innerHTML = `<div class="summary">ë‚¨ì€: 0</div><div class="details"></div>`;
                team2SideEl.appendChild(c2);
            }

            updateTeamCounts();

            units.team1.forEach((unit, idx) => {
                const w = team1Side.offsetWidth;
                if (unit.row === 'front') {
                    unit.x = Math.floor(w * 0.45) + Math.random() * 40;
                    unit.y = 80 + (idx % 3) * 100 + Math.random() * 30;
                } else {
                    unit.x = 20 + Math.random() * 40;
                    unit.y = 120 + (idx % 3) * 120 + Math.random() * 40;
                }
                unit.element.style.transform = `translate(${unit.x}px, ${unit.y}px)`;
                team1Side.appendChild(unit.element);
                unit.element.classList.add('team1');
                unit.setTeamColor();
            });

            units.team2.forEach((unit, idx) => {
                const w = team2Side.offsetWidth;
                if (unit.row === 'front') {
                    unit.x = Math.floor(w * 0.05) + Math.random() * 40 + w * 0.45;
                    unit.y = 80 + (idx % 3) * 100 + Math.random() * 30;
                } else {
                    unit.x = w - 60 + Math.random() * 40;
                    unit.y = 120 + (idx % 3) * 120 + Math.random() * 40;
                }
                unit.element.style.transform = `translate(${unit.x}px, ${unit.y}px)`;
                team2Side.appendChild(unit.element);
                unit.element.classList.add('team2');
                unit.setTeamColor();

                // íëŸ¬/ë‚˜ë¬´ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ ì˜†ì— ì¶”ê°€
// íëŸ¬/ë‚˜ë¬´ ì²˜ë¦¬í•˜ëŠ” ë¶€ë¶„ ì˜†ì— ì¶”ê°€

// ìœ ë‹ˆì½˜ ì°¨ì§€ ì‹œìŠ¤í…œ ëë‚œ ì§í›„



                // battleLoop í•¨ìˆ˜ ì•ˆ, ìœ ë‹ˆì½˜ ì°¨ì§€ ì‹œìŠ¤í…œ ì•„ë˜ì— ì¶”ê°€
[...units.team1, ...units.team2].forEach(u => {
    if (u.type === 'tree' && u.alive && u.canTaunt && u.tauntedTarget) {
        const target = u.tauntedTarget;
        const elapsed = now - u.tauntStartTime;
        
        if (elapsed >= u.tauntDuration && target.alive) {
            // ê±°ë¦¬ ì²´í¬
            const team1Side = document.getElementById('team1-side');
            const team2Side = document.getElementById('team2-side');
            const team1Rect = team1Side.getBoundingClientRect();
            const team2Rect = team2Side.getBoundingClientRect();
            
            const treeInTeam1 = units.team1.includes(u);
            const targetInTeam1 = units.team1.includes(target);
            
            const treeAbsX = (treeInTeam1 ? team1Rect.left : team2Rect.left) + u.x;
            const treeAbsY = (treeInTeam1 ? team1Rect.top : team2Rect.top) + u.y;
            const targetAbsX = (targetInTeam1 ? team1Rect.left : team2Rect.left) + target.x;
            const targetAbsY = (targetInTeam1 ? team1Rect.top : team2Rect.top) + target.y;
            
            const distance = Math.sqrt((targetAbsX - treeAbsX) ** 2 + (targetAbsY - treeAbsY) ** 2);
            
            if (distance <= u.pushRange) {
                const targetSide = targetInTeam1 ? team1Side : team2Side;
                
                // ë‚˜ë¬´ íŒ€ ê¸°ì¤€ìœ¼ë¡œ ë°€ì–´ë‚´ê¸°
                if (treeInTeam1) {
                    target.x = Math.min(target.x + u.pushDistance, targetSide.offsetWidth - 40);
                } else {
                    target.x = Math.max(target.x - u.pushDistance, 40);
                }
                
                target.element.style.transform = `translate(${target.x}px, ${target.y}px)`;
                addLog(`${u.team} ì‹ ë¹„í•œ ë‚˜ë¬´ê°€ ${target.team}ì„ ë°€ì–´ëƒˆìŠµë‹ˆë‹¤!`, true);
            }
            
            u.tauntedTarget = null;
        }
    }
});

                    // â­ ì—¬ê¸°ì— ì¶”ê°€! íëŸ¬ ì•„ì´ì½˜ ë°˜ì „ ì²˜ë¦¬
    [...units.team1, ...units.team2].forEach(unit => {
        if (unit.type === 'healer' && !unit.canHeal) {
            const avatar = unit.element.querySelector('.soldier-avatar');
            if (avatar) {
                avatar.style.filter = 'invert(1)';
                avatar.style.opacity = '0.6';
            }
               const healthBar = unit.element.querySelector('.health-bar');
        if (healthBar && !unit.element.querySelector('.disabled-text')) {
            const disabledText = document.createElement('div');
            disabledText.className = 'disabled-text';
            disabledText.textContent = 'íšŒë³µ ë¶ˆê°€';
            disabledText.style.cssText = 'color: #ff4444; font-size: 10px; font-weight: bold; margin-top: 2px; text-align: center;';
            healthBar.parentNode.insertBefore(disabledText, healthBar.nextSibling);
        }
    }

    if (unit.type === 'advancedrepairshop' && !unit.canRepair) {
    const avatar = unit.element.querySelector('.soldier-avatar');
    if (avatar) {
        avatar.style.filter = 'invert(1)';
        avatar.style.opacity = '0.6';
    }
    const healthBar = unit.element.querySelector('.health-bar');
    if (healthBar && !unit.element.querySelector('.disabled-text')) {
        const disabledText = document.createElement('div');
        disabledText.className = 'disabled-text';
        disabledText.textContent = 'ê¸°ëŠ¥ ë¶ˆê°€';
        disabledText.style.cssText = 'color: #ff4444; font-size: 10px; font-weight: bold; margin-top: 2px; text-align: center;';
        healthBar.parentNode.insertBefore(disabledText, healthBar.nextSibling);
    }
}
    // â­ ë‚˜ë¬´ ì²˜ë¦¬ ì¶”ê°€
    if (unit.type === 'tree' && !unit.canTaunt) {
        const avatar = unit.element.querySelector('.soldier-avatar');
        if (avatar) {
            avatar.style.filter = 'invert(1)';
            avatar.style.opacity = '0.6';
        }
        const healthBar = unit.element.querySelector('.health-bar');
        if (healthBar && !unit.element.querySelector('.disabled-text')) {
            const disabledText = document.createElement('div');
            disabledText.className = 'disabled-text';
            disabledText.textContent = 'ê¸°ëŠ¥ ë¶ˆê°€';
            disabledText.style.cssText = 'color: #ff4444; font-size: 10px; font-weight: bold; margin-top: 2px; text-align: center;';
            healthBar.parentNode.insertBefore(disabledText, healthBar.nextSibling);
        }
    }
});
            });
        }
        function battleLoop() {
            const now = Date.now();

            [...units.team1, ...units.team2].forEach(u => {
    // ì •ë¹„ì†Œ ë²„í”„ í•´ì œ
    if (u.buffEndTime && now >= u.buffEndTime) {
        u.damage = u.baseDamage;  // ì›ë˜ ê³µê²©ë ¥ìœ¼ë¡œ ë³µêµ¬
        u.element.classList.remove('repair-buff');  // CSS í´ë˜ìŠ¤ ì œê±°
        
        // ì´í™íŠ¸ ì œê±°
        const buffIcons = u.element.querySelectorAll('.special-indicator');
        buffIcons.forEach(icon => icon.remove());
        
        delete u.buffEndTime;
        addLog(`${u.team} ${u.type}ì˜ ì •ë¹„ì†Œ ë²„í”„ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`, false);
    }
});

                 [...units.team1, ...units.team2].forEach(u => {
     // battleLoopì˜ ë¹™ì˜ í•´ì œ ë¶€ë¶„ì„ ì´ë ‡ê²Œ ìˆ˜ì •:
// battleLoopì˜ ë¹™ì˜ í•´ì œ ë¶€ë¶„ì„ ì´ë ‡ê²Œ ìˆ˜ì •:
if (u.isPossessed && u.alive && u.possessionEndTime && now >= u.possessionEndTime) {
    // â˜… í˜„ì¬ ì–´ëŠ sideì— ìˆëŠ”ì§€ ì •í™•íˆ í™•ì¸
    const team1Side = document.getElementById('team1-side');
    const team2Side = document.getElementById('team2-side');
    const currentSide = u.element.parentNode;  // â˜… ì‹¤ì œ ë¶€ëª¨ ë…¸ë“œ í™•ì¸
    const originalSide = u.originalTeam === units.team1[0]?.team ? team1Side : team2Side;
    
    // ë°°ì—´ ì´ë™
    const currentArray = units.team1.includes(u) ? units.team1 : units.team2;
    const originalArray = u.originalTeam === units.team1[0]?.team ? units.team1 : units.team2;
    
    if (currentArray !== originalArray) {
        const index = currentArray.indexOf(u);
        if (index > -1) {
            currentArray.splice(index, 1);
        }
        originalArray.push(u);
    }
    
    if (currentSide !== originalSide) {
        // í˜„ì¬ ì ˆëŒ€ ìœ„ì¹˜ ê³„ì‚° (ì˜¤í¬ì˜ í˜„ì¬ ìœ„ì¹˜)
        const team1Rect = team1Side.getBoundingClientRect();
        const team2Rect = team2Side.getBoundingClientRect();
        
        const currentRect = currentSide === team1Side ? team1Rect : team2Rect;
        const uAbsX = currentRect.left + u.x;
        const uAbsY = currentRect.top + u.y;
        
        // DOM ì´ë™
        currentSide.removeChild(u.element);
        originalSide.appendChild(u.element);
        
        // ì ˆëŒ€ ìœ„ì¹˜ë¥¼ ì›ë˜ sideì˜ ìƒëŒ€ ìœ„ì¹˜ë¡œ ë³€í™˜
        const originalRect = originalSide === team1Side ? team1Rect : team2Rect;
        u.x = uAbsX - originalRect.left;
        u.y = uAbsY - originalRect.top;
        u.element.style.transform = `translate(${u.x}px, ${u.y}px)`;
    }
    
    // ì›ìƒë³µêµ¬
u.team = u.originalTeam;
u.type = u.originalType;

// â˜… ì˜¤í¬ ì²´ë ¥ ì™„ì „ ë¬´ì‹œ! ì›ë˜ ìœ ë‹› HPë§Œ ì‚¬ìš©
u.maxHp = u.originalMaxHp;
u.hp = u.originalCurrentHp - 10;  // ë¹™ì˜ ì§ì „ HPì—ì„œ 30 ê°ì†Œ

if (u.hp <= 0) {
    u.hp = 0;
    u.alive = false;
    u.element.classList.add('dead');
    setTimeout(() => {
        if (u.element && u.element.parentNode) {
            u.element.parentNode.removeChild(u.element);
        }
    }, 1000);
}

u.baseDamage = u.originalBaseDamage;
u.damage = u.originalDamage;
u.baseAttackSpeed = u.originalBaseAttackSpeed;
u.attackSpeed = u.originalAttackSpeed;
u.range = u.originalRange;
u.speed = u.originalSpeed;
u.isPossessed = false;
u.isInvincible = false;

u.updateDisplay();


// ì •ë¹„ì†Œ ë²„í”„ í•´ì œ
// ì •ë¹„ì†Œ ë²„í”„ í•´ì œ ë¶€ë¶„ì— ì¶”ê°€
if (u.buffEndTime && now >= u.buffEndTime) {
    u.damage = u.baseDamage;  // â† ì´ë ‡ê²Œ ë³€ê²½ (baseDamageë¡œ ë³µêµ¬)
    u.element.classList.remove('repair-buff');
    
    // ì´í™íŠ¸ ì œê±°
    const buffIcons = u.element.querySelectorAll('.special-indicator');
    buffIcons.forEach(icon => icon.remove());
    
    delete u.originalDamageBeforeBuff;
    delete u.buffEndTime;
    
    addLog(`${u.team} ${u.type}ì˜ ì •ë¹„ì†Œ ë²„í”„ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`, false);
}

    // ì•„ë°”íƒ€ ë³µêµ¬
    const avatar = u.element.querySelector('.soldier-avatar');
    if (avatar) {
      const icons = {
        'knight': 'ğŸ—¡ï¸', 'archer': 'ğŸ¹', 'snowman': 'ğŸ¦',
        'healer': 'ğŸ’Š', 'shielder': 'ğŸ›¡ï¸', 'bomberman': 'ğŸ’£',
        'hammerman': 'ğŸ”¨', 'ninja': 'ğŸ¥·', 'orc': 'ğŸ‘¹',
        'golem': 'ğŸ—¿', 'angel': 'ğŸ‘¼', 'satan': 'ğŸ˜ˆ', 'cave': 'ğŸ›–', 'unicorn': 'ğŸ¦„',   'spirit': 'âœ¨', 'fairy': 'ğŸ§šâ€â™€ï¸', 'butterfly': 'ğŸ¦‹', 'cloud': 'â˜ï¸', 'pyramid': 'ğŸ',
        'tinyrobot': 'ğŸ¤–', 'minihelicopter': 'ğŸš', 'killergear': 'âš™ï¸','advancedrepairshop': 'ğŸ§°'
          // 
    };
        avatar.textContent = icons[u.originalType] || 'ğŸ—¡ï¸';
        avatar.style.filter = '';
    }
    
    // CSS ë³µêµ¬
    u.element.classList.remove('team1', 'team2');
    if (u.originalTeam === units.team1[0]?.team) {
        u.element.classList.add('team1');
    } else {
        u.element.classList.add('team2');
    }
    
    u.updateDisplay();
    u.setTeamColor();
    
    addLog(`${u.originalTeam}ì˜ ${u.originalType}ì´(ê°€) ë¹™ì˜ì—ì„œ ë²—ì–´ë‚¬ìŠµë‹ˆë‹¤!`, true);
}
                 });
    
            [units.team1, units.team2].flat().forEach(u => {
                if (!u || !u.alive) return;
                
                if (u.type === 'shielder' && u.isInvincible && u.shieldEndTime && now >= u.shieldEndTime) {
                    u.isInvincible = false;
                    if (u.element && u.element.classList) u.element.classList.remove('invincible');
                    u.nextShieldTime = Date.now() + u.shieldCooldownAfterEnd;
                    addLog(`${u.team} ì‰´ë”ì˜ ë¬´ì ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì‚¬ìš© ê°€ëŠ¥: 6ì´ˆ í›„`, false);
                    u.flashHealthBar();
                    u.shieldEndTime = 0;
                }

                if (u.type === 'tinyrobot' && u.isInvincible && u.invincibleEndTime && now >= u.invincibleEndTime) {
    u.isInvincible = false;
    u.element.classList.remove('invincible');
    addLog(`${u.team} ê¼¬ë§ˆë¡œë´‡ì˜ ë¬´ì ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`, false);
}

// ì‚´ì¸ ê¸°ì–´ ë¬´ì  í•´ì œ
if (u.type === 'killergear' && u.isInvincible && u.invincibleEndTime && now >= u.invincibleEndTime) {
    u.isInvincible = false;
    u.element.classList.remove('invincible');
    addLog(`${u.team} ì‚´ì¸ ê¸°ì–´ì˜ ë¬´ì ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`, false);
}
// ìœ ë‹ˆì½˜ ì°¨ì§€ ì‹œìŠ¤í…œ
[...units.team1, ...units.team2].forEach(u => {
    if (u.type === 'unicorn' && u.alive) {
        if (u.nextChargeTime === 0) {
            u.nextChargeTime = now + u.chargeInterval;
        }
        if (now >= u.nextChargeTime && u.chargeLevel < u.maxChargeLevel) {
            u.chargeLevel++;
            u.damage = u.baseDamage + (u.chargeLevel * 15);
            u.nextChargeTime = now + u.chargeInterval;
            u.updateChargeDisplay();
            addLog(`${u.team} ìœ ë‹ˆì½˜ ì°¨ì§€ ${u.chargeLevel}/6 (ê³µê²©ë ¥: ${u.damage})`, true);
        }
    }

    });

    [...units.team1, ...units.team2].forEach(u => {
    if (u.alive && u.sandDebuff && u.sandDebuff.active) {
        if (!u.element.classList.contains('sand-debuff')) {
            u.element.classList.add('sand-debuff');
        }
        
        if (now >= u.sandDebuff.nextTickTime) {
            u.takeDamage(u.sandDebuff.damage);
            u.sandDebuff.ticksLeft--;
            
            addLog(`${u.team} ${u.type} ë§¹ë… ëŒ€ë¯¸ì§€! (5 ë°ë¯¸ì§€, ${u.sandDebuff.ticksLeft}íšŒ ë‚¨ìŒ)`, false);
            
            if (u.sandDebuff.ticksLeft <= 0) {
                u.sandDebuff.active = false;
                u.element.classList.remove('sand-debuff');
            } else {
                u.sandDebuff.nextTickTime = now + 1000;
            }
        }
    }
});
                
                [units.team1, units.team2].flat().forEach(u => {
                    if (!u) return;
                    if (u.type === 'ninja' && u.alive === false && !u.hasRetreated) {
                        if (u.deathTimeout) {
                            clearTimeout(u.deathTimeout);
                            u.deathTimeout = null;
                        }
                        
                        u.alive = true;
                        u.hasRetreated = true;
                        u.range = 450;
                        u.attackSpeed = 4200;
                        u.damage = 20;
                        u.hp = 70;
                        
                        const team1Side = document.getElementById('team1-side');
                        const team2Side = document.getElementById('team2-side');
                        const sideEl = u.team === units.team1[0].team ? team1Side : team2Side;
                        
                        if (u.team === units.team1[0].team) {
                            u.x = Math.max(0, u.x - 400);
                        } else {
                            u.x = Math.min(sideEl.offsetWidth, u.x + 400);
                        }
                        
                        u.element.classList.remove('dead');
                        u.element.style.opacity = '1';
                        u.element.style.transform = `translate(${u.x}px, ${u.y}px)`;
                        
                        u.updateDisplay();
                        addLog(`${u.team} ë‹Œìê°€ í›„í‡´í–ˆìŠµë‹ˆë‹¤! ì¼ë¶€ ì²´ë ¥ì„ íšŒë³µ`, true);
                    }
                });
                
                if (u.type === 'bomberman' && u.bombs && u.bombs.length > 0) {
                    u.bombs = u.bombs.filter(bomb => {
                        if (now >= bomb.explosionTime) {
                            const target = bomb.target;
                            if (target && target.alive) {
                                target.takeDamage(u.bombDamage);
                                addLog(`${u.team} í­íƒ„ë³‘ì˜ í­íƒ„ì´ ${target.team}ì—ê²Œ í­ë°œ! (${u.bombDamage} ë°ë¯¸ì§€)`, false);
                                const enemies = u.team === units.team1[0].team ? units.team2 : units.team1;
                                const team1Side = document.getElementById('team1-side');
                                const team2Side = document.getElementById('team2-side');
                                if (team1Side && team2Side) {
                                    const team1Rect = team1Side.getBoundingClientRect();
                                    const team2Rect = team2Side.getBoundingClientRect();
                                    const targetRect = u.team === units.team1[0].team ? team2Rect : team1Rect;
                                    enemies.forEach(enemy => {
                                        if (enemy !== target && enemy.alive) {
                                            const enemyAbsX = targetRect.left + enemy.x;
                                            const enemyAbsY = targetRect.top + enemy.y;
                                            const targetAbsX = targetRect.left + target.x;
                                            const targetAbsY = targetRect.top + target.y;
                                            const distToEnemy = Math.sqrt((enemyAbsX - targetAbsX) ** 2 + (enemyAbsY - targetAbsY) ** 2);
                                            if (distToEnemy <= u.bombSplashRange) {
                                                const splashDamage = u.bombDamage * 0.5;
                                                enemy.takeDamage(splashDamage);
                                                addLog(`${u.team} í­íƒ„ë³‘ì˜ ìŠ¤í”Œë˜ì‹œ! (${Math.floor(splashDamage)} ë°ë¯¸ì§€)`, false);
                                            }
                                        }
                                    });
                                }
                            }
                            u.takeDamage(u.bombSelfDamage);
                            addLog(`${u.team} í­íƒ„ë³‘ì´ ìì‹ ì˜ í­íƒ„ìœ¼ë¡œ í”¼í•´ë¥¼ ì…ì—ˆìŠµë‹ˆë‹¤! (${u.bombSelfDamage} ë°ë¯¸ì§€)`, false);
                            return false;
                        }
                        return true;
                    });
                }
            });
     const aliveTeam1 = units.team1.filter(u => u.alive);
const aliveTeam2 = units.team2.filter(u => u.alive);

updateTeamCounts();

// â­ ì´ ë‘ ì¤„ì„ ìœ„ë¡œ ì´ë™
const allUnits = [...units.team1, ...units.team2];
const team1Name = units.team1[0]?.team;
const team2Name = units.team2[0]?.team;

// â­ team1Name, team2Name ì‚¬ìš©
const actualAliveTeam1 = aliveTeam1.filter(u => !u.isPossessed || u.originalTeam === team1Name).length +
                          aliveTeam2.filter(u => u.isPossessed && u.originalTeam === team1Name).length;
const actualAliveTeam2 = aliveTeam2.filter(u => !u.isPossessed || u.originalTeam === team2Name).length +
                          aliveTeam1.filter(u => u.isPossessed && u.originalTeam === team2Name).length;

if (actualAliveTeam1 === 0 || actualAliveTeam2 === 0) {
    endBattle(actualAliveTeam1 > 0 ? team1Name : team2Name);
    return;
}

const actualTeam1 = allUnits.filter(u => u.alive && u.team === team1Name);
const actualTeam2 = allUnits.filter(u => u.alive && u.team === team2Name);

actualTeam1.forEach(unit => {
    let closestTarget = null;
    let closestDistance = Infinity;

    // â­ ì •ë¹„ì†Œì—ê²Œ í˜¸ì¶œë‹¹í•œ ìœ ë‹›ì€ ì •ë¹„ì†Œë¡œë§Œ ì´ë™
    let calledByRepairShop = null;
    actualTeam1.forEach(ally => {
        if (ally.type === 'advancedrepairshop' && ally.targetUnit === unit && ally.isRepairing && ally.alive) {
            calledByRepairShop = ally;
        }
    });
    
    if (calledByRepairShop) {
        // ì •ë¹„ì†Œë¡œ ì´ë™ë§Œ í•˜ê³  ê³µê²© ì•ˆí•¨
        return;
    }
    
    // â­ ë‚˜ë¬´ì—ê²Œ ì–´ê·¸ë¡œê°€ ëŒë ¸ëŠ”ì§€ í™•ì¸
    let tauntedBy = null;
    actualTeam2.forEach(enemy => {
        if (enemy.type === 'tree' && enemy.tauntedTarget === unit && enemy.alive) {
            tauntedBy = enemy;
        }
    });
    
    // â­ ì–´ê·¸ë¡œ ëŒë ¸ìœ¼ë©´ ë¬´ì¡°ê±´ ê·¸ ë‚˜ë¬´ë¥¼ ê³µê²© (4ì´ˆ ë™ì•ˆ ìœ ì§€)
    if (tauntedBy) {
        unit.moveTowards(tauntedBy);
        unit.attack(tauntedBy);
        return;  // â­ ë‹¤ë¥¸ íƒ€ê²Ÿ ì°¾ì§€ ì•Šê³  ì—¬ê¸°ì„œ ì¢…ë£Œ
    }
    
    actualTeam2.forEach(target => {
        const team1Rect = document.getElementById('team1-side').getBoundingClientRect();
        const team2Rect = document.getElementById('team2-side').getBoundingClientRect();
        
        const unitInTeam1Array = units.team1.includes(unit);
        const targetInTeam1Array = units.team1.includes(target);
        
        const unitAbsX = (unitInTeam1Array ? team1Rect.left : team2Rect.left) + unit.x;
        const unitAbsY = (unitInTeam1Array ? team1Rect.top : team2Rect.top) + unit.y;
        const targetAbsX = (targetInTeam1Array ? team1Rect.left : team2Rect.left) + target.x;
        const targetAbsY = (targetInTeam1Array ? team1Rect.top : team2Rect.top) + target.y;
        
        const distance = Math.sqrt((targetAbsX - unitAbsX) ** 2 + (targetAbsY - unitAbsY) ** 2);
        if (distance < closestDistance) {
            closestDistance = distance;
            closestTarget = target;
        }
    });
    
    if (closestTarget) {
        unit.moveTowards(closestTarget);
        unit.attack(closestTarget);
    }
});

actualTeam2.forEach(unit => {
    let closestTarget = null;
    let closestDistance = Infinity;

    // â­ ì •ë¹„ì†Œì—ê²Œ í˜¸ì¶œë‹¹í•œ ìœ ë‹›ì€ ì •ë¹„ì†Œë¡œë§Œ ì´ë™
    let calledByRepairShop = null;
    actualTeam2.forEach(ally => {
        if (ally.type === 'advancedrepairshop' && ally.targetUnit === unit && ally.isRepairing && ally.alive) {
            calledByRepairShop = ally;
        }
    });
    
    if (calledByRepairShop) {
        // ì •ë¹„ì†Œë¡œ ì´ë™ë§Œ í•˜ê³  ê³µê²© ì•ˆí•¨
        return;
    }

    let tauntedBy = null;
    actualTeam1.forEach(enemy => {
        if (enemy.type === 'tree' && enemy.tauntedTarget === unit && enemy.alive) {
            tauntedBy = enemy;
        }
    });
    
    // ì–´ê·¸ë¡œ ëŒë ¸ìœ¼ë©´ ë¬´ì¡°ê±´ ê·¸ ë‚˜ë¬´ë¥¼ ê³µê²©
    if (tauntedBy) {
        unit.moveTowards(tauntedBy);
        unit.attack(tauntedBy);
        return;
    }
    
    actualTeam1.forEach(target => {
        const team1Rect = document.getElementById('team1-side').getBoundingClientRect();
        const team2Rect = document.getElementById('team2-side').getBoundingClientRect();
        
        const unitInTeam1Array = units.team1.includes(unit);
        const targetInTeam1Array = units.team1.includes(target);
        
        const unitAbsX = (unitInTeam1Array ? team1Rect.left : team2Rect.left) + unit.x;
        const unitAbsY = (unitInTeam1Array ? team1Rect.top : team2Rect.top) + unit.y;
        const targetAbsX = (targetInTeam1Array ? team1Rect.left : team2Rect.left) + target.x;
        const targetAbsY = (targetInTeam1Array ? team1Rect.top : team2Rect.top) + target.y;
        
        const distance = Math.sqrt((targetAbsX - unitAbsX) ** 2 + (targetAbsY - unitAbsY) ** 2);
        if (distance < closestDistance) {
            closestDistance = distance;
            closestTarget = target;
        }
    });
    
    if (closestTarget) {
        unit.moveTowards(closestTarget);
        unit.attack(closestTarget);
    }
});
        }
        function updateTeamCounts() {
            const team1CountsEl = document.getElementById('team1-counts');
            const team2CountsEl = document.getElementById('team2-counts');
            if (!team1CountsEl || !team2CountsEl) return;

            const summarize = (arr) => {
                const alive = arr.filter(u => u.alive);
                const total = alive.length;
                const byType = {};
                alive.forEach(u => {
                    const key = `${u.type} (${u.row})`;
                    byType[key] = (byType[key] || 0) + 1;
                });
                return { total, byType };
            };

            const t1 = summarize(units.team1);
            const t2 = summarize(units.team2);

            team1CountsEl.querySelector('.summary').textContent = `ë‚¨ì€: ${t1.total}`;
            team2CountsEl.querySelector('.summary').textContent = `ë‚¨ì€: ${t2.total}`;

            const makeDetails = (byType) => {
                return Object.keys(byType).map(k => `${k}: ${byType[k]}`).join('<br>') || 'ì—†ìŒ';
            };

            team1CountsEl.querySelector('.details').innerHTML = makeDetails(t1.byType);
            team2CountsEl.querySelector('.details').innerHTML = makeDetails(t2.byType);
        }

function endBattle(winner) {
    clearInterval(battleInterval);
    battleActive = false;
    
    // ì¼ë°˜ ì „íˆ¬ (ë³´ìŠ¤ì „ì´ ì•„ë‹ ë•Œ)
    if (!bossMode.active) {
        const announce = document.createElement('div');
        announce.className = 'winner-announce';
        announce.textContent = `ğŸ† ${winner} ìŠ¹ë¦¬! ğŸ†`;
        document.body.appendChild(announce);
        
        addLog(`ğŸ† ${winner} ìŠ¹ë¦¬!`);
        
        setTimeout(() => announce.remove(), 4000);
        return;
    }
    
    // ë³´ìŠ¤ì „
// ë³´ìŠ¤ì „
if (winner === 'í”Œë ˆì´ì–´') {
    // ë¼ìš´ë“œ í´ë¦¬ì–´ í™”ë©´ í‘œì‹œ
    const announce = document.createElement('div');
    announce.className = 'winner-announce';
    announce.textContent = `ğŸ‰ ë¼ìš´ë“œ ${bossMode.round} í´ë¦¬ì–´! ğŸ‰`;
    document.body.appendChild(announce);
    
    addLog(`ğŸ‰ ë¼ìš´ë“œ ${bossMode.round} í´ë¦¬ì–´!`);
    
    if (bossMode.round > bossMode.maxRecord) {
        bossMode.maxRecord = bossMode.round;
    }
    
    setTimeout(() => {
        announce.remove();
        openNextRound();
    }, 3000);

    } else {
        const announce = document.createElement('div');
        announce.className = 'winner-announce';
        announce.textContent = `ğŸ’€ íŒ¨ë°°! ìµœì¢… ë¼ìš´ë“œ: ${bossMode.round}`;
        document.body.appendChild(announce);
        
        addLog(`ğŸ’€ ë³´ìŠ¤ì „ ì¢…ë£Œ! ìµœì¢… ë¼ìš´ë“œ: ${bossMode.round}, ìµœê³  ê¸°ë¡: ${bossMode.maxRecord}`);
        
        setTimeout(() => {
            announce.remove();
            bossMode.active = false;
        }, 4000);
    }
}

function openNextRound() {
    bossMode.round++;
    bossMode.rerollsLeft = 1;
    
    document.getElementById('bossModeModal').classList.add('active');
    document.getElementById('bossModalTitle').textContent = `ğŸ‘‘ ë³´ìŠ¤ì „ - ë¼ìš´ë“œ ${bossMode.round}`;
    document.getElementById('bossCardSelection').style.display = 'block';
    document.getElementById('bossRoundResult').style.display = 'none';
    
    // ìœ ë‹› 1ê°œ ì œê±° ì„ íƒ ëª¨ë“œ
    showReplaceMode();
}

// êµì²´ ëª¨ë“œ
function showReplaceMode() {
    const container = document.getElementById('cardContainer');
    container.innerHTML = '<p style="text-align: center; font-size: 16px; color: #ffd700;">ìœ ì§€í•  ìœ ë‹› 1ê°œë¥¼ ì„ íƒí•˜ì„¸ìš” (ë‚˜ë¨¸ì§€ëŠ” ì œê±°ë©ë‹ˆë‹¤)</p>';
    
    const listContainer = document.getElementById('selectedUnitsList');
    listContainer.innerHTML = '';
    
    // â­ ìˆ˜ì •: unitDataë¡œ ë°›ê³  .typeìœ¼ë¡œ ì ‘ê·¼
    bossMode.selectedUnits.forEach((unitData, index) => {
        const unitInfo = unitDescriptions[unitData.type];  // â­ .type ì¶”ê°€
        const positionText = unitData.position === 'front' ? 'ì „ë°©' : 'í›„ë°©';
        
        const item = document.createElement('div');
        item.className = 'selected-unit-item';
        item.style.cursor = 'pointer';
        item.onclick = () => keepOneUnit(index);
        item.innerHTML = `
            <div class="unit-icon">${unitInfo.icon}</div>
            <div>
                <div>${unitInfo.name}</div>
                <div style="font-size: 11px; color: #ffd700;">${positionText}</div>
            </div>
            <div style="color: #4CAF50; font-size: 12px;">í´ë¦­í•˜ì—¬ ìœ ì§€</div>
        `;
        listContainer.appendChild(item);
    });
    
    const startBtn = document.getElementById('startBossBtn');
    if (startBtn) startBtn.style.display = 'none';
}

// ìœ ë‹› êµì²´
function keepOneUnit(index) {
    const keptUnit = bossMode.selectedUnits[index];
    bossMode.selectedUnits = [keptUnit];
    
    generateCards(3);
    updateBossUI();
    
    const startBtn = document.getElementById('startBossBtn');
    if (startBtn) startBtn.style.display = 'block';
    
    // ë¦¬ë¡¤ ë²„íŠ¼ ì½”ë“œ ì‚­ì œ
}

        function resetBattle() {
            clearInterval(battleInterval);
            battleActive = false;
            units = { team1: [], team2: [] };
            battlefield.innerHTML = '';
            document.getElementById('battleLog').innerHTML = '';
            damageMultiplier = 1.0;
            document.getElementById('damageBtn').textContent = 'ğŸ’ª ê³µê²©ë ¥ +100% (100%)';
        }

        function addLog(message, isSpecial = false) {
            const log = document.getElementById('battleLog');
            const entry = document.createElement('div');
            entry.className = isSpecial ? 'log-entry special' : 'log-entry damage';
            const time = new Date().toLocaleTimeString('ko-KR', { hour12: false, hour: '2-digit', minute: '2-digit', second: '2-digit' });
            entry.textContent = `[${time}] ${message}`;
            log.insertBefore(entry, log.firstChild);
            
            if (log.children.length > 50) {
                log.removeChild(log.lastChild);
            }
        }
    </script>
</body>
</html>
